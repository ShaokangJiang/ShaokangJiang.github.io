<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Shaokang&#39;s Blog</title>
    <link>https://shaokangjiang.github.io/</link>
    
    <atom:link href="https://shaokangjiang.github.io/rss2.xml" rel="self" type="application/rss+xml"/>
    
    <description></description>
    <pubDate>Tue, 26 Dec 2023 18:08:10 GMT</pubDate>
    <generator>http://hexo.io/</generator>
    
    <item>
      <title>Fighting loneliness using generative AI with avatar</title>
      <link>https://shaokangjiang.github.io/2023/Fighting-loneliness-using-generative-AI-with-avatar/</link>
      <guid>https://shaokangjiang.github.io/2023/Fighting-loneliness-using-generative-AI-with-avatar/</guid>
      <pubDate>Sat, 23 Dec 2023 09:38:49 GMT</pubDate>
      
      <description>&lt;p&gt;Note: This is a group project, and I am only responsible for a portion of the work. Citations have been removed to adjust for website rendering. The original PDF is at the end of this page.&lt;/p&gt;&lt;p&gt;ChatGPT‚Äôs potential for human-like communication is noteworthy, but the mental health implications of integrating a real human identity remain understudied. This research focuses on introducing an AvatarGPT, a human-like avatar, to the ChatGPT interface to delve into these effects. A between-subject study (N=10) was conducted to investigate users‚Äô responses, evaluate, and compare the effectiveness of AvatarGPT and ChatGPT before and after a conversation using the UCLA Loneliness Scale. Results show that neither using an avatar (p‚âà0.39) nor conversing without the avatar (p‚âà0.11) significantly improved loneliness scores. Additionally, using the avatar did not enhance willingness to speak, as measured by increased word counts, or significantly reducing loneliness score in percentage (p‚âà0.59). We believe that with a larger participant pool and a longer experimental period, we would be able to observe a more significant increase in emotional change.&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<p>Note: This is a group project, and I am only responsible for a portion of the work. Citations have been removed to adjust for website rendering. The original PDF is at the end of this page.</p><p>ChatGPT‚Äôs potential for human-like communication is noteworthy, but the mental health implications of integrating a real human identity remain understudied. This research focuses on introducing an AvatarGPT, a human-like avatar, to the ChatGPT interface to delve into these effects. A between-subject study (N=10) was conducted to investigate users‚Äô responses, evaluate, and compare the effectiveness of AvatarGPT and ChatGPT before and after a conversation using the UCLA Loneliness Scale. Results show that neither using an avatar (p‚âà0.39) nor conversing without the avatar (p‚âà0.11) significantly improved loneliness scores. Additionally, using the avatar did not enhance willingness to speak, as measured by increased word counts, or significantly reducing loneliness score in percentage (p‚âà0.59). We believe that with a larger participant pool and a longer experimental period, we would be able to observe a more significant increase in emotional change.<a id="more"></a></p><h2 id="introduction"><a class="markdownIt-Anchor" href="#introduction"></a> Introduction</h2><p>In recent years, exciting technological advances and research in robotics have led to a wide range of applications in many areas. One kind of robotics called Socially Assistive Robots(SAR) is widely used in health care and emotional support areas for it has the ability to provide emotional, cognitive and social support. These robots have been used to combat cognitive decline and depression through various methods such as making jokes and dancing. However, they provide emotional support only through basic reflective listening techniques and simple interactions, such as repeating or paraphrasing people‚Äôs words and their conversation patterns could use a lot of improvement.</p><p>Meanwhile, advancements in natural language processing and AI have given rise to innovative tools that offer a new dimension of human-computer interaction. ChatGPT, a language model developed by OpenAI, possesses the ability to understand and generate natural language, enabling smooth conversational interactions with users. Its natural language processing capabilities present immense potential for applications in emotional support and mental health.</p><p>Integrating an avatar interface with ChatGPT is primarily motivated by the limitations of text-only input in traditional chatbot interactions. By incorporating an avatar-based interactive interface, it is possible to enhance user engagement and enrich the overall experience. This approach is expected to foster greater initiative in user interactions with the chatbot, making the exchanges more intuitive and personable and improving user interaction and satisfaction.</p><p>The integration of LLMs like ChatGPT represents a further leap in mental health care. LLMs offer more natural, deeper conversational interactions, crucial for personalized emotional support and therapy. Incorporating LLMs into SAR with virtual avatars enriches the user experience, providing a sense of real social interaction and deeper emotional resonance and opening new possibilities for personalized and emotional support.</p><p>Thus, we implemented a new chat interface called AvatarGPT, ChatGPT with a vivid avatar interface to ‚Äôspeak out‚Äô the texts answered by ChatGPT, to provide mental health care. We then conducted a between-subject experiment with 10 participants in which some participants were using AvatarGPT (the treatment group) and some were given a basic ChatGPT (the control group). We formulated our research question as follows: Will the presence of a human-like avatar in the interface of ChatGPT increase the feeling of human connection during a conversation and, consequently, help reduce the symptoms of depression, especially loneliness?</p><p>To address this research question, we considered the following hypotheses:</p><p>H1:</p><p>Conversing with ChatGPT with an avatar would reduce user loneliness</p><p>H2:</p><p>Use avatar would increase speaking willingness</p><p>H3:</p><p>Conversations with more words would indicate greater reduced loneliness</p><h3 id="contribution"><a class="markdownIt-Anchor" href="#contribution"></a> Contribution</h3><p>Surprisingly, we found that neither ChatGPT nor AvatarGPT significantly contributes to people‚Äôs mental health in terms of reducing loneliness. In addition, we didn‚Äôt observe an increased level of willingness to speak or a more significant reduction in loneliness percentage across the two conditions.</p><h2 id="related-work"><a class="markdownIt-Anchor" href="#related-work"></a> Related work</h2><p>In the field of mental health care, the application of Socially Assistive Robots (SAR) is increasingly being emphasized, especially with the development of AI. Mental health issues pose a significant burden on individuals and society. In the US, about 25% of the population meets the criteria for a diagnosable psychiatric condition each year. Against this backdrop, SAR demonstrates tremendous potential. These robots have already assumed various roles in mental healthcare, including companions, coaches, and play partners.</p><p>For example, a robot called Paro has been used as a companion providing emotional support and reducing loneliness, akin to trained therapy animals. Also, simple robots with basic conversational abilities have proven beneficial for otherwise healthy older adults facing social isolation and loneliness.</p><p>AI now also become a valuable tool in this field, aiding professionals and enhancing patient care. Some AI systems, like Horyzons, provide accessible social therapy for youths with psychosis, allowing them to share and express emotions in a safe, moderated online environment. This platform reduces the intimidation associated with traditional group therapy by facilitating anonymous interaction. Also, Online Mental Health Communities use AI-mediated communication to better form relationships and communicate between people.</p><h2 id="method"><a class="markdownIt-Anchor" href="#method"></a> Method</h2><p>We conducted a between-subjects experiment to investigate the influence of interactions with ChatGPT and AvatarGPT on participants‚Äô self-reported loneliness levels. Participants, recruited from a campus setting, were randomly assigned to one of two groups. Each group engaged in interactive tasks with either ChatGPT or AvatarGPT(modified to include a speaking humanoid avatar integrated into the ChatGPT interface). The experiment included a pre-survey to establish baseline loneliness, 2 interactive tasks for each group, and a post-survey for reassessment. Our study aims to find out how these interactions impact participants‚Äô emotional states and feelings of loneliness.</p><h4 id="pre-survey-establish-baseline-level-of-loneliness"><a class="markdownIt-Anchor" href="#pre-survey-establish-baseline-level-of-loneliness"></a> Pre-Survey: Establish Baseline Level of Loneliness</h4><p>Prior to the start of the experiment, participants were asked to complete the modifed UCLA Loneliness Scale survey independently, without any integration with ChatGPT. By comparing the pre-survey responses with subsequent post-survey responses, we can effectively measure any changes in participants‚Äô feelings of loneliness resulting from their interactions with AvatarGPT.</p><h4 id="task-1-question-answering-task"><a class="markdownIt-Anchor" href="#task-1-question-answering-task"></a> Task 1: Question-Answering Task</h4><p>Participants in this task will engage in a conversation with either ChatGPT or AvatarGPT, during which they will respond to questions related to their personal life, hobbies, or daily challenges. The primary goal is to encourage participants to share their feelings and thoughts openly, as well as to prompt them to pose additional questions. To initiate the task, ChatGPT or AvatarGPT is given the following prompt: ‚ÄúI need you to act like the interviewer, so speak like a human. I need you to ask me questions about life, hobbies, or daily challenges. Engage in a conversation with me. I need you to talk to me and encourage me to share my feelings and pose additional questions. Ask specific questions. Start off the conversation with ‚ÄôThank you for coming!‚Äô‚Äù</p><p>The participants are instructed to chat for a duration of 5 minutes. Importantly, during this time, the experimenter should not intervene. After the 5-minute conversation, the task will conclude, and participants will proceed to Task 2.</p><h4 id="task-2-scenario-generation-task"><a class="markdownIt-Anchor" href="#task-2-scenario-generation-task"></a> Task 2: Scenario Generation Task</h4><p>In this task, participants will engage in collaborative storytelling with either ChatGPT or AvatarGPT, focusing on themes of friendship and support. The objective is to jointly create a story plot that embodies these themes, while also integrating personal experiences and emotional elements to add authenticity and depth to the narrative. Participants are encouraged to work together to construct a story that flows seamlessly and feels interconnected. To initiate the task, participants are instructed as follows: ‚ÄúThe goal of this task is to collaboratively create a story plot that revolves around themes of friendship and support in the next 5 minutes. We encourage you to infuse your personal experiences and emotions into the narrative to make it authentic and meaningful. Remember, this is a collaborative effort. Feel free to build on each other‚Äôs ideas, creating a narrative that flows seamlessly. Collaboration is key to making our story rich and interconnected. Let‚Äôs start with a simple prompt to kick things off. Imagine a setting or a situation where the characters need friendship and support. It could be anything ‚Äì a challenging moment, a celebration, or even a quiet, reflective scene. Build upon this prompt in your contributions.‚Äù After the 5-minute storytelling session concludes, the conversation will stop, and participants will proceed to the post-survey.</p><h4 id="post-survey-reassessment-of-participant-responses"><a class="markdownIt-Anchor" href="#post-survey-reassessment-of-participant-responses"></a> Post-Survey: Reassessment of Participant Responses</h4><p>Following completion of the experimental tasks, participants will be asked to take the same survey that they completed as the pre-survey. The purpose of this post-survey is to assess whether there have been any changes in participant responses or perceptions after engaging in the interactive tasks with ChatGPT or AvatarGPT. By comparing pre-survey and post-survey responses, we aim to examine the potential impact of these interactions on participants‚Äô feelings, experiences, and attitudes. This comparison will enable us to gain insights into the effectiveness of the interactions and their potential influence on various aspects of participants‚Äô well-being and emotional state.</p><h4 id="participants-and-recruitment"><a class="markdownIt-Anchor" href="#participants-and-recruitment"></a> Participants and recruitment</h4><p>We recruit 10 people via interactions with students on campus. All of them self-identified as 1) at least 18 years old.</p><h2 id="experiment-description"><a class="markdownIt-Anchor" href="#experiment-description"></a> Experiment description</h2><p>In our experiment, we introduced the AvatarGPT by adding an avatar to the right bottom corner of the website ChatGPT interface in the browser window, as shown in <a href="#img:runsample">1</a>. The modified interface will be represented to participants in Task 1 and Task 2.</p><p>Specifically, we employed a JavaScript program through Tampermonkey to integrate a humanoid face into the corner of the ChatGPT interface. This humanoid face was designed to simulate speaking by moving its mouth synchronously with the textual responses generated by ChatGPT. The primary objective was to create an association in the user‚Äôs mind, where they would attribute the words produced by ChatGPT as being spoken by the avatar.</p><img src="/2023/Fighting-loneliness-using-generative-AI-with-avatar/avatar.png"><p><em>A sample running environment for AvatarGPT</em></p><h3 id="data-collection"><a class="markdownIt-Anchor" href="#data-collection"></a> Data collection</h3><p>In our study, we used a slightly modified UCLA Loneliness Scale to measure participants‚Äô loneliness levels [<a href="http://bit.ly/cse216survey1" target="_blank" rel="noopener">bit.ly/cse216survey1</a>]. The UCLA Loneliness scale is a well-established questionnaire for assessing loneliness that employs a frequency-based response format. However, we adapted it by retaining the same questions but using an agreeance-based response scale. Participants were required to indicated their agreement levels with 20 negatively phrased statements. This allowed us to gauge participants‚Äô current loneliness within the context of our short-term experiment. Lower scores indicate a more optimistic emotional state, while higher scores reflect a more pessimistic one.</p><p>In more detail regarding the evaluation and calculation of scores, the participant‚Äôs responses are scored on a scale from 1 to 5 for each question. A score of 1 represents ‚ÄúStrongly Disagree,‚Äù indicating that the participant completely disagrees with the negative statement, suggesting a more optimistic emotional state. Conversely, a score of 5 represents ‚ÄúStrongly Agree,‚Äù indicating a high level of agreement with the negative statement, which may suggest a more pessimistic emotional state. Once we finish converting all answers from categories to scores, we simply use the average overall responses as the final representation of one‚Äôs loneliness scale.</p><h2 id="result"><a class="markdownIt-Anchor" href="#result"></a> Result</h2><p>10 people are randomly assigned to two groups, either AvatarGPT group or ChatGPT group. Among 10 participants, 6 (2 Male, 3 Female, 1 prefer not to say) were assigned to ChatGPT group. The age is between 19-25 (M=21.3, Median=21). 4 participants (2 Male, 1 Female, 1 prefer not to say) were assigned to AvatarGPT group. The age is in between 21-24 (M=21.7, Median=21.5).</p><p>We collected the score based on 3.2 and analyzed the effect of interactions on participant loneliness for each group by addressing each hypothesis one by one.</p><h3 id="h1-conversing-with-chatgpt-with-an-avatar-would-reduce-user-loneliness"><a class="markdownIt-Anchor" href="#h1-conversing-with-chatgpt-with-an-avatar-would-reduce-user-loneliness"></a> H1: Conversing with ChatGPT with an avatar would reduce user loneliness</h3><p>We calculated the score based on the method mentioned in 3.2, representing the final result as shown in 2 for both groups. We then conducted a Student paired t-test to assess the impact of the interactions for each condition. In ChtGPT group, where participants engaged with the original interface of ChatGPT, we did not observe a significant difference in scores before and after the chat (t‚âà2.2, p‚âà0.11). Similarly, in AvatarGPT group, where participants interacted with the avatar version of ChatGPT, we also did not find a significant difference in scores before and after the chat (t‚âà2.4, p‚âà0.39). Lower scores indicate lower levels of measured loneliness.</p><img src="/2023/Fighting-loneliness-using-generative-AI-with-avatar/H1.jpg"><p><em>A Student paired t-test shows neither ChtGPT nor AvatarGPT has a significant contribution to reducing an individual‚Äôs loneliness score.</em></p><h2 id="h2-use-avatar-would-increase-speaking-willingness"><a class="markdownIt-Anchor" href="#h2-use-avatar-would-increase-speaking-willingness"></a> H2: Use avatar would increase speaking willingness</h2><p>From the recorded conversations, we analyzed both the word counts from the subjects and those generated by ChatGPT or AvatarGPT. The result is shown in <a href="#img:H2">3</a> for each condition.</p><p>We conducted a Student paired t-test to analyze the relationship between total word counts and avatar usage. Our results indicated no significant difference between the usage of the avatar and participants‚Äô willingness to type (t$\approx<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn><mi mathvariant="normal">.</mi><mn>4</mn><mo separator="true">,</mo><mi>p</mi></mrow><annotation encoding="application/x-tex">2.4, p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.64444em"></span><span class="strut bottom" style="height:.8388800000000001em;vertical-align:-.19444em"></span><span class="base textstyle uncramped"><span class="mord mathrm">2</span><span class="mord mathrm">.</span><span class="mord mathrm">4</span><span class="mpunct">,</span><span class="mord mathit">p</span></span></span></span>\approx$0.83).</p><img src="/2023/Fighting-loneliness-using-generative-AI-with-avatar/H2.jpg"><p><em>A Student paired t-test shows using an avatar would not increase the willingness to speak significantly.</em></p><h2 id="h3-conversations-with-more-words-would-indicate-greater-reduced-loneliness"><a class="markdownIt-Anchor" href="#h3-conversations-with-more-words-would-indicate-greater-reduced-loneliness"></a> H3: Conversations with more words would indicate greater reduced loneliness</h2><p>To quantify the changes in feelings of loneliness, we assess these variations using the percentage change in scores from the Pre-Survey. This method involves comparing the scores of the same participant across two separate surveys and calculating the difference between these scores. Specifically, we record the scores of a participant from two different instances of the survey. Then, we calculate the difference between these two scores. This difference is then divided by the score from the Pre-Survey, resulting in a value that represents the change in feelings of loneliness. This value reflects the extent of change in loneliness between the two tests, essentially representing the proportion of the change in scores relative to the score of the first test. The result for each condition is shown in <a href="#img:H3">4</a>.</p><p>We conducted an ANOVA test to examine the relationship between word counts and the change in scores expressed as a percentage. Our analysis revealed no significant difference between these variables (F(1, 8) $\approx<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn><mi mathvariant="normal">.</mi><mn>3</mn><mn>1</mn><mo separator="true">,</mo><mi>p</mi></mrow><annotation encoding="application/x-tex">0.31, p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.64444em"></span><span class="strut bottom" style="height:.8388800000000001em;vertical-align:-.19444em"></span><span class="base textstyle uncramped"><span class="mord mathrm">0</span><span class="mord mathrm">.</span><span class="mord mathrm">3</span><span class="mord mathrm">1</span><span class="mpunct">,</span><span class="mord mathit">p</span></span></span></span>\approx$0.59, $\eta^2\approx$0.04). It‚Äôs worth noting that a negative score indicates that participants reported heightened feelings of loneliness after the conversation.</p><img src="/2023/Fighting-loneliness-using-generative-AI-with-avatar/H3.jpg"><p><em>An ANOVA test shows using an avatar would not reduce loneliness in terms of the ratio of the score difference.</em></p><h2 id="limitation"><a class="markdownIt-Anchor" href="#limitation"></a> Limitation</h2><p>One notable limitation of our study is the lack of validation for the modified version of the UCLA Loneliness Scale employed in this research. While the UCLA Loneliness Scale is well-established measuring loneliness, our adaptation was designed to assess transient or short-term loneliness as a mood rather than a traditional emotional state. Given that there was no widely recognized scale available specifically tailored to the measurement of transient loneliness in the context of our study, this adaptation was a necessary step. However, this modification raises questions about the scale‚Äôs validity and whether it accurately captures the targeted construct. future research should consider conducting validation studies to assess the reliability of our adapted scale for measuring short-term loneliness.</p><p>Another limitation of our study is the specific avatar chosen for the interactions with participants. We selected an arbitrary humanoid woman avatar presented in black and white, which was aligned with the color scheme of ChatGPT. Individual perceptions of avatars can vary widely, and some participants reported the chosen avatar to be ‚Äúscary‚Äù or ‚Äúdistracting‚Äù. A more systematic approach to avatar selection should be considered.</p><h2 id="future-work"><a class="markdownIt-Anchor" href="#future-work"></a> Future work</h2><p>Exploring the impact of personalized avatar designs and behaviors on user engagement is important as customization options for avatars could enhance interactions. Investigating the long-term effects of both ChatGPT and AvatarGPT on user well-being and attachment to avatars. Comparative studies with other mental health support tools can provide insights into AvatarGPT‚Äôs unique advantages and limitations in different contexts, contributing to more effective and responsible AI-driven mental health care systems.</p><h2 id="conclusion"><a class="markdownIt-Anchor" href="#conclusion"></a> Conclusion</h2><p>Even though both robotics and large language models are trying to simulate human behavior, our current research result reveals the distance between them and real humans. In this research, our results show that neither using an avatar nor conversing without the avatar significantly improved loneliness scores. Additionally, using the avatar did not enhance willingness to speak, or significantly reduce loneliness score in percentage. We believe that with a larger participant pool and a longer experimental period, we would be able to observe a more significant increase in emotional change.</p><p>The original PDF file</p><div class="row"><embed src="sample-manuscript.pdf" width="100%" height="550" type="application/pdf"></div>]]></content:encoded>
      
      
      <category domain="https://shaokangjiang.github.io/categories/research/">research</category>
      
      
      <category domain="https://shaokangjiang.github.io/tags/research/">research</category>
      
      
      <comments>https://shaokangjiang.github.io/2023/Fighting-loneliness-using-generative-AI-with-avatar/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Simple interative Haskell game</title>
      <link>https://shaokangjiang.github.io/2023/Simple-interative-Haskell-game/</link>
      <guid>https://shaokangjiang.github.io/2023/Simple-interative-Haskell-game/</guid>
      <pubDate>Fri, 15 Dec 2023 09:39:45 GMT</pubDate>
      
      
      
      
      
      
      <comments>https://shaokangjiang.github.io/2023/Simple-interative-Haskell-game/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Usability analysis of autocomplete</title>
      <link>https://shaokangjiang.github.io/2023/Usability-analysis-of-autocomplete/</link>
      <guid>https://shaokangjiang.github.io/2023/Usability-analysis-of-autocomplete/</guid>
      <pubDate>Sat, 23 Sep 2023 08:38:49 GMT</pubDate>
      
      <description>&lt;p&gt;The original paper is under review, citation format:&lt;/p&gt;&lt;p&gt;Shaokang Jiang and Michael Coblenz. An Analysis of the Costs and Benefits of Autocomplete in IDEs. In review, ACM International Symposium on Foundations of Software Engineering (FSE 2024)&lt;/p&gt;&lt;p&gt;Key points:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Worked with Michael Coblenz on the usability analysis of autocomplete.&lt;/li&gt;&lt;li&gt;Designed and executed an experiment with 32 participants using an eye tracker to evaluate the costs and benefits of IDE-based autocomplete features to programmers who use an unfamiliar API; analyzed data using JMP; and wrote a paper for the study.&lt;/li&gt;&lt;li&gt;Found that participants who used autocomplete learned more about the API while spending less time reading the documentation; found autocomplete did not significantly reduce the number of keystrokes required to finish tasks.&lt;/li&gt;&lt;/ul&gt;</description>
      
      
      
      <content:encoded><![CDATA[<p>The original paper is under review, citation format:</p><p>Shaokang Jiang and Michael Coblenz. An Analysis of the Costs and Benefits of Autocomplete in IDEs. In review, ACM International Symposium on Foundations of Software Engineering (FSE 2024)</p><p>Key points:</p><ul><li>Worked with Michael Coblenz on the usability analysis of autocomplete.</li><li>Designed and executed an experiment with 32 participants using an eye tracker to evaluate the costs and benefits of IDE-based autocomplete features to programmers who use an unfamiliar API; analyzed data using JMP; and wrote a paper for the study.</li><li>Found that participants who used autocomplete learned more about the API while spending less time reading the documentation; found autocomplete did not significantly reduce the number of keystrokes required to finish tasks.<a id="more"></a></li><li>Acquired fundamental skills in conducting empirical research studies and learned various methods for handling and understanding the implications of eye-tracking data.</li><li>Successfully designed an experiment with well-formed hypotheses and a comprehensive knowledge test suite to accurately capture the benefits and costs of autocomplete. Additionally, designed procedures and produced scripts to analyze data from various sources, including a substantial amount of data from a consumer-level eye tracker.</li></ul><p>In more detail:</p><p>Upon starting my master‚Äôs program, I took a usability analysis of programming languages course. Realizing Python type hints could be useful in checking types, and providing more context to IDE for generating useful information, all these properties could be helpful for programmers to write better code. The reduced number of typing errors could potentially assist competitive programmers more by minimizing time spent on fixing typing errors. I investigated the impact of Python type hints feature on the performance of competitive programmers (N=5). Our findings revealed that Python type hints did not significantly enhance their task completion performance (ùëù ‚âà 0.51, ùëë ‚âà 0.81). Survey results indicated that programmers tended to dislike type hints and autocomplete suggestions, citing them as annoying.</p><p>Together with my previous teaching experiences, where I observed programmers grappling with autocomplete suggestions and observed eyes and mouse drifting during active autocomplete use, I aimed to understand the genuine benefits and costs of autocomplete. Considering that autocomplete could potentially be harmful to learning due to the ease of access to knowledge, we conducted an experiment (N=28) to measure the learning impact of autocomplete when programmers face new materials and gauge the productivity effect during its usage. The results are expected to benefit all programmers using modern IDEs, with potential applicability to the general public relying on browser autocomplete.</p><p>During the experiment, I utilized an eye tracker to detect users‚Äô gaze, aiming to understand the specific parts and autocomplete options that programmers focused on. I developed a novel monitoring platform based on VSCode, integrating eye-tracking at the source code level. Additionally, I designed a knowledge test suite to measure new knowledge acquisition after tasks and introduced a post-study survey for capturing individuals‚Äô opinions.</p><p>I found the main benefit of autocomplete speeding up information acquisition by significantly reducing the time spent reading documentation (ùëù &lt; 0.01, ùëë = 1.76). It also significantly increases the knowledge testing score (ùëù &lt; 0.01, ùëë = 1.1). An insignificant result in the total number of keystrokes across experimental conditions (ùëù ‚âà 0.65, ùëë = 0.18) helps us assert that autocomplete does not reduce typing time, thus not making programmers more productive. From designing to executing this study, I learned a lot, including ways of determining the area of interest in eye-tracking studies, methods of designing participant-friendly tasks that align with the project‚Äôs goals, quantitative analysis techniques, and methods for hypothesis testing.</p><p>I faced numerous challenges during my research project. Integrating an eye-tracker allowed me to delve deeper into the usefulness of autocomplete and the involved cognitive processes, but it also presented challenges. Given the limitations of the previous monitoring platform, including a restricted area of interest, a less popular platform, high latency, and artificial coding restrictions, I developed a new monitoring platform based on the more popular VSCode, integrating eye-tracking at the source code level. I tested various eye trackers, wrote code to evaluate fixation algorithms, and consulted with I-trace experts for optimization insights.</p><p>Experiment design posed another significant challenge, requiring the creation of a robust, controllable, and effective experiment that could reveal the benefits or drawbacks of autocomplete. After proposing various experiment versions and conducting pilot experiments, I selected a design utilizing a task suite based on common-sense knowledge and a modern API library. This design included a knowledge test suite, an eye tracker, and a post-study survey. The successful execution of the entire experiment suggests that I effectively overcame these challenges, showcasing my ability to be both persistent and resourceful in graduate school.</p>]]></content:encoded>
      
      
      <category domain="https://shaokangjiang.github.io/categories/research/">research</category>
      
      
      <category domain="https://shaokangjiang.github.io/tags/research/">research</category>
      
      
      <comments>https://shaokangjiang.github.io/2023/Usability-analysis-of-autocomplete/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>JSP java emulator</title>
      <link>https://shaokangjiang.github.io/2023/JSP-java-emulator/</link>
      <guid>https://shaokangjiang.github.io/2023/JSP-java-emulator/</guid>
      <pubDate>Fri, 23 Jun 2023 08:37:11 GMT</pubDate>
      
      
      
      
      
      
      <comments>https://shaokangjiang.github.io/2023/JSP-java-emulator/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>An economical computer</title>
      <link>https://shaokangjiang.github.io/2023/An-economical-computer/</link>
      <guid>https://shaokangjiang.github.io/2023/An-economical-computer/</guid>
      <pubDate>Thu, 23 Mar 2023 08:38:49 GMT</pubDate>
      
      <description>&lt;p&gt;Note: This is a group project for a course. I am responsible for coding the actual model and optimizing its structure to make the model run much faster (over 200 times). I am also responsible for scraping data from the official site and setting up github action to regularly update the data source. You can find the relevant repository at &lt;a href=&quot;https://github.com/ShaokangJiang/CSE-203B-crapping&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ShaokangJiang/CSE-203B-crapping (github.com)&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;Nowadays, new computer components are introduced into the retail market annually. Customers may find that the abundant component choices make it difficult to choose the optimum combination of hardware components while building a new computer. This project aims to take in the main components of a computer hardware build and provide several of the highest-performing options that can meet a consumer‚Äôs budget.&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<p>Note: This is a group project for a course. I am responsible for coding the actual model and optimizing its structure to make the model run much faster (over 200 times). I am also responsible for scraping data from the official site and setting up github action to regularly update the data source. You can find the relevant repository at <a href="https://github.com/ShaokangJiang/CSE-203B-crapping" target="_blank" rel="noopener">ShaokangJiang/CSE-203B-crapping (github.com)</a>.</p><p>Nowadays, new computer components are introduced into the retail market annually. Customers may find that the abundant component choices make it difficult to choose the optimum combination of hardware components while building a new computer. This project aims to take in the main components of a computer hardware build and provide several of the highest-performing options that can meet a consumer‚Äôs budget.<a id="more"></a></p><p>Original PDF:</p><div class="row"><embed src="CSE_203_Project.pdf" width="100%" height="550" type="application/pdf"></div><p>Extracted text:</p><h1 id="team-assignments"><a class="markdownIt-Anchor" href="#team-assignments"></a> Team Assignments</h1><h2 id="team-members"><a class="markdownIt-Anchor" href="#team-members"></a> Team members</h2><p>Maxim Edelson Shaokang Jiang Junhua Yang Jinghong Luo</p><h2 id="data-curation"><a class="markdownIt-Anchor" href="#data-curation"></a> Data Curation</h2><p>Maxim is scrapping data using python and do completeness, correctness<br>checking of all data. Shaokang was scrapping data using Node.js and<br>autoscrapping feature. Both of them are discussing on how to formulate a<br>better, more meaningful data.</p><h2 id="linear-programming-formulation-and-analysis"><a class="markdownIt-Anchor" href="#linear-programming-formulation-and-analysis"></a> Linear Programming Formulation and Analysis</h2><p>Maxim, Junhua and Jinghong are using python to formulate and analysis<br>the problem. All of us are working to test and revise the python<br>solution code and make it more feasible in running. Shaokang is using<br>GAMS to formulate and analysis the problem.</p><h2 id="paper-writing"><a class="markdownIt-Anchor" href="#paper-writing"></a> Paper Writing</h2><p>Maxim did majority of introduction, problem setup and primal<br>formulation. Shaokang did majority of intended approaches, result and<br>conclusion. Jinghong did intended contributions and contribution vs<br>previous part. All people are working on the primal, dual, KKT<br>formulation and paper reviewing, editing.</p><h1 id="introduction"><a class="markdownIt-Anchor" href="#introduction"></a> Introduction</h1><h2 id="motivation"><a class="markdownIt-Anchor" href="#motivation"></a> Motivation</h2><p>Nowadays, new computer components are introduced into the retail market<br>annually. Customers may find that the abundant component choices make it<br>difficult to choose the optimum combination of hardware components while<br>building a new computer. This project aims to take in the main<br>components of a computer hardware build and provide several of the<br>highest-performing options that can meet a consumer‚Äôs budget.</p><h2 id="previous-works"><a class="markdownIt-Anchor" href="#previous-works"></a> Previous Works</h2><p>Linear programming is a modern, powerful mathematical technique that is<br>commonly used to solve optimization problems with constraints<br>[@bradley1971transformation],[@dantzig2002linear],[@sultan2014linear].<br>In particular, there are already many research publications that focus<br>on using linear programming to solve linearly constrained optimization<br>problems. By leveraging linear programming techniques, researchers and<br>practitioners can efficiently solve complex problems with multiple<br>constraints and objectives, enabling them to make more informed<br>decisions.</p><p>One example of using linear programming is the ‚Äúdiet problem‚Äù, which<br>seeks to find the optimal combination of foods to meet nutritional<br>requirements at the lowest cost. This problem can be formulated as a<br>linear programming problem, where the objective is to minimize the total<br>cost of the food, subject to constraints on the required nutrients.<br>Authors from paper [@paper1] aim to solve the diet problem of McDonald‚Äôs<br>sets menu in the hope of finding the optimal cost while satisfying the<br>daily calories and nutritional requirements for a person.</p><h2 id="intended-contributions"><a class="markdownIt-Anchor" href="#intended-contributions"></a> Intended Contributions</h2><p>In this paper, we have explored state-of-art methods of applying linear<br>programming with constraints to help us formulate our problem and<br>analyze it using primal, dual, and KKT conditions. We came up with our<br>hardware component performance measurement formula in order to formulate<br>the optimization problem and set appropriate constraints based on<br>real-world scenarios. The novelty and main attraction of this paper is<br>applying integer programming techniques to solve computer building<br>problem, which is a relatively new and under-explored area in the<br>computer industry. We also compare the efficiency between commercial and<br>open source solvers.</p><h2 id="organization-of-the-paper"><a class="markdownIt-Anchor" href="#organization-of-the-paper"></a> Organization of the Paper</h2><p>The rest of the paper is divided into different sections illustrating<br>our work. First, we go in-depth to discuss the problem statement in<br>section 3, demonstrating the reasoning behind our objective function and<br>constraints, as well as computing the dual formulation and KKT<br>conditions of the primal problem. In section 4, we talk about the method<br>we use to build the linear programming problem. Then we present the<br>results and conclude our work in section 5.</p><h3 id="contribution-vs-previous-works"><a class="markdownIt-Anchor" href="#contribution-vs-previous-works"></a> Contribution vs Previous Works</h3><p>Even though the application of linear programming have been widely used<br>in various fields to solve complex optimization problems, its<br>application in the computer industry has yet received attentions on.<br>With this paper, we hope to make significant impact on the computer<br>community by offering this new way of identifying the computer build to<br>customers who are looking for cost-effective builds with optimal<br>performance. We think by exploring into the novel field of computer<br>building with linear programming makes us unique compared to the other<br>previous works.</p><h1 id="statement-of-the-problem"><a class="markdownIt-Anchor" href="#statement-of-the-problem"></a> Statement of the Problem</h1><h2 id="problem-setup"><a class="markdownIt-Anchor" href="#problem-setup"></a> Problem Setup</h2><p>Before formulating the primal problem, it is necessary to discuss how we<br>have arrived to the problem itself. In this paper, we utilized data from<br>the website <a href="https://www.userbenchmark.com" target="_blank" rel="noopener">UserBenchmark.com</a> by web<br>scraping down component names, benchmarks, prices, samples per<br>component, and value for GPUs, CPUs, SSDs, HDDs, and RAM (automatically<br>updating). Using the datasets we collected, we crafted g(s) (equation<br>(1)), which is used as a part of our objective function (equation (3)).<br>This objective function allows us estimate the performance of a hardware<br>based on its price, benchmark, value of the component, and number of<br>benchmark samples.</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>g</mi><mo>(</mo><mi>s</mi><mo>)</mo><mo>=</mo><mfrac><mrow><mtext><mi mathvariant="normal">b</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">n</mi><mi mathvariant="normal">c</mi><mi mathvariant="normal">h</mi><mi mathvariant="normal">m</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">k</mi><mtext>¬†</mtext><mi mathvariant="normal">*</mi><mtext>¬†</mtext><mi mathvariant="normal">v</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">l</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">e</mi><mtext>¬†</mtext><mi mathvariant="normal">*</mi><mtext>¬†</mtext><mi mathvariant="normal">s</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">m</mi><mi mathvariant="normal">p</mi><mi mathvariant="normal">l</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">s</mi></mtext></mrow><mrow><mtext><mi mathvariant="normal">p</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">c</mi><mi mathvariant="normal">e</mi></mtext></mrow></mfrac></mrow><annotation encoding="application/x-tex">g(s) = \frac{\text{benchmark * value * samples}}{\text{price}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.427em"></span><span class="strut bottom" style="height:2.30744em;vertical-align:-.8804400000000001em"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:.03588em">g</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:.6860000000000002em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="text mord textstyle cramped"><span class="mord mathrm">p</span><span class="mord mathrm">r</span><span class="mord mathrm">i</span><span class="mord mathrm">c</span><span class="mord mathrm">e</span></span></span></span></span><span style="top:-.22999999999999998em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-.677em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="text mord textstyle uncramped"><span class="mord mathrm">b</span><span class="mord mathrm">e</span><span class="mord mathrm">n</span><span class="mord mathrm">c</span><span class="mord mathrm">h</span><span class="mord mathrm">m</span><span class="mord mathrm">a</span><span class="mord mathrm">r</span><span class="mord mathrm">k</span><span class="mord mspace">¬†</span><span class="mord mathrm">*</span><span class="mord mspace">¬†</span><span class="mord mathrm" style="margin-right:.01389em">v</span><span class="mord mathrm">a</span><span class="mord mathrm">l</span><span class="mord mathrm">u</span><span class="mord mathrm">e</span><span class="mord mspace">¬†</span><span class="mord mathrm">*</span><span class="mord mspace">¬†</span><span class="mord mathrm">s</span><span class="mord mathrm">a</span><span class="mord mathrm">m</span><span class="mord mathrm">p</span><span class="mord mathrm">l</span><span class="mord mathrm">e</span><span class="mord mathrm">s</span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span></span></p><p>Formula (1) computes a ratio of performance to cost, adjusted by the<br>hardware‚Äôs overall value and the sample size used to obtain the<br>benchmark score. A higher score indicates better performance for the<br>price. It‚Äôs important to note that this formula is just one possible way<br>to measure hardware performance, and that there are many other factors<br>that may be relevant depending on the context.</p><p>Next, to define our constraints, we look back to our motivation of the<br>paper, which is to find highest-performing hardware build options that<br>can meet the budget. To do this, we need to 1) constrain the total<br>budget of all hardware combinations to be less than the fixed budget we<br>specified, and 2) limit the count of each hardware component in a<br>combination to 1 (i.e., one GPU, one CPU, etc‚Ä¶) because we are<br>looking for the optimum combination of hardware components in terms of<br>performance per cost.</p><h2 id="primal-formulation"><a class="markdownIt-Anchor" href="#primal-formulation"></a> Primal Formulation</h2><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext><mi mathvariant="normal">F</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">m</mi><mtext>¬†</mtext><mi mathvariant="normal">(</mi><mn>1</mn><mi mathvariant="normal">)</mi><mi mathvariant="normal">,</mi><mtext>¬†</mtext><mi mathvariant="normal">l</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">t</mi><mtext>¬†</mtext></mtext><mi>g</mi><mo>(</mo><mi>s</mi><mo>)</mo><mo>=</mo><mfrac><mrow><msub><mi>s</mi><mn>1</mn></msub><mo>‚àó</mo><msub><mi>s</mi><mn>2</mn></msub><mo>‚àó</mo><msub><mi>s</mi><mn>3</mn></msub></mrow><mrow><msub><mi>s</mi><mn>4</mn></msub></mrow></mfrac><mtext><mtext>¬†</mtext><mi mathvariant="normal">w</mi><mi mathvariant="normal">h</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">e</mi><mtext>¬†</mtext></mtext><mi>s</mi><mo>‚àà</mo><msup><mi>R</mi><mrow><mn>4</mn></mrow></msup></mrow><annotation encoding="application/x-tex">\text{From (1), let } g(s) = \frac{s_1*s_2*s_3}{s_4} \text{ where } s \in R^{4}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.14228em"></span><span class="strut bottom" style="height:1.97828em;vertical-align:-.8360000000000001em"></span><span class="base displaystyle textstyle uncramped"><span class="text mord displaystyle textstyle uncramped"><span class="mord mathrm">F</span><span class="mord mathrm">r</span><span class="mord mathrm">o</span><span class="mord mathrm">m</span><span class="mord mspace">¬†</span><span class="mord mathrm">(</span><span class="mord mathrm">1</span><span class="mord mathrm">)</span><span class="mord mathrm">,</span><span class="mord mspace">¬†</span><span class="mord mathrm">l</span><span class="mord mathrm">e</span><span class="mord mathrm">t</span><span class="mord mspace">¬†</span></span><span class="mord mathit" style="margin-right:.03588em">g</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:.686em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">4</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span></span></span></span><span style="top:-.22999999999999998em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-.677em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mbin">‚àó</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mbin">‚àó</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">3</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="text mord displaystyle textstyle uncramped"><span class="mord mspace">¬†</span><span class="mord mathrm" style="margin-right:.01389em">w</span><span class="mord mathrm">h</span><span class="mord mathrm">e</span><span class="mord mathrm">r</span><span class="mord mathrm">e</span><span class="mord mspace">¬†</span></span><span class="mord mathit">s</span><span class="mrel">‚àà</span><span class="mord"><span class="mord mathit" style="margin-right:.00773em">R</span><span class="vlist"><span style="top:-.413em;margin-right:.05em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">4</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span></span></span></span></span></p><p>In equation (1), <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>s</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">s_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.43056em"></span><span class="strut bottom" style="height:.58056em;vertical-align:-.15em"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span></span></span></span> is the component benchmark (with a range of<br>0-100), <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>s</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">s_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.43056em"></span><span class="strut bottom" style="height:.58056em;vertical-align:-.15em"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span></span></span></span> is the number of recorded benchmark samples min-max<br>normalized between 0-1, <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>s</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">s_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.43056em"></span><span class="strut bottom" style="height:.58056em;vertical-align:-.15em"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">3</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span></span></span></span> describes whether this component is<br>valuable from the user‚Äôs perspective (with a range of 0-100), and <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>s</mi><mn>4</mn></msub></mrow><annotation encoding="application/x-tex">s_4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.43056em"></span><span class="strut bottom" style="height:.58056em;vertical-align:-.15em"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">4</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span></span></span></span><br>is the current component price with no upper bounds.\</p><p>Let <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mo>‚àà</mo><mrow><mi mathvariant="double-struck">N</mi></mrow></mrow><annotation encoding="application/x-tex">n \in \mathbb{N}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.68889em"></span><span class="strut bottom" style="height:.72799em;vertical-align:-.0391em"></span><span class="base textstyle uncramped"><span class="mord mathit">n</span><span class="mrel">‚àà</span><span class="mord textstyle uncramped"><span class="mord mathbb">N</span></span></span></span></span> be the number of components in each category<br>(CPU, GPU, SSD, RAM)</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext><mi mathvariant="normal">m</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">x</mi><mtext>¬†</mtext></mtext><msub><mo>‚àë</mo><mrow><mi>i</mi><mo>‚àà</mo><mi>n</mi></mrow></msub><mi>g</mi><mo>(</mo><msub><mi>c</mi><mi>i</mi></msub><mo>)</mo><mo>‚àó</mo><msub><mi>x</mi><mrow><mn>1</mn><mi>i</mi></mrow></msub><mo>+</mo><msub><mo>‚àë</mo><mrow><mi>i</mi><mo>‚àà</mo><mi>n</mi></mrow></msub><mi>g</mi><mo>(</mo><msub><mi>d</mi><mi>i</mi></msub><mo>)</mo><mo>‚àó</mo><msub><mi>x</mi><mrow><mn>2</mn><mi>i</mi></mrow></msub><mo>+</mo><msub><mo>‚àë</mo><mrow><mi>i</mi><mo>‚àà</mo><mi>n</mi></mrow></msub><mi>g</mi><mo>(</mo><msub><mi>e</mi><mi>i</mi></msub><mo>)</mo><mo>‚àó</mo><msub><mi>x</mi><mrow><mn>3</mn><mi>i</mi></mrow></msub><mo>+</mo><msub><mo>‚àë</mo><mrow><mi>i</mi><mo>‚àà</mo><mi>n</mi></mrow></msub><mi>g</mi><mo>(</mo><msub><mi>f</mi><mi>i</mi></msub><mo>)</mo><mo>‚àó</mo><msub><mi>x</mi><mrow><mn>4</mn><mi>i</mi></mrow></msub></mrow><annotation encoding="application/x-tex">\text{max } \sum_{i\in n}g(c_i)*x_{1i} + \sum_{i\in n}g(d_i)*x_{2i} + \sum_{i\in n}g(e_i)*x_{3i} + \sum_{i\in n}g(f_i)*x_{4i}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.050005em"></span><span class="strut bottom" style="height:2.3550440000000004em;vertical-align:-1.305039em"></span><span class="base displaystyle textstyle uncramped"><span class="text mord displaystyle textstyle uncramped"><span class="mord mathrm">m</span><span class="mord mathrm">a</span><span class="mord mathrm">x</span><span class="mord mspace">¬†</span></span><span class="mop op-limits"><span class="vlist"><span style="top:1.177669em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">‚àà</span><span class="mord mathit">n</span></span></span></span><span style="top:-.000005000000000032756em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span><span class="op-symbol large-op mop">‚àë</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mord mathit" style="margin-right:.03588em">g</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">c</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mclose">)</span><span class="mbin">‚àó</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">1</span><span class="mord mathit">i</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mbin">+</span><span class="mop op-limits"><span class="vlist"><span style="top:1.177669em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">‚àà</span><span class="mord mathit">n</span></span></span></span><span style="top:-.000005000000000032756em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span><span class="op-symbol large-op mop">‚àë</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mord mathit" style="margin-right:.03588em">g</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">d</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mclose">)</span><span class="mbin">‚àó</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">2</span><span class="mord mathit">i</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mbin">+</span><span class="mop op-limits"><span class="vlist"><span style="top:1.177669em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">‚àà</span><span class="mord mathit">n</span></span></span></span><span style="top:-.000005000000000032756em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span><span class="op-symbol large-op mop">‚àë</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mord mathit" style="margin-right:.03588em">g</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">e</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mclose">)</span><span class="mbin">‚àó</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">3</span><span class="mord mathit">i</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mbin">+</span><span class="mop op-limits"><span class="vlist"><span style="top:1.177669em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">‚àà</span><span class="mord mathit">n</span></span></span></span><span style="top:-.000005000000000032756em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span><span class="op-symbol large-op mop">‚àë</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mord mathit" style="margin-right:.03588em">g</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:.10764em">f</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.10764em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mclose">)</span><span class="mbin">‚àó</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">4</span><span class="mord mathit">i</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span></span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>c</mi><mo separator="true">,</mo><mi>d</mi><mo separator="true">,</mo><mi>e</mi><mo separator="true">,</mo><mi>f</mi><mo>‚àà</mo><msup><mrow><mi mathvariant="double-struck">S</mi></mrow><mrow><mi>n</mi><mtext><mi mathvariant="normal">x</mi></mtext><mn>4</mn></mrow></msup></mrow><annotation encoding="application/x-tex">c, d, e, f \in \mathbb{S}^{n\text{x}4}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.8141079999999999em"></span><span class="strut bottom" style="height:1.008548em;vertical-align:-.19444em"></span><span class="base textstyle uncramped"><span class="mord mathit">c</span><span class="mpunct">,</span><span class="mord mathit">d</span><span class="mpunct">,</span><span class="mord mathit">e</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:.10764em">f</span><span class="mrel">‚àà</span><span><span class="mord textstyle uncramped"><span class="mord mathbb">S</span></span><span class="vlist"><span style="top:-.363em;margin-right:.05em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span><span class="text mord scriptstyle uncramped"><span class="mord mathrm">x</span></span><span class="mord mathrm">4</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span></span></span></span><br><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>3</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>4</mn></msub><mo>‚àà</mo><mo>{</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><msup><mo>}</mo><mrow><mi>n</mi></mrow></msup></mrow><annotation encoding="application/x-tex">x_1, x_2, x_3, x_4 \in \{0,1\}^{n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.75em"></span><span class="strut bottom" style="height:1em;vertical-align:-.25em"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">3</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">4</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mrel">‚àà</span><span class="mopen">{</span><span class="mord mathrm">0</span><span class="mpunct">,</span><span class="mord mathrm">1</span><span class="mclose"><span class="mclose">}</span><span class="vlist"><span style="top:-.363em;margin-right:.05em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span></span></span></span></p><p>subject to</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mo>‚àë</mo><mrow><mi>i</mi><mo>‚àà</mo><mi>n</mi></mrow></msub><mo>(</mo><msub><mi>c</mi><mrow><mi>i</mi><mo separator="true">,</mo><mn>4</mn></mrow></msub><mo>‚àó</mo><msub><mi>x</mi><mrow><mn>1</mn><mi>i</mi></mrow></msub><mo>)</mo><mo>+</mo><msub><mo>‚àë</mo><mrow><mi>i</mi><mo>‚àà</mo><mi>n</mi></mrow></msub><mo>(</mo><msub><mi>d</mi><mrow><mi>i</mi><mo separator="true">,</mo><mn>4</mn></mrow></msub><mo>‚àó</mo><msub><mi>x</mi><mrow><mn>2</mn><mi>i</mi></mrow></msub><mo>)</mo><mo>+</mo><msub><mo>‚àë</mo><mrow><mi>i</mi><mo>‚àà</mo><mi>n</mi></mrow></msub><mo>(</mo><msub><mi>e</mi><mrow><mi>i</mi><mo separator="true">,</mo><mn>4</mn></mrow></msub><mo>‚àó</mo><msub><mi>x</mi><mrow><mn>3</mn><mi>i</mi></mrow></msub><mo>)</mo><mo>+</mo><msub><mo>‚àë</mo><mrow><mi>i</mi><mo>‚àà</mo><mi>n</mi></mrow></msub><mo>(</mo><msub><mi>f</mi><mrow><mi>i</mi><mo separator="true">,</mo><mn>4</mn></mrow></msub><mo>‚àó</mo><msub><mi>x</mi><mrow><mn>4</mn><mi>i</mi></mrow></msub><mo>)</mo><mo>‚â§</mo><mi>b</mi><mtext><mi mathvariant="normal">,</mi><mtext>¬†</mtext><mi mathvariant="normal">w</mi><mi mathvariant="normal">h</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">e</mi><mtext>¬†</mtext></mtext><mi>b</mi><mo>‚àà</mo><msub><mi>R</mi><mrow><mo>+</mo><mo>+</mo></mrow></msub><mtext><mtext>¬†</mtext><mi mathvariant="normal">i</mi><mi mathvariant="normal">s</mi><mtext>¬†</mtext><mi mathvariant="normal">t</mi><mi mathvariant="normal">h</mi><mi mathvariant="normal">e</mi><mtext>¬†</mtext><mi mathvariant="normal">b</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">d</mi><mi mathvariant="normal">g</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">t</mi></mtext></mrow><annotation encoding="application/x-tex">\sum_{i\in n}(c_{i,4}*x_{1i}) + \sum_{i\in n}(d_{i,4}*x_{2i}) + \sum_{i\in n}(e_{i,4}*x_{3i}) + \sum_{i\in n}(f_{i,4}*x_{4i}) \leq b \text{, where } b \in R_{++} \text{ is the budget}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.050005em"></span><span class="strut bottom" style="height:2.3550440000000004em;vertical-align:-1.305039em"></span><span class="base displaystyle textstyle uncramped"><span class="mop op-limits"><span class="vlist"><span style="top:1.177669em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">‚àà</span><span class="mord mathit">n</span></span></span></span><span style="top:-.000005000000000032756em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span><span class="op-symbol large-op mop">‚àë</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">c</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathrm">4</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mbin">‚àó</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">1</span><span class="mord mathit">i</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mclose">)</span><span class="mbin">+</span><span class="mop op-limits"><span class="vlist"><span style="top:1.177669em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">‚àà</span><span class="mord mathit">n</span></span></span></span><span style="top:-.000005000000000032756em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span><span class="op-symbol large-op mop">‚àë</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">d</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathrm">4</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mbin">‚àó</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">2</span><span class="mord mathit">i</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mclose">)</span><span class="mbin">+</span><span class="mop op-limits"><span class="vlist"><span style="top:1.177669em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">‚àà</span><span class="mord mathit">n</span></span></span></span><span style="top:-.000005000000000032756em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span><span class="op-symbol large-op mop">‚àë</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">e</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathrm">4</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mbin">‚àó</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">3</span><span class="mord mathit">i</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mclose">)</span><span class="mbin">+</span><span class="mop op-limits"><span class="vlist"><span style="top:1.177669em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">‚àà</span><span class="mord mathit">n</span></span></span></span><span style="top:-.000005000000000032756em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span><span class="op-symbol large-op mop">‚àë</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:.10764em">f</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.10764em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathrm">4</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mbin">‚àó</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">4</span><span class="mord mathit">i</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mclose">)</span><span class="mrel">‚â§</span><span class="mord mathit">b</span><span class="text mord displaystyle textstyle uncramped"><span class="mord mathrm">,</span><span class="mord mspace">¬†</span><span class="mord mathrm" style="margin-right:.01389em">w</span><span class="mord mathrm">h</span><span class="mord mathrm">e</span><span class="mord mathrm">r</span><span class="mord mathrm">e</span><span class="mord mspace">¬†</span></span><span class="mord mathit">b</span><span class="mrel">‚àà</span><span class="mord"><span class="mord mathit" style="margin-right:.00773em">R</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.00773em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord">+</span><span class="mbin">+</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="text mord displaystyle textstyle uncramped"><span class="mord mspace">¬†</span><span class="mord mathrm">i</span><span class="mord mathrm">s</span><span class="mord mspace">¬†</span><span class="mord mathrm">t</span><span class="mord mathrm">h</span><span class="mord mathrm">e</span><span class="mord mspace">¬†</span><span class="mord mathrm">b</span><span class="mord mathrm">u</span><span class="mord mathrm">d</span><span class="mord mathrm" style="margin-right:.01389em">g</span><span class="mord mathrm">e</span><span class="mord mathrm">t</span></span></span></span></span></span></p>\textbf{1}^Tx_1=1 \text{, } \textbf{1}^Tx_2=1 \text{, } \textbf{1}^Tx_3=1 \text{, } \textbf{1}^Tx_4=1<h2 id="dual-formulations"><a class="markdownIt-Anchor" href="#dual-formulations"></a> Dual Formulations</h2><p>The Lagrangian function is $$\begin{split}<br>\mathcal{L}(x_1,x_2,x_3,x_4,\lambda,v_1,v_2,v_3,v_4)&amp;=<br>\sum_{i\in n}g(c_i)*x_{1i} + \sum_{i\in n}g(d_i)*x_{2i} + \sum_{i\in n}g(e_i)*x_{3i} + \sum_{i\in n}g(f_i)*x_{4i} \<br>&amp;+ \lambda (\sum_{i\in n}(c_{i,4}*x_{1i}) + \sum_{i\in n}(d_{i,4}*x_{2i}) + \sum_{i\in n}(e_{i,4}*x_{3i}) + \sum_{i\in n}(f_{i,4}*x_{4i}) - b) \<br>&amp;+ v_1(\textbf{1}^T x_{1} -1) + v_2(\textbf{1}^T x_{2} -1) + v_3( \textbf{1}^T x_{3} -1) + v_4(\textbf{1}^T x_{4} -1), \text{ where } \lambda \geq 0<br>\end{split}$$</p><p>To compute<br><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>max</mi><mrow><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>3</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>4</mn></msub></mrow></msub><mrow><mi mathvariant="script">L</mi></mrow><mo>(</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>3</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>4</mn></msub><mo separator="true">,</mo><mi>Œª</mi><mo separator="true">,</mo><msub><mi>v</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>v</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>v</mi><mn>3</mn></msub><mo separator="true">,</mo><msub><mi>v</mi><mn>4</mn></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">\max_{x_1,x_2,x_3,x_4} \mathcal{L}(x_1,x_2,x_3,x_4,\lambda,v_1,v_2,v_3,v_4)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.75em"></span><span class="strut bottom" style="height:1.036108em;vertical-align:-.286108em"></span><span class="base textstyle uncramped"><span class="mop"><span class="mop">max</span><span class="vlist"><span style="top:.15em;margin-right:.05em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:.15em;margin-right:.07142857142857144em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:.15em;margin-right:.07142857142857144em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:.15em;margin-right:.07142857142857144em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathrm">3</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:.15em;margin-right:.07142857142857144em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathrm">4</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mord textstyle uncramped"><span class="mord mathcal">L</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">3</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">4</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mpunct">,</span><span class="mord mathit">Œª</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:.03588em">v</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.03588em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:.03588em">v</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.03588em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:.03588em">v</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.03588em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">3</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:.03588em">v</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.03588em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">4</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mclose">)</span></span></span></span>,<br>let us take $$\begin{pmatrix}<br>\frac{\partial\mathcal{L}}{\partial x_1} \\<br>\frac{\partial\mathcal{L}}{\partial x_2} \\<br>\frac{\partial\mathcal{L}}{\partial x_3} \\<br>\frac{\partial\mathcal{L}}{\partial x_4}<br>\end{pmatrix} =<br>\begin{pmatrix}<br>0 \\ 0 \\ 0 \\ 0<br>\end{pmatrix} \implies<br>\begin{cases}<br>\sum_{i\in n}g(c_i) + \lambda \sum_{i\in n}c_{i,4} + v_{1}\textbf{1}^T = 0\\<br>\sum_{i\in n}g(d_i) + \lambda \sum_{i\in n}d_{i,4} + v_{2}\textbf{1}^T = 0\\<br>\sum_{i\in n}g(e_i) + \lambda \sum_{i\in n}e_{i,4} + v_{3}\textbf{1}^T = 0\\<br>\sum_{i\in n}g(f_i) + \lambda \sum_{i\in n}f_{i,4} + v_{4}\textbf{1}^T = 0<br>\end{cases}$$<br>When <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Œª</mi></mrow><annotation encoding="application/x-tex">\lambda</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.69444em"></span><span class="strut bottom" style="height:.69444em;vertical-align:0"></span><span class="base textstyle uncramped"><span class="mord mathit">Œª</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>v</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>v</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>v</mi><mn>3</mn></msub><mo separator="true">,</mo><msub><mi>v</mi><mn>4</mn></msub></mrow><annotation encoding="application/x-tex">v_1,v_2,v_3,v_4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.43056em"></span><span class="strut bottom" style="height:.625em;vertical-align:-.19444em"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:.03588em">v</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.03588em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:.03588em">v</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.03588em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:.03588em">v</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.03588em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">3</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:.03588em">v</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.03588em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">4</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span></span></span></span> satisfy these four equations, we<br>get\</p>\begin{split} \text{max}_{x_1,x_2,x_3,x_4} \mathcal{L}(x_1,x_2,x_3,x_4,\lambda,v_1,v_2,v_3,v_4) = &\text{ }(\sum_{i\in n}g(c_i) + \lambda \sum_{i\in n}c_{i,4} + v_{1}\textbf{1}^T)x_1 + (\sum_{i\in n}g(d_i) + \lambda \sum_{i\in n}d_{i,4} + v_{2}\textbf{1}^T)x_2\\ & +(\sum_{i\in n}g(e_i) + \lambda \sum_{i\in n}e_{i,4} + v_{3}\textbf{1}^T)x_3 +(\sum_{i\in n}g(f_i) + \lambda \sum_{i\in n}f_{i,4} + v_{4}\textbf{1}^T)x_4\\ & -\lambda b - v_1 - v_2 - v_3 - v_4\\ & = 0x_1 + 0x_2 + 0x_3 + 0x_4 -\lambda b - v_1 - v_2 - v_3 - v_4\\ & = -\lambda b - v_1 - v_2 - v_3 - v_4 \end{split}<p>The Dual function is $$\begin{aligned}<br>\text{min } -\lambda b - v_1 - v_2 - v_3 - v_4\<br>\text{subject to }<br>\begin{pmatrix}<br>\sum_{i\in n}g(c_i) + \lambda \sum_{i\in n}c_{i,4} + v_{1}\textbf{1}^T = 0\<br>\sum_{i\in n}g(d_i) + \lambda \sum_{i\in n}d_{i,4} + v_{2}\textbf{1}^T = 0\<br>\sum_{i\in n}g(e_i) + \lambda \sum_{i\in n}e_{i,4} + v_{3}\textbf{1}^T = 0\<br>\sum_{i\in n}g(f_i) + \lambda \sum_{i\in n}f_{i,4} + v_{4}\textbf{1}^T = 0\<br>\lambda \geq 0<br>\end{pmatrix}<br>\end{aligned}<br>\text{ where } c, d, e, f \in \mathbb{S}^{n\text{x}4}$$</p><h2 id="kkt-conditions"><a class="markdownIt-Anchor" href="#kkt-conditions"></a> KKT Conditions</h2><h3 id="primal-constraints"><a class="markdownIt-Anchor" href="#primal-constraints"></a> Primal Constraints</h3><p>\textbf{1}^Tx_1 - 1=0<br>\textbf{1}^Tx_2 - 1=0<br>\textbf{1}^Tx_3 - 1=0<br>\textbf{1}^Tx_4 - 1=0<br><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mo>‚àë</mo><mrow><mi>i</mi><mo>‚àà</mo><mi>n</mi></mrow></msub><mo>(</mo><msub><mi>c</mi><mrow><mi>i</mi><mo separator="true">,</mo><mn>4</mn></mrow></msub><mo>‚àó</mo><msub><mi>x</mi><mrow><mn>1</mn><mi>i</mi></mrow></msub><mo>)</mo><mo>+</mo><msub><mo>‚àë</mo><mrow><mi>i</mi><mo>‚àà</mo><mi>n</mi></mrow></msub><mo>(</mo><msub><mi>d</mi><mrow><mi>i</mi><mo separator="true">,</mo><mn>4</mn></mrow></msub><mo>‚àó</mo><msub><mi>x</mi><mrow><mn>2</mn><mi>i</mi></mrow></msub><mo>)</mo><mo>+</mo><msub><mo>‚àë</mo><mrow><mi>i</mi><mo>‚àà</mo><mi>n</mi></mrow></msub><mo>(</mo><msub><mi>e</mi><mrow><mi>i</mi><mo separator="true">,</mo><mn>4</mn></mrow></msub><mo>‚àó</mo><msub><mi>x</mi><mrow><mn>3</mn><mi>i</mi></mrow></msub><mo>)</mo><mo>+</mo><msub><mo>‚àë</mo><mrow><mi>i</mi><mo>‚àà</mo><mi>n</mi></mrow></msub><mo>(</mo><msub><mi>f</mi><mrow><mi>i</mi><mo separator="true">,</mo><mn>4</mn></mrow></msub><mo>‚àó</mo><msub><mi>x</mi><mrow><mn>4</mn><mi>i</mi></mrow></msub><mo>)</mo><mo>‚àí</mo><mi>b</mi><mo>‚â§</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\sum_{i\in n}(c_{i,4}*x_{1i}) + \sum_{i\in n}(d_{i,4}*x_{2i}) + \sum_{i\in n}(e_{i,4}*x_{3i}) + \sum_{i\in n}(f_{i,4}*x_{4i}) - b\leq 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.75em"></span><span class="strut bottom" style="height:1.07738em;vertical-align:-.32738em"></span><span class="base textstyle uncramped"><span class="mop"><span class="op-symbol small-op mop" style="top:-.0000050000000000050004em">‚àë</span><span class="vlist"><span style="top:.30001em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">‚àà</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">c</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathrm">4</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mbin">‚àó</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">1</span><span class="mord mathit">i</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mclose">)</span><span class="mbin">+</span><span class="mop"><span class="op-symbol small-op mop" style="top:-.0000050000000000050004em">‚àë</span><span class="vlist"><span style="top:.30001em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">‚àà</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">d</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathrm">4</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mbin">‚àó</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">2</span><span class="mord mathit">i</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mclose">)</span><span class="mbin">+</span><span class="mop"><span class="op-symbol small-op mop" style="top:-.0000050000000000050004em">‚àë</span><span class="vlist"><span style="top:.30001em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">‚àà</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">e</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathrm">4</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mbin">‚àó</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">3</span><span class="mord mathit">i</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mclose">)</span><span class="mbin">+</span><span class="mop"><span class="op-symbol small-op mop" style="top:-.0000050000000000050004em">‚àë</span><span class="vlist"><span style="top:.30001em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">‚àà</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:.10764em">f</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.10764em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathrm">4</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mbin">‚àó</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">4</span><span class="mord mathit">i</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mclose">)</span><span class="mbin">‚àí</span><span class="mord mathit">b</span><span class="mrel">‚â§</span><span class="mord mathrm">0</span></span></span></span></p><h3 id="dual-constraints"><a class="markdownIt-Anchor" href="#dual-constraints"></a> Dual Constraints</h3><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Œª</mi><mo>‚â•</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\lambda \geq 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.69444em"></span><span class="strut bottom" style="height:.83041em;vertical-align:-.13597em"></span><span class="base textstyle uncramped"><span class="mord mathit">Œª</span><span class="mrel">‚â•</span><span class="mord mathrm">0</span></span></span></span></p><h3 id="complementary-slackness"><a class="markdownIt-Anchor" href="#complementary-slackness"></a> Complementary Slackness</h3><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Œª</mi><mo>[</mo><msub><mo>‚àë</mo><mrow><mi>i</mi><mo>‚àà</mo><mi>n</mi></mrow></msub><mo>(</mo><msub><mi>c</mi><mrow><mi>i</mi><mo separator="true">,</mo><mn>4</mn></mrow></msub><mo>‚àó</mo><msub><mi>x</mi><mrow><mn>1</mn><mi>i</mi></mrow></msub><mo>)</mo><mo>+</mo><msub><mo>‚àë</mo><mrow><mi>i</mi><mo>‚àà</mo><mi>n</mi></mrow></msub><mo>(</mo><msub><mi>d</mi><mrow><mi>i</mi><mo separator="true">,</mo><mn>4</mn></mrow></msub><mo>‚àó</mo><msub><mi>x</mi><mrow><mn>2</mn><mi>i</mi></mrow></msub><mo>)</mo><mo>+</mo><msub><mo>‚àë</mo><mrow><mi>i</mi><mo>‚àà</mo><mi>n</mi></mrow></msub><mo>(</mo><msub><mi>e</mi><mrow><mi>i</mi><mo separator="true">,</mo><mn>4</mn></mrow></msub><mo>‚àó</mo><msub><mi>x</mi><mrow><mn>3</mn><mi>i</mi></mrow></msub><mo>)</mo><mo>+</mo><msub><mo>‚àë</mo><mrow><mi>i</mi><mo>‚àà</mo><mi>n</mi></mrow></msub><mo>(</mo><msub><mi>f</mi><mrow><mi>i</mi><mo separator="true">,</mo><mn>4</mn></mrow></msub><mo>‚àó</mo><msub><mi>x</mi><mrow><mn>4</mn><mi>i</mi></mrow></msub><mo>)</mo><mo>‚àí</mo><mi>b</mi><mo>]</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\lambda[\sum_{i\in n}(c_{i,4}*x_{1i}) + \sum_{i\in n}(d_{i,4}*x_{2i}) + \sum_{i\in n}(e_{i,4}*x_{3i}) + \sum_{i\in n}(f_{i,4}*x_{4i}) - b]=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.75em"></span><span class="strut bottom" style="height:1.07738em;vertical-align:-.32738em"></span><span class="base textstyle uncramped"><span class="mord mathit">Œª</span><span class="mopen">[</span><span class="mop"><span class="op-symbol small-op mop" style="top:-.0000050000000000050004em">‚àë</span><span class="vlist"><span style="top:.30001em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">‚àà</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">c</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathrm">4</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mbin">‚àó</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">1</span><span class="mord mathit">i</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mclose">)</span><span class="mbin">+</span><span class="mop"><span class="op-symbol small-op mop" style="top:-.0000050000000000050004em">‚àë</span><span class="vlist"><span style="top:.30001em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">‚àà</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">d</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathrm">4</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mbin">‚àó</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">2</span><span class="mord mathit">i</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mclose">)</span><span class="mbin">+</span><span class="mop"><span class="op-symbol small-op mop" style="top:-.0000050000000000050004em">‚àë</span><span class="vlist"><span style="top:.30001em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">‚àà</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">e</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathrm">4</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mbin">‚àó</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">3</span><span class="mord mathit">i</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mclose">)</span><span class="mbin">+</span><span class="mop"><span class="op-symbol small-op mop" style="top:-.0000050000000000050004em">‚àë</span><span class="vlist"><span style="top:.30001em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">‚àà</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:.10764em">f</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.10764em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathrm">4</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mbin">‚àó</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">4</span><span class="mord mathit">i</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mclose">)</span><span class="mbin">‚àí</span><span class="mord mathit">b</span><span class="mclose">]</span><span class="mrel">=</span><span class="mord mathrm">0</span></span></span></span></p><h3 id="gradient-of-lagrangian-with-respect-to-x-variables"><a class="markdownIt-Anchor" href="#gradient-of-lagrangian-with-respect-to-x-variables"></a> Gradient of Lagrangian With Respect to x Variables</h3><p>\nabla_{x_1} = \sum_{i\in n}g(c_i)+\lambda\sum_{i\in n}c_{i,4}+v_1\textbf{1}^T=0<br>\nabla_{x_2} = \sum_{i\in n}g(d_i)+\lambda\sum_{i\in n}d_{i,4}+v_2\textbf{1}^T=0<br>\nabla_{x_3} = \sum_{i\in n}g(e_i)+\lambda\sum_{i\in n}e_{i,4}+v_3\textbf{1}^T=0<br>\nabla_{x_4} = \sum_{i\in n}g(f_i)+\lambda\sum_{i\in n}f_{i,4}+v_4\textbf{1}^T=0</p><h1 id="intended-approaches"><a class="markdownIt-Anchor" href="#intended-approaches"></a> Intended Approaches</h1><p>In the real world case, a user should be able to select the limitation B<br>value. In our run, we simply set the limitation of B as 2000. And<br>initially, we set all variables to be binary since one computer can only<br>have one components in each machine.</p><h2 id="quality-of-choice"><a class="markdownIt-Anchor" href="#quality-of-choice"></a> Quality of choice</h2><h4 id="why-you-make-choice"><a class="markdownIt-Anchor" href="#why-you-make-choice"></a> Why you make choice</h4><p>There are no previous academic works discussing how to optimally select<br>a computer component combination using linear programming algorithms. As<br>such, we selected to use the benchmark score, sample number, value<br>score, and price to craft what we felt was a reasonable objective<br>function. Our function could reflect the user‚Äôs perspective in taking<br>multiple pieces of data about a hardware component into account when<br>making a selection.</p><h4 id="why-this-is-good"><a class="markdownIt-Anchor" href="#why-this-is-good"></a> Why this is good</h4><p>Under normal conditions, we ran the linear programming models under<br>strict constraints, equation (4), of equal to 1 and binary variables. To<br>prove the tightness of relaxation of our solution, we relaxed these<br>constraints to <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>‚â§</mo></mrow><annotation encoding="application/x-tex">\leq</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.63597em"></span><span class="strut bottom" style="height:.7719400000000001em;vertical-align:-.13597em"></span><span class="base textstyle uncramped"><span class="mrel">‚â§</span></span></span></span> to 1 and nonnegative variables. After rerunning<br>our experiment with these relaxed constraints and receiving the same<br>solution distribution (all solution vectors contained only zeros and<br>ones, i.e., are binary vectors), we can confidently declare that our<br>model solution is tight enough in our context.</p><p>Since our problem was a linear programming problem, there would always<br>exist an optimal solution as long as the feasible region exists. Because<br>we are always trying to maximum the objective function, which guarantee<br>us to find a valid solution under the given limitation B. We also tested<br>the optimality based on the KKT conditions described in the previous<br>section. We also tried several different B setup, we are able to find a<br>proven optimal solution in all cases. Which proves the optimality of our<br>model.</p><h2 id="novelty"><a class="markdownIt-Anchor" href="#novelty"></a> Novelty</h2><h4 id="difference-from-previous-work"><a class="markdownIt-Anchor" href="#difference-from-previous-work"></a> Difference from previous work</h4><p>There is no work in the previous discussing how to select a computer<br>using linear programming.</p><p>Consumers in the market have to use some search engine and compare each<br>product with days of work previously[@james2006buying]. Right now, we<br>introduced a new way of thinking what to purchase and how to organize<br>the computer in a more efficient way. User could simply run our script<br>with the latest data to get the recommendation with seconds of work. In<br>addition to a traditional scrapping using static web fetching, we also<br>introduced a way to automatically scrapping data from website by using<br>github action. The script is set to run once per three days. And a<br>contemporary way to scrapping website by simulating user behavior to<br>prevent blocking of IP address by using puppeteer. In this way, user is<br>always able to use the latest data to get the optimization result. See<br><a href="https://github.com/ShaokangJiang/CSE-203B-crapping" target="_blank" rel="noopener">here</a> for the auto<br>scrapping repository.</p><p>Our setup of combining the binary vector with the associate price also<br>improves computational time a lot comparing to some intuitive setup of<br>using each components price * each choice vector as the function when<br>calculating the limitation. This reduces the equations required to<br>handle from (Dimension of cpu * Dimension of gpu * Dimension of hdd *<br>Dimension of mem) to only one equation. In the actual experiment, this<br>could reduce computation time from many minutes to 0.016 seconds.</p><h2 id="computational-complexity"><a class="markdownIt-Anchor" href="#computational-complexity"></a> Computational complexity</h2><p>Since our problem was a linear programming problem, previous<br>studies[@karmarkar1984new] have shown that any linear programming is<br>able to run in polynomial-time, so our model should be able to run under<br>polynomial-time. But, since our model only have one dimension in each<br>equation, the actual runtime should be close to O(n). Nevertheless, it<br>is hard to scale the overhead if we have to use mixed integer solver to<br>solve the problem. Fortunately, our model is always able to be converted<br>to a problem using linear programming solver[@raidl2008combining], which<br>guarantees our model to run under O(n). However, it is hard and not<br>necessary to measure a runtime like this. In the real world usage case,<br>running a model like this would spent far more time on context switch<br>and read data from memory instead of doing the actual computation. This<br>could also provide a possible reason that our real tests always show a<br>runtime of 0.016 seconds even with more data and more dimensions.</p><p>The memory space complexity is also O(n) where n is calculated by sum of<br>Dimension of cpu and Dimension of gpu and Dimension of hdd and Dimension<br>of memory.</p><h1 id="conjectured-results-conclusion-and-future-works"><a class="markdownIt-Anchor" href="#conjectured-results-conclusion-and-future-works"></a> Conjectured Results, Conclusion, and Future Works</h1><h2 id="results"><a class="markdownIt-Anchor" href="#results"></a> Results</h2><p>All models are running on an old laptop, which has 2.5 GHz CPU and 8 GB<br>memory. In our setup of limitation as 2000, with the dataset from<br>auto-scrapping result from<br><a href="https://github.com/ShaokangJiang/CSE-203B-crapping" target="_blank" rel="noopener">here</a>. We could<br>reach the following result:</p><p>‚Äã CPU GPU</p><hr><pre><code>          Intel Core i7-6700K                       Nvidia GTX 1060-3GB                                                            SSD                                       RAM</code></pre><p>Corsair Vengeance LPX DDR4 3000 C15 2x8GB Samsung 970 Evo Plus NVMe PCIe M.2 1TB</p><p>The time complexity of using mip solver in GAMS is 0.016 seconds. Time<br>complexity of using lp solvers on GAMS could reach the same result with<br>time complexity of 0.01 seconds. For python setup, the average time<br>consumed for 10 runs is 0.065 seconds.<br>In a run with a more meaningful result with limitation as 400, we could<br>reach the following result:</p><p>‚Äã CPU GPU</p><hr><pre><code>         Intel Core i5-10600K                       Nvidia GTX 1060-3GB                                                            SSD                                       RAM</code></pre><p>Corsair Vengeance LPX DDR4 3000 C15 2x8GB Samsung 970 Evo Plus NVMe PCIe M.2 1TB</p><p>Time complexity stays the same as previous for GAMS. For python setup,<br>the average time consumed for 10 runs is 0.05 seconds.</p><p>By using our way, user is able to get the recommendation result in a<br>fraction of a second instead of manually comparing between various<br>components. We also observed the commercial solvers generally have a<br>better performance than open source solvers on python.</p><h2 id="conclusion"><a class="markdownIt-Anchor" href="#conclusion"></a> Conclusion</h2><p>In this work, we developed a novel and efficient way in finding the best<br>possible computer components pairs for a user to select under a certain<br>budget. By introducing the benchmark, popularity, valuable and price, we<br>formulate the problem as a convex optimization problem which maximizes a<br>customized objective function with the consideration of all four<br>factors. Through experiments under different settings, we show that the<br>proposed convex optimization algorithm could run fast and efficiently<br>generate a good result. Comparing to the previous situation where user<br>have to spent tons of hours in selecting and comparing components when<br>composing a new computer, our way is much more efficient and our model<br>is suitable to run on any computer.</p><h2 id="future-works"><a class="markdownIt-Anchor" href="#future-works"></a> Future Works</h2><p>Based on our current solution, possible future works may search for more<br>meaningful objective functions. This would require additional real world<br>analysis and people have to conduct some user studies to learn which<br>factors among price, benchmark, popularity, and value are most<br>important.</p><p>As part of improving this work, we would like to add more features for<br>improving user interaction experience. Considering the size of this<br>problem, another possible route is to build a static website by using<br>jsLPSolver and host it on GitHub. This would be a low cost way to make<br>general public get access to our study result and benefit a wider<br>audience.</p><p>As our current system automatically updates the data every three days,<br>we utilize the most up-to-date data when searching for the optimal<br>combination. That being said, using a more meaningful combination of<br>data from all up-to-date data may be in the user‚Äôs best interest as it<br>potentially allows for better and more meaningful combination results.</p><h1 id="references"><a class="markdownIt-Anchor" href="#references"></a> References</h1><p>[1] Gordon H Bradley. ‚ÄúTransformation of integer programs to knapsack problems‚Äù. In: Discrete mathematics 1.1 (1971), pp. 29‚Äì45.<br>[2] George B Dantzig. ‚ÄúLinear programming‚Äù. In: Operations research 50.1 (2002), pp. 42‚Äì47.<br>[3] Richard James. ‚ÄúBuying a computer?‚Äù In: ITNOW 48.3 (2006), pp. 24‚Äì24.<br>[4] Narendra Karmarkar. ‚ÄúA new polynomial-time algorithm for linear programming‚Äù. In: Proceedings of the sixteenth annual ACM symposium on Theory of computing. 1984, pp. 302‚Äì311.<br>[5] Nurul Farihan Mohamed et al. ‚ÄúAn Integer Linear Programming Model For A Diet Problem Of Medonald‚Äôs Sets Menu In Malaysia‚Äù. In: 2021.<br>[6] G√ºnther R Raidl and Jakob Puchinger. ‚ÄúCombining (integer) linear programming techniques and metaheuristics for combinatorial optimization‚Äù. In: Hybrid metaheuristics: An emerging approach to optimization (2008), pp. 31‚Äì62.<br>[7] Alan Sultan. Linear programming: An introduction with applications. Elsevier, 2014.</p>]]></content:encoded>
      
      
      <category domain="https://shaokangjiang.github.io/categories/optimization/">optimization</category>
      
      
      <category domain="https://shaokangjiang.github.io/tags/GAMS/">GAMS</category>
      
      <category domain="https://shaokangjiang.github.io/tags/LP/">LP</category>
      
      
      <comments>https://shaokangjiang.github.io/2023/An-economical-computer/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Python type hint in Competitive Programming</title>
      <link>https://shaokangjiang.github.io/2022/Whether-Python-Type-Hints-are-helpful-for-competitive-programmers-CP/</link>
      <guid>https://shaokangjiang.github.io/2022/Whether-Python-Type-Hints-are-helpful-for-competitive-programmers-CP/</guid>
      <pubDate>Fri, 23 Dec 2022 09:38:49 GMT</pubDate>
      
      <description>&lt;p&gt;&lt;em&gt;Are Python Type Hints helpful in competitive programming?&lt;/em&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Abstract&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;Type hinting, which is a way to statically indicate the type of a value in the code, was introduced in Python 3.5. Before Python 3.5, python was a dynamic language in which variable type can only be inferred during runtime. Competitive programmers(CP) are a neglected group of people who need to solve algorithm challenges as fast as possible. In this project, we are trying to assess if using Type Hints is helpful for competitive programmers. We conducted a pilot study with 5 programmers from different backgrounds, 1 of them only provided interview data. We found that type hints may not be useful for CP in Python, and autocomplete suggestions are often not good enough to be accepted. The survey indicates that People also dislike type hints in Python for CP tasks. &lt;em&gt;Keywords:&lt;/em&gt; Type hint. Competitive programmer. Python. Autocomplete.&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<p><em>Are Python Type Hints helpful in competitive programming?</em></p><p><strong>Abstract</strong></p><p>Type hinting, which is a way to statically indicate the type of a value in the code, was introduced in Python 3.5. Before Python 3.5, python was a dynamic language in which variable type can only be inferred during runtime. Competitive programmers(CP) are a neglected group of people who need to solve algorithm challenges as fast as possible. In this project, we are trying to assess if using Type Hints is helpful for competitive programmers. We conducted a pilot study with 5 programmers from different backgrounds, 1 of them only provided interview data. We found that type hints may not be useful for CP in Python, and autocomplete suggestions are often not good enough to be accepted. The survey indicates that People also dislike type hints in Python for CP tasks. <em>Keywords:</em> Type hint. Competitive programmer. Python. Autocomplete.<a id="more"></a></p><p>Original PDF:</p><div class="row"><embed src="main.pdf" width="100%" height="550" type="application/pdf"></div><p>Rendered pure text:</p><p>Introduction<br>Competitive programming (CP) is the sport of solving algorithmic puzzles. The International<br>Collegiate Programming Contest (ICPC) is a global CP contest for college students. ICPC has been<br>around since 1977 and its world finals is highly competitive. Successful contestants must possess<br>different kinds of ability to be able to succeed in CP competitions. On one hand, participants have<br>know a wide variety of algorithms and tricks, so that the program written solves the task correctly<br>and executes within the given time and space bound.On the other hand, the participants must be<br>able to implement programs fast, as they are competing against each other in real time.<br>Coding interviews questions are often an easier version of CP puzzles, tech companies use these<br>questions to evaluate software developer applicants‚Äô proficiency in algorithms and programming. Although<br>it is not competitive, interviewees are still required to be able to come up with a correct<br>algorithm, and produce bug-free code in a short amount of time.<br>Historically, Python is not used or taught as a competitive programming language. Python is an<br>interpreted langauge, and is slower in execution compared to compiled programming langauges such as<br>C++ and Java. For this reason, Python is often ignored when it comes to competitive programming,<br>where execution time and space is limited. The appearance of the JIT compiler pypy reduced the<br>execution time of Python scripts by 5 time compared to CPython [1], which makes doing competitive<br>programming in python a possibility. We observed some advanced competitive programmers switching<br>to Python for easier problems for its expressive syntax and easy to use library.<br>Another difference between C++ and Python is the type system. While C++ is statically typed,<br>Python is a dynamically typed. In Python version 3.5, type hints are introduced for Python. Programmers<br>can annotate variables and functions with type information. Some tools, including the Pylance<br>extension in VSCode, are able to utilize type hints to provide type checker support and generate more<br>comprehensive autocomplete suggestions, effectively making Python statically typed [2].</p><p>a : int = 0<br>def isLower(a : str) -&gt; list[bool]:<br>return [c.islower() for c in a]<br>There is a lot of resource on the different algorithms used in programming contests and interviews,<br>including online judge Codeforces [3], interview preparation site LeetCode [4] etc‚Ä¶ There are also<br>research about how to effectively teach these algorithms [5] [6]. However, the topic of implementation<br>speed is rarely talked about. In this paper, we focus on how Python type hints affect the speed in<br>which competitive programmers implement algorithms.<br>In this paper, we conducted a study on the research question:<br>RQ Is Python Type Hint helpful in competitive programming?</p><p>Based on this research question, we are specifically interested in the following sub questions:<br>RQ1 Does type hint help contenstants complete problems faster in CP?<br>RQ2 Does type hint help contenstants do first-time implementation faster in CP?<br>RQ3 Does type hint help contenstants debug faster in CP?<br>RQ4 Do autocomplete suggestions help when type hints were added in CP?<br>RQ5 What is the sentiment towards using type hints, type checker, and autocomplete suggestions in<br>CP?<br>We designed and conducted a 2-by-2 pilot experiment with four participants. Then, we observed<br>the effect of different aspects of typing in Python on the programmer.<br>Section 2 will introduce the method of the experiment. Section 3 will present the results from the<br>pilot experiments. Section 4 will mention the limitation and threats to validity of our experiements.<br>Section 5 will discuss and interpret the results in detail.</p><p>Method<br>This section will breifly talking about structure of the study and the working environment of our<br>study. A sample material, contains all paper material for one participant, is available at sample study<br>material. The algorithm challenge question statement and strater code is available at question list<br>2.1 Recruitment process<br>As a pilot study and limited by the time scope, we didn‚Äôt do a formal recruit process. But we<br>still try to find people who meet our traits below: a) Collegestudents/recent graduates. b) Have a<br>Codeforcesrating of 1200 to 1500 or ‚Äùequivalent‚Äù Leetcoderating per problem count. c) Did algorithm<br>challenge (Leetcode/Codeforces/etc) in Python before. d) familiar with python. e) Have not used<br>python type hint before. f) The current primary language is python. This study is designed to send<br>pre-study questionair and recruit from Codeforces/Leetcodeplatform, ICPC Clubs, LeetcodePractice<br>groups.<br>To assure participants meet the requirement, we provide a pre-study questionair, which includes<br>some python coding questions, like correct python codes, generate expected output. And some<br>questions asking about their experience with python.<br>2.2 Study Procedure<br>Entire procedure at a glance Fig. 1 shows the basic procedure for the entire study. An experiement<br>is a 15 minute algorithm challenge and participants need to finish it on our provided platform. They<br>are able to read question and understand algorithm before they click start. At the very beginning<br>of the study, participants are required to 1) Install Zoom, Chromium based browser, Tampermonkey<br>extension for Chrome 2) Install survey-helper Tampermonkey extension 3) Join the provided link. 4)<br>Install the survey_helper VSCode extension and configure the submission endpoint in settings.<br>Training Problem A training problem will be provided in this part to help participants get familiar<br>with our study environment, which is built on top of VScode, refer to Fig. 2 for more info.</p><p>Condition 1 experiement An experiement where using type hints<br>is not permitted. Any function related to type hints will be turned<br>off. We are going to provide a strater code which doesn‚Äôt have<br>any type hints as well. Pylance type checking mode will be set to<br>‚Äùbasic‚Äù.<br>Type Hints Training In this part, we teach what is the type hints<br>and how to use the desired features. We also provide one warm-up<br>questions at the end for participants to practice before the formal<br>start.<br>Condition 2 experiement An experiement where using type hints<br>is permitted. We are going to provide a strater code which type<br>hints. And Pylance type checking mode will be set to ‚Äùbasic‚Äù. And<br>participants are required to resolve all type checking warnings<br>In the actual study, condition1 and condition2 might be swapped<br>to reduce learning effect.<br>Semi-structured interview This interview contains around 10 questions<br>to let participants talk about their experience and feelings.<br>The detailed questions list can be checked from our sample study<br>material.</p><p>Workspace Fig. 2 shows a sample participant screen. When participants are ready, they can click<br>the start button. During the study, they need to press test/submit button in multiple places to send<br>their code to our server and judge. The server result will be printed in the ‚Äùsurvey-helper‚Äù output<br>channel in their working space. Participants will receive notifications when there are 5 minutes left<br>and 10 minutes left.<br>Once 15 minutes time countdown finished, workspace will do a final submission and workspace will<br>be closed automatically. A new window will pop out for participants to download the recorded data<br>from their local browser. And we will kindly ask participants to send data back to us. Participants<br>always have the right to check the recorded data before sending to us.</p><p>Questions selection and arrangement As a competitive programming challenging, algorithm challengings<br>are the core. For all problems, we follow icpc problem format and select simple (600 1000<br>CF rating) but require non-trivial work (e.g.use special data structure) to complete. We will provide<br>enough challenges that the participants won‚Äôt be able to finish in the 15-mins time window. Because<br>we are assessing type hints‚Äô usage instead of really challenging participants, we also provide tutorials<br>for each question, which might include text/pseudocode. So participants won‚Äôt get stuck if they don‚Äôt<br>know the answer. In order to make sure participants want to finish as much question as possible, we<br>provide incentive for each successfully completed challenge.<br>In terms of question arrangement, We gave each participant a different question configuration to<br>reduce the problem difficulty effect. We also reordered the questions to avoid learning effect. Table.<br>1 shows the actual question order participants was doing.</p><p>Function signature In the experiment, we want to assess a situation where people need to manually<br>type type hints to reach functionality related to type hints. The intuition of doing this is that we are<br>kindly considering whether type hint is useful under a worst case scenario, where participants need to<br>manually type it. In most cases in the real world, people have the ability to reach some intelligent<br>tools, such as pylance, which will infer some types automatically in the background. Sample provided<br>function signature‚Äôs different is shown in Fig. 3.<br>In order to enforce participants not using any type hints in condition1 and using type hints in<br>condition2, we provide different function header for each part for the same question. For condition1,<br>we want to simulate an environment with the minimal intelligent typeinference. We observed that<br>removing type hints in the function signature greatly reduces Pylance‚Äôs ability to infer types. By using<br>this way, we minimize variable-relevant autocomplete. In part2, by adding type hints in the function<br>signature and permit participant to use type hints, we can observe if type hints is useful.<br>class Solution:<br>def arrayMedium(self, arr):</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">arrayMedium</span><span class="params">(self, arr)</span>:</span></span><br><span class="line">        <span class="comment"># Write your solution here</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">arrayMedium</span><span class="params">(self, arr: list[int])</span> -&gt; float:</span></span><br><span class="line">            <span class="comment"># Write your solution here</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br></pre></td></tr></table></figure><p>Figure 3. upper: method signature for condition1 (without type hints) lower: method signature for condition2<br>(with type hints)</p><p>Data Collection<br>Fig 4 shows the data collection flowchart of our study. During the study, participants need to connect<br>to our provided judge server to test and submit their code and the judge server will record test<br>and submit actions and the corresponding results. Zoom will do a video record to record the entire<br>study. The locally tampermonkey extension will record keystrokes, clicks and autocomplete suggestion<br>status. In terms of the recorded keystrokes, we are most interested in the keypress in Table. 2 with<br>autocomplte observed.</p><p>Data analysis<br>Quantitative : The majority of quantitative data comes from the recorded data during the experiments,<br>we also consult video recording when we find abnormal events. We use java, python, excel to<br>categorize, analyze, and plot the recorded data.<br>Qualitative : The majority of qualitative data comes from the semi-structured interview conducted<br>at the end of the entire experiment, we also consult video recording when needed. This study is<br>designed to be using semantic analysis by first generating codes from participants‚Äô transcription. And<br>then categorize, summarize over all codes. Due to time constraints, we generate codes and themes<br>mainly from notes we took during piloting and look at the transcription when needed. Transcription<br>is generated by Zoom, Microsoft Service, and iflytek. We corrected some errors in transcription using<br>video recording.</p><p>Results<br>Since we only have 4 participants, none of the quantitative results are statistically significant. But we<br>can still see trends from them and infer potential next steps.<br>3.1 Participants<br>We recruited 5 participants for the experiment. Their experience background information is shown<br>in Table 3. P0 did the experiement before we implemented the data collection mechanism, so the<br>experiement results will be discarded for P0, we will only use the interview results from P0. We<br>collected quantitative data from P1, P2, P3, and P4, which will be presented later.<br>It is unfortunate that we did not recruit competitive programmers who mains in Python. Instead,<br>P1 and P2 are both competitive programmers who mains in C++, while P0, P3 and P4 have less<br>experience in algorithm puzzles, but more experience in Python.</p><p>Quantitative Result<br>Figure 5 shows the timeline of observed activities from the experiments. The top half is result from<br>Condition 1. The bottom half is result from Condition 2. The horizontal coordinate is the time of the<br>experiement. The vertical coordinate is the 4 participants. Background color signifies the problem<br>they are working on. Vertical lines are test and submit actions, and color represent the judge verdict.<br>Markers in the middle on the center lines are instances of autocomplete suggestions, where different<br>marker represent if participant reject, accept, or ignored the suggestions. Using the result, we tries to<br>answer the following research questions:<br>RQ1 Does type hint help contenstants complete problems faster in CP?<br>RQ2 Does type hint help contenstants do first-time implementation faster in CP?<br>RQ3 Does type hint help contenstants debug faster in CP?<br>RQ4 Do autocomplete suggestions help when type hints were added in CP?<br>Given the research qeustions, we gathered corresponding information from the raw data and<br>presented in Figure 6.<br>A Completion time<br>Completion time is the total time used to implement the algorithm correctly. It is represented by<br>the total amount of time taken to receiving an ‚Äúaccepted‚Äù verdict. Figure 6b shows the completion<br>time. Data suggests that Condition 1 has faster completion time.<br>B First-pass implementation time<br>We hope to see if type hint influence how fast a programmer write their first version of code.<br>First-pass implementation time is the time to program the initial version of the solution. We used<br>two quantities to approximate the first-pass implementation time: the first test time, and the first<br>submit time. Both of them are presented side-by-side in Figure 6c. As we can see, the first pass<br>time is generally higher for Condition 2 than Condition 1.<br>C Debugging time<br>Debugging time is the time used on debugging. We used the time from first meaningful test to<br>problem completion to approximate the debugging time. The first meaningful test is determined<br>by looking at the code they tested. If it is very clear that an early test is on an incomplete code,<br>then we discard this test and consider the next test as first meaningful test. Figure 6d shows the<br>debugging time. The result is inconclusive. It seems that for problem B, Condition 1 has higher<br>debugging time. And for problem G, Condition 2 has higher debugging time.<br>D Autocomplete acceptance ratio<br>We want to study the usefulness of autocomplete suggestions. Autocomplete acceptance ratio is<br>the ratio of the count of accepted suggestions to the count of all given suggestions. Data is shown<br>in Figure 6a. The acceptance rate is generally low. The highest acceptance rate is 17.07% from<br>P1 in Condition 2. The acceptance ratio is also generally higher for Condition 2 than Condition 1.<br>3.3 Qualitative result<br>This section contains the result from the post-study interview. We answer the research question:<br>RQ5 What is the sentiment towards using type hints, type checker, and autocomplete suggestions in<br>CP?<br>We summarize codes from notes taken from the interview, and refer back to the video recording of<br>the interview when needed. The following are some common topics we found.<br>A Autocomplete Suggestions are sometimes annoying<br>P2 suggests autocomplete is distracting, ‚ÄúWhen you are thinking about complex problems, [autocomplete<br>suggestion box] popping up may disrupt your thinking.‚Äù<br>P2 also suggested that autocomplete boxes interfere with the action of inputting end-of-line character.<br>Usually, one would press enter to get a new line. However, when autocomplete is up,<br>pressing enter will accept the autocomplete, instead of giving you a new line. You‚Äôll need to either<br>reject the suggestions beforehand, or erase the extra characters that autocomplete give you.<br>P0 and P4 suggest there is no impact of having autocomplete or not.<br>From the recording, we know that P4 is the only person using arrow key to select elements. In</p><p>Figure 5. Timeline of observed activities legends as below:<br>Background color: aliceblue as Problem A, lavender as Problem B, lavenderblush as Problem G,<br>Test/submit actions: vertical dashed line as test, vertical solid line as submit, vertical green line as Accept,<br>vertical orange line as Wrong answer, vertical red line as Runtime error,vertical yellow line as Crash,<br>autocomplete status: Yellow triangle as Ignored, Green dot as Accept Red cross as Reject</p><p>condition 2, they used arrow key 3 times but ignored or cancelled at last.<br>B Autocomplete Suggestions is useful for completing variable names<br>P1, P2 and P3 all suggested that the suggestions to complete variable names are good. However,<br>P2 pointed out that for short variable names, the autocomplete suggestion won‚Äôt show up, an thus<br>autocomplete is useless in this case. They also pointed out that a lot of people write short variable<br>names in CP contests, which seems true from a quick scan over a few Codeforces submissions<br>from high-rated contestants.<br>Based on our video observations, most of autocomplete acceptance also happens at completing<br>variable name.<br>P1 and P3 gave a positive feedback for autocomplete. But data showed that only P1 have a high<br>acceptance rate. P1 tends to have longer variable name than P2. And P1 seems not familiar with<br>python syntax, as in our notes.<br>Even though P3 suggests autocomplete is useful during interview, considering the relatively low<br>acceptance rate, 2.85% in condition 1 and 7.21% in condition 2, their feeling might not accurate.<br>P4 and P0 says autocomplete has no impact.<br>C Writing type hints wastes time<br>P4 suggests Type hint syntax is weird: ‚ÄúSo to tell the truth, the only thing I feel uncomfortable<br>about is that its syntax is very strange.‚Äù They say it‚Äôs different from the typing syntax in C++<br>and Java, which are their main langauges at work.<br>P3 suggests that typing Type hint is a waste of time.<br>P2 didn‚Äôt need to use any type hints during the experiement.<br>P1 also thinks type hints wastes time. ‚ÄúBut during the competition, you may not want to use type<br>hints. If you spent time on writing types, you may lose your time advantage [in using Python].‚Äù<br>P0 suggest writing type is okay but changing type is boring and time-consuming: ‚ÄùIf you are just<br>writing this type [for once], it‚Äôs OK. It‚Äôs not a waste of time.‚Äù and ‚ÄùBut I think, especially just<br>now, for example, if I want to change [the definition of] one [variable], [‚Ä¶], I have to change its<br>type hint again when I come back. This is very troublesome.‚Äù<br>D Investigating type error wastes time<br>P4 suggest that using type checker in a limited time condition is wasting time.<br>P2 suggest that they only use the type checker when they are finding the specific position of<br>some bugs, ‚ÄúOK, but for type checker, [‚Ä¶] If there is a compilation error, you can enable [type<br>checker] and take a look at it. However, I usually disable it when writing code.‚Äù He give the reason<br>that investigating an error is time-consuming and maybe not worth it, ‚ÄúFor example, if [the type<br>checker] gives a warning, I will be drived to read it. After reading it, I find that it is actually is a<br>false alarm. This wastes time.‚Äù<br>P0 suggest when using Pylance, type checking with ‚Äùbasic‚Äù mode might be better than ‚Äùstrict‚Äù<br>mode. And ‚Äùbasic‚Äù mode is better than no type inferrence at all.<br>E Being ‚ÄúPythonic‚Äù is important<br>P3 suggests type hints feature for python is not meaningful compared with other programming<br>languages, ‚ÄùPython plus Type Hint is a strictly worse than using a statically typed language like<br>C++.‚Äù<br>P4 recommends ‚ÄùPython is just used for scripting and rapid prototyping.‚Äù. He also suggests that<br>Python is a scripting language instead of a ‚Äúformal‚Äù one. So, people shouldn‚Äôt make it strictly<br>typed.<br>F Project scale affect whether type hints are useful<br>P3 suggest debugging in this length of codes may not appeal the fancy part of type hints, saying<br>‚ÄùSmall tasks can be debugged with repeated test runs instead of typing. ‚Äù<br>P0 argues that people are able to remember the detailed information of each variable easily for<br>a task we provided, ‚ÄùI can remember all the type information for tasks of size [similar to these<br>algorithm puzzles].‚Äù<br>Upon review of the interview recording, all of the participants, in one way or another, mentioned<br>that type hints might be useful for larger projects.</p><p>Computer resource limitation<br>An interesting point brought by P2 is that their own laptop is not fast enough for type checkers<br>to respond in real time. The delayed messages and suggestions are annoying and interrupt his<br>thinking, so he turns these features off while coding on the said laptop.<br>4 Limitations<br>Every study has limitations. Describe any threats to validity in your study. This section may be brief;<br>perhaps just a paragraph.<br>Except small sample size, we identify several other threats to internal validity of the study.<br>Participant Background We wish to recruit competitive programmers with similar experience (preferrably about Codeforces<br>rating 1700) competitive programmers who mains in Python. However, we cannot find such a<br>person. Thus, the results might be bias due to participants lower familiarity with algorithms or<br>Python. In fact, in Figure 7, we categorize participant in terms of their algorithm proficiency, we<br>see that the competitive programmers are much faster in completing the tasks.<br>Even if we could find Python competitive programmers, they still need to learn to use Python Type<br>Hints. Since experience is an important factor, we would ideally want to perform the experiments<br>with participants who are very familiar with type hints. We can achieve this through a more<br>long-term experiment.<br>Task Selection We selected relative easy problems compared to real CP contest tasks. Thus, our results cannot<br>be generalized to more complex problems.<br>Environment Setup Our environment setup is quite different from the one used in CP or interview. Participants often<br>use different editors and tools, but we only provided VSCode and Pylance.<br>Compared to CP contests, we handle input/output differently. CP contests require contestants<br>to read input from stdin and write outputs to stdout, adding two layers of text manipulation.<br>Compared to interviews, as P1 and P3 suggested, we are giving participants access to tools that is<br>normally absent in coding interviews, like autocomplete and type checker. P3 purposefully turns<br>off autocomplete and type checker when practicing coding interview to simulate real interview<br>environment.<br>Variety of Bugs We gave participants an entire algorithm puzzle to do. It is unpredictable what kind of bugs will<br>be introduced. Even though we required the parcipant to understand the solution algorithm before<br>starting the timer, they might still waste time on logical errors that is unrelated to typing. We<br>might be able to reduce the threat by choosing debugging tasks. However, CP is a comprehensive<br>process. Debugging other‚Äôs code might be very different from debugging the code that one wrote<br>5 minutes ago. We kept the monolithic task structure to keep it true to the nature of CP. Other<br>methods need to be taken to reduce this validity threat.<br>Ignored Suggestions Most of the autocomplete suggestions are ignored instead of rejected by pressing the escape button.<br>However, we treated ignored suggestions the same as rejected suggestions. P1 suggested that<br>autocomplete suggestions have a guidance effect. While they might not press enter to accept a<br>suggestion, they would look at the suggestions and type-copy what he thought was the correct<br>token to use. It is not known if other participants are doing the same without noticing.<br>5 Discussion<br>Interpret your results. Why do you think you found what you did? Were there any surprises?<br>The quantitative result is not so convincing due to the nature of the small pilot study. We don‚Äôt<br>have a statistically significant sample size to say things for sure. We also lost some data since our<br>judge server crashed on the experiement given to P4. If we ignore the limited sample size, we can<br>infer the following about the research questions:<br>RQ1 Type hint does not help reduce the overall coding time in CP.<br>RQ2 People wastes time on using type hints even before debugging.<br>RQ3 The result about effect of type hint on debugging time is inconclusive.<br>RQ4 Autocomplete is often ignored. But its usage is higher when used with type hints than without.<br>From the interview results, we can infer the answer to the fifths research question:</p><p>RQ5 Contestants dislikes type hint and the type checker during competitive programming. They have<br>mixed feeing towards the autocomplete feature.<br>It is interesting to see that type hints are not helping people in CP problems.<br>We originally assumed that people would take longer to program in the first pass since they need<br>to figure out the type of hard-to-infer types and type it out. We also expect programmers to easily<br>find and fix some bugs related to types as they were coding the first time since the type checker give<br>red underline to parts that doesn‚Äôt type check. This is confirmed by our experiement.<br>We also thought that it would take less time for programmers to fix their program after testing their<br>program, since the bugs related to types were eliminated in the first-pass. However, our experiement<br>result neither support nor deny the claim. Upon closer look at the submission data, we found that P2<br>did not encounter a bug when coding problem B in condition 2. Participants all encountered bugs in<br>one way or another in other cases. P2 is one of the ICPC-NAC participatns, who is very familiar with<br>B‚Äôs algorithm. It is not suprising for him to not have a logical error in this case. If participant B were<br>to encounter a logical error in problem B, his debugging time will increase and our result might be<br>different. We might conclude that ‚ÄúType hint does not help with debugging time.‚Äù This is suprising<br>to us. But at the same time, none of the participants are familiar with python type hints, so maybe<br>the cause is not type hints itself, but the experience with it.<br>The result for autocomplete shows that the VSCode feature has a lot to improve. It is not giving<br>the wanted suggestion at the right time. Some participants expressed negative opinion towards it<br>later in the interview, because of its intrusive property.<br>The interview results largely confirmed the results from the qualitative data, that it is not advantages<br>to use Python type hints in competitive programming.</p><p>Future Work<br>We have to discuss what is actually worth studying before we dive deeper into the field of CP. In lower<br>levels, people benefit from learning some basic data structure and algorithms. Higher level CP might<br>just be a niche sport that might not be so beneficial to optimize for. It might not be completely worth<br>it to study the tools and programming languages just to improve the efficiency by a bit. We have<br>to evaluate the benefit of doing such studies. As discussed in limitation, we might need to perform<br>long-term experiements to fully determine the affect of programming langauge or tools on CP so that<br>the participants have enough experience with the tools they are assigned to. Long-term experiements<br>costs more and should be weighted more carefully.<br>To continue studying about tools and programming languages for CP. Firstly, one could improve<br>this experiment and by considering the limitation described in the previous section, find ways to reduce<br>the threats, and apply it to other scenarios.<br>As we observed before, the ratio of autocomplete suggestions being accepted is very low. One<br>might carry out additional studies about the tool to investigate what kinds of suggestions have a<br>positive impact on competitive programmer‚Äôs efficiency.</p><p>Although we studied type hints in Python, it is not clear at all if people should use Python in CP.<br>Additional study on topic of ‚Äúprogramming language choice for CP‚Äù can be done before we dig deeper<br>into Python.<br>7 Conclusion<br>Summarize what you learned.<br>In this paper, we designed an experiment to verify the research question<br>‚Ä¢ Is Python Type Hint helpful in competitive programming?<br>We pilotted our experiment with four participants, and found that<br>‚Ä¢ Python Type Hint might not be useful in competitive programming.<br>‚Ä¢ Programmer dislike type hints when doing competitive programming tasks.<br>We also found some potential issues of the VSCode editor and Pylance extension:<br>‚Ä¢ Autocomplete suggestions are not accurate and often ignored.<br>‚Ä¢ Autocomplete suggestions is sometimes counter-productive.<br>Lastly, we identified the limitations of our work and suggested some directions of future work<br>about tools and programming langauge use in competitive programming.<br>References<br>[1] A. Rigo and S. Pedroni, ‚ÄúPypy‚Äôs approach to virtual machine construction,‚Äù in Companion to the 21st<br>ACM SIGPLAN symposium on Object-oriented programming systems, languages, and applications, 2006,<br>pp. 944‚Äì953.<br>[2] Static Typing with Python ‚Äî typing documentation, <a href="https://typing.readthedocs.io/en/latest/" target="_blank" rel="noopener">https://typing.readthedocs.io/en/latest/</a>, [Online;<br>accessed 2022-12-01], 2022.<br>[3] M. MIRZAYANOV, O. PAVLOVA, P. MAVRIN, et al., ‚ÄúCodeforces as an educational platform for learning<br>programming in digitalization,‚Äù Olympiads in Informatics, vol. 14, pp. 133‚Äì142, 2020.<br>[4] The world‚Äôs leading online programming learning platform. [Online]. Available: <a href="http://www.leetcode" target="_blank" rel="noopener">http://www.leetcode</a>.<br>com/.<br>[5] T. Di Mascio, L. Laura, and M. Temperini, ‚ÄúA framework for personalized competitive programming<br>training,‚Äù in 2018 17th International Conference on Information Technology Based Higher Education<br>and Training (ITHET), 2018, pp. 1‚Äì8. doi: 10.1109/ITHET.2018.8424620.<br>[6] W. Di Luigi, P. Fantozzi, L. Laura, et al., ‚ÄúLearning analytics in competitive programming training<br>systems,‚Äù in 2018 22nd International Conference Information Visualisation (IV), 2018, pp. 321‚Äì325. doi:<br>10.1109/iV.2018.00061.</p>]]></content:encoded>
      
      
      <category domain="https://shaokangjiang.github.io/categories/research/">research</category>
      
      
      <category domain="https://shaokangjiang.github.io/tags/research/">research</category>
      
      
      <comments>https://shaokangjiang.github.io/2022/Whether-Python-Type-Hints-are-helpful-for-competitive-programmers-CP/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Wise grader</title>
      <link>https://shaokangjiang.github.io/2022/Wise-grader/</link>
      <guid>https://shaokangjiang.github.io/2022/Wise-grader/</guid>
      <pubDate>Wed, 23 Feb 2022 09:41:20 GMT</pubDate>
      
      
      
      
      
      
      <comments>https://shaokangjiang.github.io/2022/Wise-grader/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>AES Encrypt and Decrypt on Cloudflare worker</title>
      <link>https://shaokangjiang.github.io/2021/AES-Encrypt-and-Decrypt-on-Cloudflare-worker/</link>
      <guid>https://shaokangjiang.github.io/2021/AES-Encrypt-and-Decrypt-on-Cloudflare-worker/</guid>
      <pubDate>Fri, 15 Jan 2021 07:41:29 GMT</pubDate>
      
      <description>&lt;p&gt;In the real situation, information security is important and we may want to send encrypted text to user for their credential. It is good for validation and it can prevent some attack from user. &lt;code&gt;Cloudflare worker&lt;/code&gt; has an implemented encode and decode feature, so it is possible to encrypt and deliver message to user via a constraint distributed system. The pointing system of &lt;code&gt;https://capitaltwo.ga&lt;/code&gt; is built based on this. More details come below:&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<p>In the real situation, information security is important and we may want to send encrypted text to user for their credential. It is good for validation and it can prevent some attack from user. <code>Cloudflare worker</code> has an implemented encode and decode feature, so it is possible to encrypt and deliver message to user via a constraint distributed system. The pointing system of <code>https://capitaltwo.ga</code> is built based on this. More details come below:</p><a id="more"></a><blockquote><p>Details about different possible configuration could check official website at <a href="https://developers.cloudflare.com/workers/runtime-apis/web-crypto" target="_blank" rel="noopener">Web Crypto</a></p></blockquote><h3 id="encode"><a class="markdownIt-Anchor" href="#encode"></a> Encode</h3><p>Code as below, comment is the description of purpose of each line:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">encode</span>(<span class="params">text, password</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> iv = <span class="keyword">await</span> crypto.getRandomValues(<span class="keyword">new</span> <span class="built_in">Uint8Array</span>(<span class="number">12</span>)); <span class="comment">//get a unique iv to encrypt</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> myText = <span class="keyword">new</span> TextEncoder().encode(text) <span class="comment">// need TextEncoder to encode to buffer</span></span><br><span class="line">  <span class="keyword">const</span> key = <span class="keyword">await</span> crypto.subtle.importKey(<span class="string">"raw"</span>, <span class="keyword">new</span> TextEncoder().encode(password), <span class="string">"AES-GCM"</span>, <span class="literal">false</span>, [<span class="string">"encrypt"</span>, <span class="string">"decrypt"</span>]); <span class="comment">//generate key, more details about configuration could be found on cloudflare worker official site </span></span><br><span class="line">  <span class="keyword">const</span> myDigest = <span class="keyword">await</span> crypto.subtle.encrypt(</span><br><span class="line">    &#123;</span><br><span class="line">      name: <span class="string">"AES-GCM"</span>,</span><br><span class="line">      iv: iv</span><br><span class="line">    &#125;,</span><br><span class="line">    key,</span><br><span class="line">    myText</span><br><span class="line">  )<span class="comment">//the method to encrypt</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> a = &#123;</span><br><span class="line">    <span class="string">"iv"</span>: buffer2base(iv),<span class="comment">//iv could be packaged and pass to user, they do not influence security</span></span><br><span class="line">    <span class="string">"text"</span>: buffer2base(myDigest)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> btoa(<span class="built_in">JSON</span>.stringify(a));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>In order to coded to a thing that could be delivered and saved in a normal text environment (in the last seven lines of the above coded), we can convert <code>ArrayBuffer</code> to <code>Uint8Array</code> and then use <code>JSON.stringify</code> to parse it. Like:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * @param &#123;arraybuffer object&#125; buffer </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">buffer2base</span>(<span class="params">buffer</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> btoa(<span class="built_in">JSON</span>.stringify(<span class="keyword">new</span> <span class="built_in">Uint8Array</span>(buffer)))</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>The encryption process is a Promise and should be handled with <code>await</code></p></blockquote><h3 id="decode"><a class="markdownIt-Anchor" href="#decode"></a> Decode</h3><p>In order to decode, we need to recover generated base64 encoded text to normal buffer at first, like this:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * @param &#123;base64 object&#125; code </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">base2buffer</span>(<span class="params">code</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Uint8Array</span>.from(<span class="built_in">Object</span>.values(<span class="built_in">JSON</span>.parse(atob(code)))).buffer</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Other codes as below, comment is the description of purpose of each line:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * @param &#123;Text want to encrypt&#125; text</span></span><br><span class="line"><span class="comment"> * @param &#123;password to decode&#125; password</span></span><br><span class="line"><span class="comment"> * @returns &#123;decoded text&#125; </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">decode</span>(<span class="params">encodeText, password</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="built_in">JSON</span>.parse(atob(encodeText)) <span class="comment">//parse to get iv and the encoded text</span></span><br><span class="line">  <span class="keyword">const</span> key = <span class="keyword">await</span> crypto.subtle.importKey(<span class="string">"raw"</span>, <span class="keyword">new</span> TextEncoder().encode(password), <span class="string">"AES-GCM"</span>, <span class="literal">false</span>, [<span class="string">"encrypt"</span>, <span class="string">"decrypt"</span>]);<span class="comment">//generate correct key buffer</span></span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> crypto.subtle.decrypt(</span><br><span class="line">    &#123;</span><br><span class="line">      name: <span class="string">"AES-GCM"</span>,</span><br><span class="line">      iv: base2buffer(a.iv)</span><br><span class="line">    &#125;,</span><br><span class="line">    key,</span><br><span class="line">    base2buffer(a.text)</span><br><span class="line">  )<span class="comment">//decode to get result, detailed configuration could check cloudflare website. </span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> TextDecoder().decode(result);<span class="comment">//Use TextDecoder to decode text to normal readable format.</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="compare-arraybuffer"><a class="markdownIt-Anchor" href="#compare-arraybuffer"></a> Compare <code>ArrayBuffer</code></h3><p>The easiest way to compare is through compare the digit one by one, here is a sample:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">equal</span>(<span class="params">buf1, buf2</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (buf1.byteLength != buf2.byteLength) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">var</span> dv1 = <span class="keyword">new</span> <span class="built_in">Int8Array</span>(buf1);</span><br><span class="line">  <span class="keyword">var</span> dv2 = <span class="keyword">new</span> <span class="built_in">Int8Array</span>(buf2);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i != buf1.byteLength; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (dv1[i] != dv2[i]) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      
      <category domain="https://shaokangjiang.github.io/categories/website/">website</category>
      
      <category domain="https://shaokangjiang.github.io/categories/website/Cloudflare-Worker/">Cloudflare Worker</category>
      
      
      <category domain="https://shaokangjiang.github.io/tags/AES/">AES</category>
      
      
      <comments>https://shaokangjiang.github.io/2021/AES-Encrypt-and-Decrypt-on-Cloudflare-worker/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Additional Work</title>
      <link>https://shaokangjiang.github.io/2021/projects/Additional-Work/</link>
      <guid>https://shaokangjiang.github.io/2021/projects/Additional-Work/</guid>
      <pubDate>Wed, 13 Jan 2021 03:36:27 GMT</pubDate>
      
      <description>&lt;p&gt;This post contains course related projects, forked projects with added functionality, modified projects. Some of them are big, some of them are small. All other projects in project tab are designed, coded, solved on my own and most of them are not required by a course. Click read more to read my course related projects, added function, modified projects.&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<p>This post contains course related projects, forked projects with added functionality, modified projects. Some of them are big, some of them are small. All other projects in project tab are designed, coded, solved on my own and most of them are not required by a course. Click read more to read my course related projects, added function, modified projects.</p><a id="more"></a><h2 id="course-related-projects"><a class="markdownIt-Anchor" href="#course-related-projects"></a> Course related projects</h2><blockquote><p>For course-related program, most of them have a short description and source code might be inappropriate to provide at here. Contact me if anyone wants to see. Programs represented at here are big project, like final project. So it is intended to be big and they are not HWs.</p></blockquote><h3 id="intro-to-the-profession"><a class="markdownIt-Anchor" href="#intro-to-the-profession"></a> Intro to the Profession</h3><ul><li>HateFate Website (HTML/Jsp/SQL, 2017)</li></ul><p>Led group of 4 people to make a website back as SQL database and robust verification contain basic functions, e.g. login, signup with email verification, find password, pairing different people</p><p>This one is far beyond course requirement and more complex than a short text, see more at <a href="https://shaokangjiang.github.io/2017/projects/Website%20for%20CS100%20project/">Website for CS100 project</a>.</p><h3 id="object-oriented-programming-i"><a class="markdownIt-Anchor" href="#object-oriented-programming-i"></a> Object-Oriented Programming I</h3><ul><li>CS115Competition2 (Java Swing, 2017)</li></ul><p>Original questions: Input some students‚Äô grade and get a standard output with average grade.</p><p><strong>Repo:</strong> <a href="https://github.com/ShaokangJiang/CS115Competition2" target="_blank" rel="noopener">CS115Competition2</a></p><p>This small project contains a simple Java GUI through Java Swing, like this,</p><img src="/2021/projects/Additional-Work/1.png"><p>It will ask user for multiple inputs and then user could select to save the result file to local as a txt file. It also has appropriate wrong message handler to handle wrong stuff. Example of exported file:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span><br><span class="line">A number First name Last name Math Science History Physics Average</span><br><span class="line">- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span><br><span class="line">A52525252 A52 A52 52 52 52 52 52.0</span><br><span class="line">A85858585 A85 A85 85 85 85 85 85.0</span><br></pre></td></tr></table></figure><div id="LibraryManagementSoftware"></div><ul><li>CS115Activity2 - Library Management Software (Java/Java Swing, 2017)</li></ul><p><strong>Repo:</strong> <a href="https://github.com/ShaokangJiang/CS115Activity2" target="_blank" rel="noopener">CS115Activity2</a></p><p><strong>Original question</strong>:</p><p>The libraries of SmallTownX need a new electronic rental system, and it is up to you to build it. SmallTownX has two libraries. Each library offers many books to rent. Customers can print the list of available books, borrow, and return books.</p><p>A Java GUI program to pull and upload book data from ftp and manage them, including demoed feature in the below chart.</p><blockquote><p>This program require communication with an ftp server, my original testing one is not working right now. If an error of ‚Äúno server, check connection‚Äù happen, this is the reason.</p></blockquote><p><strong>The design of the system</strong>:</p><p><img src="https://raw.githubusercontent.com/ShaokangJiang/CS115Activity2/master/(java%20activity2)The%20work.jpeg" alt></p><p><strong>Sample running</strong>:</p><img src="/2021/projects/Additional-Work/08.jpg"><ul><li>Date detection and extraction and testing valid</li></ul><p>A Java program that is able to detect date based on some pre-configured sequence.</p><ul><li>Simple Encryption/Description</li></ul><p>A program to encrypt and decrypt ascii text based on specific configuration, like by shifting phase with n places.</p><h3 id="object-oriented-programming-ii"><a class="markdownIt-Anchor" href="#object-oriented-programming-ii"></a> Object-Oriented Programming II</h3><ul><li>A Road Traffic Simulator (Java, 2018)</li></ul><p>A simulator to simulate cars flow on a simple cross road and managing traffic light. Input source is a file. Output is the simulation result.</p><ul><li>Library books management</li></ul><p>Manage book, rent book, search for a book in a command line Java interface with appropriate testing methods.</p><h3 id="cmptr-orgasmbly-lang-prgmmg"><a class="markdownIt-Anchor" href="#cmptr-orgasmbly-lang-prgmmg"></a> Cmptr Org&amp;Asmbly Lang Prgmmg</h3><ul><li>LC-3 Simulator (C, 2018)</li></ul><p>A C99 program to simulate running of LC-3 assembly code with assembly file as input source.</p><h3 id="systems-programming"><a class="markdownIt-Anchor" href="#systems-programming"></a> Systems Programming</h3><ul><li>Dynamic memory allocator</li></ul><p>I write a dynamic storage allocator for C programs, i.e., my own version of the malloc and free routines, including functions of <code>mm_init</code>, <code>mm_malloc</code>, <code>mm_free</code>, <code>mm_realloc</code>.</p><ul><li>Cache simulation and optimization</li></ul><p>This project has two parts, in the first part, simulates the behavior of a cache memory. In the second part, optimize a small matrix transpose function, with the goal of minimizing the number of cache misses.</p><ul><li>a shell program</li></ul><p>In this project, I</p><ol><li>Create and manage UNIX processes with fork, exec, and wait</li><li>Write signals handlers that handle exceptional control flow</li><li>Implement a functional UNIX shell</li></ol><h3 id="database-organization"><a class="markdownIt-Anchor" href="#database-organization"></a> Database Organization</h3><ul><li>Reservation System Website (Azure/Jsp/SQL, 2019)</li></ul><p>A website to manage reservations for different roles, including admin, patient, scheduler, and see an accumulative report.</p><p>This one is far beyond course requirement and more complex than a short text, see more at <a href="https://shaokangjiang.github.io/2019/projects/Website%20for%20CS425%20project/">Website for CS425 project</a>.</p><h3 id="introduction-to-optimization"><a class="markdownIt-Anchor" href="#introduction-to-optimization"></a> Introduction to Optimization</h3><ul><li>Seat Arrangement Problem (GAMS/Cplex, 2019)</li></ul><p>Decision-making script that solves a problem about how to arrange seats in an imaginary library</p><p>This one is far beyond those and more complex than a short text, see more at <a href="https://shaokangjiang.github.io/2019/projects/College-library-optimization-problem/">College library optimization problem</a>.</p><h3 id="programming-iii"><a class="markdownIt-Anchor" href="#programming-iii"></a> Programming III</h3><ul><li>A JavaFx program (Java, 2020)</li></ul><p>A Java GUI program to manage and lookup some data among different farm</p><p>This one is far beyond those and more complex than a short text, see more at <a href="http://localhost:4000/2020/projects/A-JavaFx-project/" target="_blank" rel="noopener">A JavaFx project</a>.</p><h3 id="intro-to-comp-learning-theory"><a class="markdownIt-Anchor" href="#intro-to-comp-learning-theory"></a> Intro to Comp Learning Theory</h3><ul><li>Final project of reading</li></ul><p>In the final project of this course, I tried to focus on finding the correct product rating without golden set and read different papers. This one is far beyond those and more complex than a short text, see more at <a href="https://shaokangjiang.github.io/2020/projects/639-project/">639 project</a>.</p><h3 id="building-user-interfaces"><a class="markdownIt-Anchor" href="#building-user-interfaces"></a> Building User Interfaces</h3><ul><li>Shopping Assistant (DialogFlow/REST API, 2020)</li></ul><p>Voice interaction application to perform actions on website, including filtering, adding and removing to cart, login.</p><ul><li>Course Selection and Enroll Website (React/REST API, 2020)</li></ul><p>To select course in a website contains basic functions including filtering, adding to cart, auto correct. And it could recommend course based on the course user has taken so far.</p><ul><li>Fitness App (React Native/Expo, 2020)</li></ul><p>Manage personal fitness, track workout in a day and manage dining in a day. User can set the goal and see if they achieve them or not.</p><h2 id="added-function-projects"><a class="markdownIt-Anchor" href="#added-function-projects"></a> Added function projects</h2><ul><li>Modified Traffic simulator</li></ul><p>A modified project to enable exporting running and result data into csv file at <a href="https://shaokangjiang.github.io/2020/projects/Modified-simulator/">Modified traffic simulator</a>.</p><ul><li>Modified echart-countries-js</li></ul><p>Its program can not detect some english input sometime, fixed this error and serve on my own. Repo at <a href="https://github.com/ShaokangJiang/echarts-countries-js" target="_blank" rel="noopener">echarts-countries-js</a>.</p>]]></content:encoded>
      
      
      
      
      <comments>https://shaokangjiang.github.io/2021/projects/Additional-Work/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Financial organization phone app - stage 2</title>
      <link>https://shaokangjiang.github.io/2021/projects/Financial-organization-phone-app-stage-2/</link>
      <guid>https://shaokangjiang.github.io/2021/projects/Financial-organization-phone-app-stage-2/</guid>
      <pubDate>Mon, 11 Jan 2021 20:46:07 GMT</pubDate>
      
      <description>&lt;p&gt;In addition to &lt;a href=&quot;https://shaokangjiang.github.io/2020/Financial-organization-phone-application/&quot;&gt;Stage 1 of this app&lt;/a&gt;, Stage 2 is a voice interaction app based on locally trained natural language processing model by using &lt;a href=&quot;https://github.com/axa-group/nlp.js/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Nlp.js&lt;/a&gt;, which detects and analyze phrases based on machine learning, and voice recognition by using ibm waston cloud. Due to compatibility, limitation in testing, privacy issue, the published version only contain chat feature using which user is able to add items to their lists. Chat robot will communicate with user in multiple rounds and extract related information to add to the existed lists. This app is built on Expo managed workflow and thus has cross-platform support. The future published version will integrate Tensorflow and using &lt;code&gt;float32array&lt;/code&gt; to run locally train and run voice recognition. Dark and light theme is following user‚Äôs system default. This app is done solely on me. More details come below:&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<p>In addition to <a href="https://shaokangjiang.github.io/2020/Financial-organization-phone-application/">Stage 1 of this app</a>, Stage 2 is a voice interaction app based on locally trained natural language processing model by using <a href="https://github.com/axa-group/nlp.js/" target="_blank" rel="noopener">Nlp.js</a>, which detects and analyze phrases based on machine learning, and voice recognition by using ibm waston cloud. Due to compatibility, limitation in testing, privacy issue, the published version only contain chat feature using which user is able to add items to their lists. Chat robot will communicate with user in multiple rounds and extract related information to add to the existed lists. This app is built on Expo managed workflow and thus has cross-platform support. The future published version will integrate Tensorflow and using <code>float32array</code> to run locally train and run voice recognition. Dark and light theme is following user‚Äôs system default. This app is done solely on me. More details come below:</p><a id="more"></a><h3 id="usage"><a class="markdownIt-Anchor" href="#usage"></a> Usage</h3><p>In addition to <a href="https://shaokangjiang.github.io/2020/Financial-organization-phone-application/">Stage 1 of this app</a>, just click add float button and select the mic sign. After waiting a moment, the interface will be poped out. See an example of the released app at the end of this passage.</p><h3 id="running"><a class="markdownIt-Anchor" href="#running"></a> Running</h3><p>Click <a href="https://github.com/ShaokangJiang/CapitalTwo-Financial" target="_blank" rel="noopener">here</a> for source code.</p><p>Click <a href="https://expo.io/@huangsk100/projects/CapitalTwo-Financial" target="_blank" rel="noopener">here</a> for an expo runable version</p><p>Android and ios package is ready but Github has the limitation to prevent me of uploading. User could always built their own through <code>expo build:ios</code> or <code>expo build:android -t apk</code></p><h3 id="compile-from-source"><a class="markdownIt-Anchor" href="#compile-from-source"></a> Compile from source</h3><p>To compile and run locally:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/ShaokangJiang/CapitalTwo-Financial.git</span><br><span class="line"><span class="built_in">cd</span> CapitalTwo-Financial</span><br><span class="line">npm install</span><br><span class="line">expo install</span><br><span class="line">expo start</span><br></pre></td></tr></table></figure><p>And use our phone to scan the QR code on screen.</p><h3 id="entity-extraction"><a class="markdownIt-Anchor" href="#entity-extraction"></a> Entity extraction</h3><blockquote><p>Details about using entity and entity extraction steps could refer to <a href="https://shaokangjiang.github.io/2021/Nlp-js-in-Expo-usage/">Nlp.js in Expo usage</a>, which contains more details, including sample codes.</p></blockquote><p>Entity information, like amount, title, etc, are extracted from the communication between you and the machine. The description will be the chat between you and robot. Because of the benefit of locally trained model, the specific spending and expense categories are added as enum and thus able to be extracted as well. User just need to answer questions machine asked, and everything would be on set. Detailed syntax could check the repo at <a href="https://github.com/ShaokangJiang/CapitalTwo-Financial" target="_blank" rel="noopener">here</a></p><p>Future version might contain store name extraction based on context. To do this, current plan is to check the sentence structure, like detecting ‚Äúat XXX‚Äù, and double check by using the intent matching through Nlp.js. Then extract them using regular expression.</p><h3 id="future-work"><a class="markdownIt-Anchor" href="#future-work"></a> Future work</h3><ol><li>Optimize the performance - including update the state only necessary, retrain the model only when necessary.</li><li>Use locale voice recognition that will be compatible with Expo platform through Tensorflow local training to make the version works on both android and ios with no privacy risk. Some possible projects using is the <a href="https://github.com/tensorflow/tfjs-models/tree/master/speech-commands" target="_blank" rel="noopener">speech-command</a>. And I will possibly build my own training dataset for each specific function. Current plan for this one is to convert original audio to <code>float32array</code> and then using thee locally trained Tensorflow model to detect and generate result.</li><li>Location recognition in the conversation based on the context. Possible way is through checking the sentence structure, like detecting ‚Äúat XXX‚Äù, and double check by using the intent matching through Nlp.js. Then extract them using regular expression.</li></ol><h3 id="sample-running"><a class="markdownIt-Anchor" href="#sample-running"></a> Sample running</h3><p>Here is a sample running of the released version. This is in dark theme.</p><img src="/2021/projects/Financial-organization-phone-app-stage-2/Screenshot.jpg">]]></content:encoded>
      
      
      <category domain="https://shaokangjiang.github.io/categories/Expo/">Expo</category>
      
      
      <category domain="https://shaokangjiang.github.io/tags/Expo/">Expo</category>
      
      <category domain="https://shaokangjiang.github.io/tags/Nlp-js/">Nlp.js</category>
      
      
      <comments>https://shaokangjiang.github.io/2021/projects/Financial-organization-phone-app-stage-2/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Simple Chat App</title>
      <link>https://shaokangjiang.github.io/2021/projects/Simple-Chat-App/</link>
      <guid>https://shaokangjiang.github.io/2021/projects/Simple-Chat-App/</guid>
      <pubDate>Mon, 11 Jan 2021 14:47:38 GMT</pubDate>
      
      <description>&lt;p&gt;This is an robot chat app based on locally trained natural language processing model by using &lt;a href=&quot;https://github.com/axa-group/nlp.js/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Nlp.js&lt;/a&gt;. It could answer questions in different situations and is able to run and answer questions based on context totally locally. Due to the limitation of the local dataset, it can only understand a limited number of phrase. It is still a good app to chat with. In each run, you can also choose to save history chat or not and choose to extract entity information or not. So, it is also a good app to see what a phrase will happen in react native version of Nlp.js in expo. Dark and light theme is following user‚Äôs system default. This app is done solely by me.&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<p>This is an robot chat app based on locally trained natural language processing model by using <a href="https://github.com/axa-group/nlp.js/" target="_blank" rel="noopener">Nlp.js</a>. It could answer questions in different situations and is able to run and answer questions based on context totally locally. Due to the limitation of the local dataset, it can only understand a limited number of phrase. It is still a good app to chat with. In each run, you can also choose to save history chat or not and choose to extract entity information or not. So, it is also a good app to see what a phrase will happen in react native version of Nlp.js in expo. Dark and light theme is following user‚Äôs system default. This app is done solely by me.</p><a id="more"></a><h3 id="usage"><a class="markdownIt-Anchor" href="#usage"></a> Usage</h3><p>This is a simple example of using Nlp.js on Expo with chat interface. It is trained with some general chatting phrases. Turn on the switcher to enable and show the extracted information, Press save button to save communication, which will be loaded by app in your next initiation. See an example of the released app at the end of this passage.</p><h3 id="running"><a class="markdownIt-Anchor" href="#running"></a> Running</h3><p>Click <a href="https://github.com/ShaokangJiang/Chat-Interface" target="_blank" rel="noopener">here</a> for source code.</p><p>Click <a href="https://expo.io/@huangsk100/projects/Chat-Interface" target="_blank" rel="noopener">here</a> for an expo runable version.</p><p><a href="https://github.com/ShaokangJiang/Chat-Interface/releases/download/0.1/Chat-Interface.apk" target="_blank" rel="noopener">Download Apk for android</a></p><p><a href="https://github.com/ShaokangJiang/Chat-Interface/releases/download/0.1/Chat-Interface.tar.gz" target="_blank" rel="noopener">Download for ios</a></p><h3 id="compile-from-source"><a class="markdownIt-Anchor" href="#compile-from-source"></a> Compile from source</h3><p>To compile and run locally:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/ShaokangJiang/Chat-Interface.git</span><br><span class="line"><span class="built_in">cd</span> CapitalTwo-Financial</span><br><span class="line">npm install</span><br><span class="line">expo install</span><br><span class="line">expo start</span><br></pre></td></tr></table></figure><p>And use our phone to scan the QR code on screen.</p><h3 id="information-extract"><a class="markdownIt-Anchor" href="#information-extract"></a> Information Extract</h3><p>Entity information, like amount, title, etc, are extracted from the communication between you and the machine. Because of the benefit of locally trained model, the specific spending and expense categories are added as enum and thus able to be extracted as well. User just need to answer questions machine asked, and everything would be on set. Detailed syntax could check the repo.</p><p>This app is good to know what will be extracted by turning on the <code>Info?</code> on the upper corner.</p><h3 id="sample-running"><a class="markdownIt-Anchor" href="#sample-running"></a> Sample running</h3><p>Here is a sample running of the released version. This is in dark theme. This is a demo app, so only part function is shown.</p><img src="/2021/projects/Simple-Chat-App/Screenshot.jpg">]]></content:encoded>
      
      
      <category domain="https://shaokangjiang.github.io/categories/Expo/">Expo</category>
      
      
      <category domain="https://shaokangjiang.github.io/tags/Expo/">Expo</category>
      
      <category domain="https://shaokangjiang.github.io/tags/Nlp-js/">Nlp.js</category>
      
      
      <comments>https://shaokangjiang.github.io/2021/projects/Simple-Chat-App/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Nlp.js in Expo usage</title>
      <link>https://shaokangjiang.github.io/2021/Nlp-js-in-Expo-usage/</link>
      <guid>https://shaokangjiang.github.io/2021/Nlp-js-in-Expo-usage/</guid>
      <pubDate>Sun, 10 Jan 2021 20:48:49 GMT</pubDate>
      
      <description>&lt;p&gt;Even though the official repo of &lt;a href=&quot;https://github.com/axa-group/nlp.js&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Nlp.js&lt;/a&gt; has a description about using in &lt;code&gt;React Native&lt;/code&gt;. Running directly on Expo might have some problems. Due to some limitation on the web version of &lt;code&gt;@nlpjs/core @nlpjs/lang-en-min @nlpjs/nlp&lt;/code&gt;, like no entity extraction and can not customize entity, using &lt;code&gt;node-nlp-rn&lt;/code&gt; is a good choice. More details on implementing in below:&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<p>Even though the official repo of <a href="https://github.com/axa-group/nlp.js" target="_blank" rel="noopener">Nlp.js</a> has a description about using in <code>React Native</code>. Running directly on Expo might have some problems. Due to some limitation on the web version of <code>@nlpjs/core @nlpjs/lang-en-min @nlpjs/nlp</code>, like no entity extraction and can not customize entity, using <code>node-nlp-rn</code> is a good choice. More details on implementing in below:</p><a id="more"></a><h3 id="installation"><a class="markdownIt-Anchor" href="#installation"></a> Installation:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install node-nlp-rn</span><br></pre></td></tr></table></figure><h3 id="processhrtime-error"><a class="markdownIt-Anchor" href="#processhrtime-error"></a> process.hrtime() error</h3><p>A common error I met was <code>process.hrtime()</code> is not a function. Because expo is not a total <code>Node.js</code> environment, this function wouldn‚Äôt exist. By checking the place that is using this function at <a href="https://github.com/axa-group/nlp.js/search?q=process.hrtime&amp;type=code" target="_blank" rel="noopener">Github</a>, it is just used to measure the performance of the Nlp.js. So, a good and reasonable way to overcome this is to block this function by defining a global function using <code>window</code>, like:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">window.process.hrtime = function () &#123; return 0 &#125;</span><br></pre></td></tr></table></figure><blockquote><p>This is the key in my case to make Nlp.js run</p></blockquote><h3 id="remaining"><a class="markdownIt-Anchor" href="#remaining"></a> Remaining:</h3><p>By solving the previous issue, everything is on set and just do not use any saving function. Other functions are the same as <code>node-nlp</code></p><p>A sample could be:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &apos;react&apos;;</span><br><span class="line">window.process.hrtime = function () &#123; return 0&#125;</span><br><span class="line"></span><br><span class="line">import &#123;NlpManager&#125; from &apos;node-nlp-rn&apos;;</span><br><span class="line">class MainScreen extends Component &#123;</span><br><span class="line"></span><br><span class="line">  async componentDidMount() &#123;</span><br><span class="line">    const manager = new NlpManager(&#123; languages: [&apos;en&apos;], forceNER: true &#125;);</span><br><span class="line">    // Adds the utterances and intents for the NLP</span><br><span class="line">    manager.addDocument(&apos;en&apos;, &apos;goodbye for now&apos;, &apos;greetings.bye&apos;);</span><br><span class="line">    manager.addDocument(&apos;en&apos;, &apos;bye bye take care&apos;, &apos;greetings.bye&apos;);</span><br><span class="line">    manager.addDocument(&apos;en&apos;, &apos;okay see you later&apos;, &apos;greetings.bye&apos;);</span><br><span class="line">    manager.addDocument(&apos;en&apos;, &apos;bye for now&apos;, &apos;greetings.bye&apos;);</span><br><span class="line">    manager.addDocument(&apos;en&apos;, &apos;i must go&apos;, &apos;greetings.bye&apos;);</span><br><span class="line">    manager.addDocument(&apos;en&apos;, &apos;hello&apos;, &apos;greetings.hello&apos;);</span><br><span class="line">    manager.addDocument(&apos;en&apos;, &apos;hi&apos;, &apos;greetings.hello&apos;);</span><br><span class="line">    manager.addDocument(&apos;en&apos;, &apos;howdy&apos;, &apos;greetings.hello&apos;);</span><br><span class="line"></span><br><span class="line">    // Train also the NLG</span><br><span class="line">    manager.addAnswer(&apos;en&apos;, &apos;greetings.bye&apos;, &apos;Till next time&apos;);</span><br><span class="line">    manager.addAnswer(&apos;en&apos;, &apos;greetings.bye&apos;, &apos;see you soon!&apos;);</span><br><span class="line">    manager.addAnswer(&apos;en&apos;, &apos;greetings.hello&apos;, &apos;Hey there!&apos;);</span><br><span class="line">    manager.addAnswer(&apos;en&apos;, &apos;greetings.hello&apos;, &apos;Greetings!&apos;);</span><br><span class="line"></span><br><span class="line">    // Train and save the model.</span><br><span class="line"></span><br><span class="line">    await manager.train();</span><br><span class="line">    const response = await manager.process(&apos;en&apos;, &apos;I should go now&apos;);</span><br><span class="line">    console.log(response);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">    render() &#123;</span><br><span class="line">        return (</span><br><span class="line">        &lt;View&gt;&lt;/View&gt;</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>And some info will be shown in the console.</p><h3 id="advanced-step"><a class="markdownIt-Anchor" href="#advanced-step"></a> Advanced step</h3><p>The benefit of using Nlp.js is that it is able to define our own entity, called enum entity. Unlike dialogflow, it always contains the exact matching option which will tell developer which one is detected. To use this, just add some definition like below:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const manager = new NlpManager(&#123; languages: [&apos;en&apos;], forceNER: true &#125;);</span><br><span class="line">manager.addNamedEntityText(</span><br><span class="line">    &apos;categoryIncome&apos;,//name of entity</span><br><span class="line">    i,//entity option</span><br><span class="line">    [lang],//language config</span><br><span class="line">    [i, i.toLowerCase()],//possible match, this one will be automatically expanded to know other cases via different methods. </span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="entity-information-extraction"><a class="markdownIt-Anchor" href="#entity-information-extraction"></a> Entity information extraction</h3><p>With <code>forceNER: true</code>, the entity recognition will be turned on automatically. Each object would have different returning syntax, but a general case is <code>value</code> would contain the information extracted. A sample code to extract key information as follow:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">  generateRelationship(SourceObj) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (SourceObj.entity) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">"number"</span>:</span><br><span class="line">        <span class="keyword">return</span> SourceObj.resolution.subtype + <span class="string">";"</span> + SourceObj.resolution.value</span><br><span class="line">      <span class="keyword">case</span> <span class="string">"ip"</span>:</span><br><span class="line">        <span class="keyword">return</span> SourceObj.resolution.value + <span class="string">";"</span> + SourceObj.resolution.type</span><br><span class="line">      <span class="keyword">case</span> <span class="string">"percentage"</span>:</span><br><span class="line">        <span class="keyword">return</span> SourceObj.resolution.strValue</span><br><span class="line">      <span class="keyword">case</span> <span class="string">"dimension"</span>:</span><br><span class="line">      <span class="keyword">case</span> <span class="string">"age"</span>:</span><br><span class="line">      <span class="keyword">case</span> <span class="string">"currency"</span>:</span><br><span class="line">        <span class="keyword">return</span> SourceObj.resolution.value + <span class="string">" "</span> + SourceObj.resolution.localeUnit</span><br><span class="line">      <span class="keyword">case</span> <span class="string">"date"</span>:</span><br><span class="line">        <span class="keyword">switch</span> (SourceObj.resolution.type) &#123;</span><br><span class="line">          <span class="keyword">case</span> <span class="string">"date"</span>:</span><br><span class="line"><span class="keyword">return</span> SourceObj.resolution.strValue</span><br><span class="line">          <span class="keyword">default</span>:</span><br><span class="line"><span class="keyword">return</span> SourceObj.resolution.timex</span><br><span class="line">        &#125;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">"duration"</span>:</span><br><span class="line">        <span class="keyword">return</span> SourceObj.resolution.values[<span class="number">0</span>].timex + <span class="string">":"</span> + SourceObj.resolution.values[<span class="number">0</span>].value + <span class="string">" Seconds"</span></span><br><span class="line">      <span class="keyword">case</span> <span class="string">"datetime"</span>:</span><br><span class="line">        <span class="keyword">return</span> SourceObj.resolution.values[<span class="number">0</span>].value</span><br><span class="line"></span><br><span class="line">      <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">return</span> SourceObj.resolution.value</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      
      <category domain="https://shaokangjiang.github.io/categories/Expo/">Expo</category>
      
      
      <category domain="https://shaokangjiang.github.io/tags/Expo/">Expo</category>
      
      <category domain="https://shaokangjiang.github.io/tags/Nlp-js/">Nlp.js</category>
      
      
      <comments>https://shaokangjiang.github.io/2021/Nlp-js-in-Expo-usage/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Publication for Financial website</title>
      <link>https://shaokangjiang.github.io/2020/projects/Publication-of-Financial-website/</link>
      <guid>https://shaokangjiang.github.io/2020/projects/Publication-of-Financial-website/</guid>
      <pubDate>Fri, 11 Dec 2020 20:47:06 GMT</pubDate>
      
      <description>&lt;p&gt;This is a serverless web application. By utilizing &lt;a href=&quot;https://workers.cloudflare.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Cloudflare worker&lt;/a&gt;, similar to edge computing, and personal effort, a constraint distributed structure with fast response time and availability is produced. The making of Financial website is actually led by me. The core part, including design, connection between different components, Devop structures, lots of coding, ARIA, are done by me. Other people‚Äôs attribution, including contribution on knowledge passage content, useful tools, quiz generation and verification, are also important. We follow up the Business Agility and use JIRA to do weekly jobs and finish this product in 8 weeks. This is the product being produced based on &lt;a href=&quot;https://shaokangjiang.github.io/2020/Capstone-prooject-design-specification-v0-1/&quot;&gt;Design specification by me&lt;/a&gt;, most parts stay the same as design. This website designed by me contains knowledge from cross area and utilize knowledge including data representation, prediction, interactive design, interacting with phone app and much more. More details regarding to benefits and incomparable feature could be saw below:&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<p>This is a serverless web application. By utilizing <a href="https://workers.cloudflare.com/" target="_blank" rel="noopener">Cloudflare worker</a>, similar to edge computing, and personal effort, a constraint distributed structure with fast response time and availability is produced. The making of Financial website is actually led by me. The core part, including design, connection between different components, Devop structures, lots of coding, ARIA, are done by me. Other people‚Äôs attribution, including contribution on knowledge passage content, useful tools, quiz generation and verification, are also important. We follow up the Business Agility and use JIRA to do weekly jobs and finish this product in 8 weeks. This is the product being produced based on <a href="https://shaokangjiang.github.io/2020/Capstone-prooject-design-specification-v0-1/">Design specification by me</a>, most parts stay the same as design. This website designed by me contains knowledge from cross area and utilize knowledge including data representation, prediction, interactive design, interacting with phone app and much more. More details regarding to benefits and incomparable feature could be saw below:</p><a id="more"></a><h3 id="key-sites"><a class="markdownIt-Anchor" href="#key-sites"></a> Key Sites</h3><p>Wiki Page - It contains the development process and different stage in Business Agile - <a href="https://wiki.capitaltwo.ga/" target="_blank" rel="noopener">https://wiki.capitaltwo.ga/</a></p><p>Main - The site for all components - <a href="https://capitaltwo.ga/" target="_blank" rel="noopener">https://capitaltwo.ga/</a></p><p>Sub product - Financial organization app - Download at <a href="https://capitaltwo.ga/download.html" target="_blank" rel="noopener">https://capitaltwo.ga/download.html</a></p><h3 id="incomparable-features"><a class="markdownIt-Anchor" href="#incomparable-features"></a> Incomparable Features</h3><p>Only the part I am doing is mentioned in the following subsections.</p><h4 id="seo"><a class="markdownIt-Anchor" href="#seo"></a> SEO</h4><h5 id="indexedcrawled"><a class="markdownIt-Anchor" href="#indexedcrawled"></a> Indexed/Crawled</h5><p>Google, Baidu, Yandex, Bing has crawled it.</p><h5 id="sitemaps"><a class="markdownIt-Anchor" href="#sitemaps"></a> Sitemaps</h5><p>Majority of sitemaps will update automatically for search engine to crawl. Major sitemaps are as follows:</p><p><a href="https://capitaltwo.ga/sitemap.xml" target="_blank" rel="noopener">https://capitaltwo.ga/sitemap.xml</a></p><p><a href="https://knowledge.capitaltwo.ga/sitemap.xml" target="_blank" rel="noopener">https://knowledge.capitaltwo.ga/sitemap.xml</a></p><p><a href="https://wiki.capitaltwo.ga/sitemap.xml" target="_blank" rel="noopener">https://wiki.capitaltwo.ga/sitemap.xml</a></p><p>I also push to Bing, Google manually.</p><h5 id="points"><a class="markdownIt-Anchor" href="#points"></a> Points</h5><ul><li>With different search keywords, sitemap, tags</li><li>Site is actually pushed to google search console.</li><li>Also optimize the delivery process. Site is being auto compressed.</li><li>All static is also good in delivery process.</li></ul><h4 id="security"><a class="markdownIt-Anchor" href="#security"></a> Security</h4><h5 id="http3-https"><a class="markdownIt-Anchor" href="#http3-https"></a> Http/3 &amp; Https</h5><p>Http/3 and Https protocols are enabled by default from user to server.</p><h5 id="additional"><a class="markdownIt-Anchor" href="#additional"></a> Additional</h5><p>In addition to the security provided by Https, normal communication, including communication between Cloudflare worker and user, and between different pages is encrypted by AES. And the credential saved to localestorage is also encrypted by AES.</p><h5 id="prevent-misuse"><a class="markdownIt-Anchor" href="#prevent-misuse"></a> Prevent misuse</h5><p>Anything that need to be hidden is encrypted by using AES encryption method.</p><h4 id="user-experience"><a class="markdownIt-Anchor" href="#user-experience"></a> User Experience</h4><h5 id="user-friendly"><a class="markdownIt-Anchor" href="#user-friendly"></a> User friendly</h5><p>All devices have the same experience via web browser. (Such as mobile and tablet, on top of computer support)</p><p>Function page as sample</p><img src="/2020/projects/Publication-of-Financial-website/userF.png"><p>Pages also have a good looking and interactive data representation, like: (taken yearly budgeting tool implemented by me as an example)</p><img src="/2020/projects/Publication-of-Financial-website/uF.png"><h5 id="fast-accessing-speed"><a class="markdownIt-Anchor" href="#fast-accessing-speed"></a> Fast accessing speed</h5><p>With doing a serious jobs, including minification, compression, configuring appropriately, using distributed delivery structure, the site has a good delivery speed in most places around the world.</p><p>Statistic about compression:</p><ul><li><p>Minification</p><ul><li>Main page: 13.44 kb -&gt; 8.35 kb Ratio: 37.82%</li><li>Some pages in wiki and knowledge passage: ratio: around 40-60%</li></ul></li><li><p>60%-70% overall additional compression rate</p><ul><li><p>Main page: 6044 bytes -&gt; 2119 bytes Ratio: 64.94%</p></li><li><p>Wiki and knowledge page: 20561 bytes -&gt; 4311 bytes Ratio: 79.03%</p></li></ul></li><li><p>Speed to access the site: Median - 741ms Average - 460ms</p></li></ul><h5 id="integrate-to-mobile"><a class="markdownIt-Anchor" href="#integrate-to-mobile"></a> Integrate to mobile</h5><p>I realize it is hard to input everything in one time in yearly budgeting tool. So I also made an app to help you organize daily spending. This app is still in developing. See <a href="https://shaokangjiang.github.io/2020/Financial-organization-phone-application/">stage one</a> and <a href="https://shaokangjiang.github.io/2021/projects/Financial-organization-phone-app-stage-2/">two</a> by clicking the links.</p><img src="/2020/projects/Publication-of-Financial-website/phone.jpg"><h5 id="privacy-encryption"><a class="markdownIt-Anchor" href="#privacy-encryption"></a> Privacy &amp; Encryption</h5><p>Data will only be saved in user side. User have control over all data. And no personal identification data is used in this process. Any sensitive and non-sensitive data pass to user is encrypted by using AES-GCM, see more details at <a href="https://shaokangjiang.github.io/2021/AES-Encrypt-and-Decrypt-on-Cloudflare-worker/">AES Encrypt and Decrypt on Cloudflare worker</a></p><p>For people really care about privacy, this site is well configured to allow people from Onion network through Tor visiting the site without exiting the last endpoint. See this image for the detail, this is a feature for cloudflare, I just configured it appropriately.</p><img src="/2020/projects/Publication-of-Financial-website/tor.png"><h5 id="accessibility"><a class="markdownIt-Anchor" href="#accessibility"></a> Accessibility</h5><p>The major page has accessibility feature. Most parts, including main site, knowledge site, wiki page, contain the accessibility feature by using ARIA technology.</p><p>The book version of all knowledge passage could also provide more convenience. And I do also provide multiple format, including epub, mobi, pdf, docx in the <a href="https://capitaltwo.ga/download.html" target="_blank" rel="noopener">download site</a></p><h3 id="design-thoughts-walkthrough"><a class="markdownIt-Anchor" href="#design-thoughts-walkthrough"></a> Design thoughts &amp; walkthrough</h3><p>Only the part I am doing is mentioned in the following subsections.</p><p>And those are other thoughts or final product walkthrough in addition to the previous <a href="https://shaokangjiang.github.io/2020/Capstone-prooject-design-specification-v0-1/">Design specification by me</a></p><h4 id="components-walkthrough"><a class="markdownIt-Anchor" href="#components-walkthrough"></a> Components walkthrough</h4><p>Only parts related to running of thee site is represented, this could be thought as a supplement and detailed implementation of <a href="https://shaokangjiang.github.io/2020/Capstone-prooject-design-specification-v0-1/">Design specification</a>.</p><h5 id="core"><a class="markdownIt-Anchor" href="#core"></a> Core</h5><img src="/2020/projects/Publication-of-Financial-website/glance.png"><h5 id="quiz"><a class="markdownIt-Anchor" href="#quiz"></a> Quiz</h5><p>A quizecode, like 65HquZ8, will be required when user is accessing the <a href="https://capitaltwo.ga/quiz/index.html" target="_blank" rel="noopener">quiz site</a>. Each passage will correspond to one code and the <code>take quiz</code> button in each essay will automatically generate and direct you to the correct page. Quiz is generated by random selection among a huge set of questions. Based on the design, the collision rate is <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>R</mi><mrow><mi>e</mi><mi>v</mi><mi>e</mi><mi>r</mi><mi>y</mi></mrow></msub><mo>=</mo><mfrac><mrow><mn>1</mn></mrow><mrow><msubsup><mi>C</mi><mrow><mn>1</mn><mn>0</mn></mrow><mrow><mn>6</mn><mn>0</mn></mrow></msubsup></mrow></mfrac><mo>=</mo><mfrac><mrow><mn>1</mn></mrow><mrow><mn>7</mn><mn>5</mn><mo separator="true">,</mo><mn>3</mn><mn>9</mn><mn>4</mn><mo separator="true">,</mo><mn>0</mn><mn>2</mn><mn>7</mn><mo separator="true">,</mo><mn>5</mn><mn>6</mn><mn>6</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">R_{every}=\frac{1}{C^{60}_{10}}=\frac{1}{75,394,027,566}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.845108em"></span><span class="strut bottom" style="height:1.411548em;vertical-align:-.56644em"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:.00773em">R</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.00773em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:.03588em">v</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:.02778em">r</span><span class="mord mathit" style="margin-right:.03588em">y</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mrel">=</span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:.37358em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:.07153em">C</span><span class="vlist"><span style="top:.27551428571428577em;margin-left:-.07153em;margin-right:.07142857142857144em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">1</span><span class="mord mathrm">0</span></span></span></span><span style="top:-.34480000000000005em;margin-right:.07142857142857144em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">6</span><span class="mord mathrm">0</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span></span></span></span><span style="top:-.22999999999999998em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-.394em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mrel">=</span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:.345em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">7</span><span class="mord mathrm">5</span><span class="mpunct">,</span><span class="mord mathrm">3</span><span class="mord mathrm">9</span><span class="mord mathrm">4</span><span class="mpunct">,</span><span class="mord mathrm">0</span><span class="mord mathrm">2</span><span class="mord mathrm">7</span><span class="mpunct">,</span><span class="mord mathrm">5</span><span class="mord mathrm">6</span><span class="mord mathrm">6</span></span></span></span><span style="top:-.22999999999999998em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-.394em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span>, which is super low.</p><p>The running and basic verification process could be saw below:</p><img src="/2020/projects/Publication-of-Financial-website/quiz.png"><h5 id="pointing-system"><a class="markdownIt-Anchor" href="#pointing-system"></a> Pointing system</h5><p>The design and running of the pointing system, like you get to finish one task before accessing the next one. Verification is done by passing a information that doesn‚Äôt contain any privacy information to cloudflare worker. And all information is encrypted by using a 256-bit keygen with AES-GCM</p><img src="/2020/projects/Publication-of-Financial-website/point.png"><h4 id="developing-procedure"><a class="markdownIt-Anchor" href="#developing-procedure"></a> Developing procedure</h4><h5 id="cicd"><a class="markdownIt-Anchor" href="#cicd"></a> CI/CD</h5><p>Most of this is done by using github actions and it make the website and the financial organization app always available to user. And different channels could provide people with stable or preview version. The detailed tools used are:</p><p><strong>Financial organization app:</strong> Expo + Github action + Expo page</p><p><strong>Passages&amp;Wiki:</strong> Hexo + bash + Github actions</p><p><strong>Cloudflare worker/Serverless server:</strong> Wrangler + Github actions</p><h5 id="devops-version-control"><a class="markdownIt-Anchor" href="#devops-version-control"></a> Devops &amp; version control</h5><p>I realize the entire process is actually following the Devops toolchain and most of steps are auto. By using those features, the website is always available to the public. The tool chain I designed and using was:</p><img src="/2020/projects/Publication-of-Financial-website/Devops.jpg"><p>In the later, more tools, like expo, gitbook, are added. But they are a little bit away of the main part of the site.</p><p>For each part, a strict version control is also implemented by using github so that any wrong stuff will be published only when it is well tested.</p><img src="/2020/projects/Publication-of-Financial-website/versionControl.jpg"><h5 id="easy-to-maintain"><a class="markdownIt-Anchor" href="#easy-to-maintain"></a> Easy to maintain</h5><p>A lot of stuff are generated automatically, this provides other people a chance to focus more on the content instead of the site. For example, here is the script to generate passages site and the published knowledge passage book.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line"><span class="built_in">cd</span> <span class="built_in">source</span>/_posts/</span><br><span class="line">git pull</span><br><span class="line">book sm</span><br><span class="line">git commit -am <span class="string">"update"</span></span><br><span class="line">git push</span><br><span class="line"><span class="built_in">cd</span> ../../</span><br><span class="line">gitbook epub ./<span class="built_in">source</span>/_posts ./<span class="built_in">source</span>/book.epub</span><br><span class="line">gitbook mobi ./<span class="built_in">source</span>/_posts ./<span class="built_in">source</span>/book.mobi</span><br><span class="line">pandoc ./<span class="built_in">source</span>/book.epub -o ./<span class="built_in">source</span>/book.pdf --pdf-engine=xelatex -V CJKmainfont=<span class="string">"AR PL UKai CN"</span> -V geometry:margin=1in -V fontsize=18pt</span><br><span class="line">pandoc ./<span class="built_in">source</span>/book.epub -o ./<span class="built_in">source</span>/book.docx</span><br><span class="line">hexo generate</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure><h3 id="my-additional-role"><a class="markdownIt-Anchor" href="#my-additional-role"></a> My additional role</h3><p>In addition to the previous mentioned works. I adjust the schedule, arrange everyone‚Äôs working and send out recommended work weekly. Provide personal support via one on one chats. Actually, it is to manage the entire work and ensure the workload of each person each week is less than 6 hours, which equals to 2 credits.</p><h3 id="further-direction"><a class="markdownIt-Anchor" href="#further-direction"></a> Further direction</h3><ol><li>Connect with certain publication, the book reader could have a different quiz and user is able to scan the QR code to take it.</li><li>Increase validation &amp; security level to reduce possibility of being attacked</li></ol><h3 id="credits"><a class="markdownIt-Anchor" href="#credits"></a> Credits</h3><div style="overflow-x:auto"><table width="253"><tbody><tr><td width="107">Professor</td><td width="146">Amber Field</td></tr><tr><td width="107">&nbsp;</td><td width="146">&nbsp;</td></tr><tr><td rowspan="3" width="107">Product Owner (Random order)</td><td width="146">Caroline Clancy</td></tr><tr><td width="146">Madeline Janick</td></tr><tr><td width="146">Mayank Katwal</td></tr><tr><td width="107">&nbsp;</td><td width="146">&nbsp;</td></tr><tr><td rowspan="4" width="107">Developers (Random order)</td><td width="146">Shaokang Jiang</td></tr><tr><td width="146">Sai Teja Chokkarapu</td></tr><tr><td width="146">Ritika Mittal</td></tr><tr><td width="146">Peter Daly</td></tr><tr><td width="107">&nbsp;</td><td width="146">&nbsp;</td></tr><tr><td width="107">Scrum Master</td><td width="146">Shaokang Jiang</td></tr><tr><td width="107">&nbsp;</td><td width="146">&nbsp;</td></tr><tr><td width="107">Product Proxy</td><td width="146">Ritika Mittal</td></tr><tr><td width="107">&nbsp;</td><td width="146">&nbsp;</td></tr><tr><td width="107">Designers</td><td width="146">Shaokang Jiang</td></tr><tr><td colspan="2" width="253">Part of slides come from online source.</td></tr><tr><td colspan="2" width="253">All source code is granted based on MIT License. And source code is available on Github</td></tr><tr><td colspan="2" width="253">This slide is designed for non-commercial use</td></tr></tbody></table></div>> Even though only the work of me is mentioned, other people's work are important and valuable as well.]]></content:encoded>
      
      
      <category domain="https://shaokangjiang.github.io/categories/website/">website</category>
      
      
      <category domain="https://shaokangjiang.github.io/tags/MIP/">MIP</category>
      
      <category domain="https://shaokangjiang.github.io/tags/Expo/">Expo</category>
      
      <category domain="https://shaokangjiang.github.io/tags/Nlp-js/">Nlp.js</category>
      
      <category domain="https://shaokangjiang.github.io/tags/Website/">Website</category>
      
      <category domain="https://shaokangjiang.github.io/tags/JS/">JS</category>
      
      <category domain="https://shaokangjiang.github.io/tags/ejs/">ejs</category>
      
      <category domain="https://shaokangjiang.github.io/tags/HTML/">HTML</category>
      
      
      <comments>https://shaokangjiang.github.io/2020/projects/Publication-of-Financial-website/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>A dialog flow app</title>
      <link>https://shaokangjiang.github.io/2020/a-dialog-flow-app/</link>
      <guid>https://shaokangjiang.github.io/2020/a-dialog-flow-app/</guid>
      <pubDate>Mon, 07 Dec 2020 12:57:08 GMT</pubDate>
      
      <description>&lt;p&gt;Dialogflow provided a easy to configured way to integrate the voice interaction with your application. By using their sample code, it is easy to implement and deploy to multiple different platform. But it also have problems such that wrong information matching, can not define intent/entity on the go, privacy issue, and etc. This is a course assignment done solely by me. More details in below:&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<p>Dialogflow provided a easy to configured way to integrate the voice interaction with your application. By using their sample code, it is easy to implement and deploy to multiple different platform. But it also have problems such that wrong information matching, can not define intent/entity on the go, privacy issue, and etc. This is a course assignment done solely by me. More details in below:</p><a id="more"></a><p>This one requires the creation of dialogflow project on their official site by creating intent and entities. And in the local side, just create a locale server and enable webhook on the dialogflow website.</p><h3 id="key-terms"><a class="markdownIt-Anchor" href="#key-terms"></a> Key terms:</h3><p><code>agent</code> This is a nearly global variable, which contains the information user could get and will send to the server. It needs to be initialized in the beginning of the setting:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">app.post(<span class="string">'/'</span>, express.json(), (req, res) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> agent = <span class="keyword">new</span> WebhookClient(&#123; <span class="attr">request</span>: req, <span class="attr">response</span>: res &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> intentMap = <span class="keyword">new</span> <span class="built_in">Map</span>() <span class="comment">//and using an intentMap to match the intent and function to execute. like below: </span></span><br><span class="line">  intentMap.set(<span class="string">'Default Welcome Intent'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) =&gt; </span>&#123;&#125;)<span class="comment">//Default Welcome Intent is the name</span></span><br><span class="line">  agent.handleRequest(intentMap)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>agent.add(message)</code> method to add return information.</p><blockquote><p><strong>Caution:</strong> In this method, multiple times of calling will concat information instead of random choosing and replying.</p></blockquote><p><code>agent.parameters.paraName</code> get access to the detected entity (named as <code>paraName</code>).</p><blockquote><p><strong>Caution:</strong> <code>paraName</code> might return a string that is totally not in your defined entity list. This one provides convenience but also loss the precise. So, be sure to have a good program that is able to handle those stuff correctly</p><p>In my case, there is a entity list defined as [cloth, dress, hat, ‚Ä¶] (no this) and dialogflow detect the parameter with <code>this</code> as the value.</p></blockquote><p><code>agent.query</code> the entire sentence user said</p><p>There are other advanced stuff like <code>addContext()</code>, etc‚Ä¶ Those four are enough to build an application.</p><h3 id="a-complete-simple-sample"><a class="markdownIt-Anchor" href="#a-complete-simple-sample"></a> A complete simple sample:</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">app.post(<span class="string">'/'</span>, express.json(), (req, res) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> agent = <span class="keyword">new</span> WebhookClient(&#123; <span class="attr">request</span>: req, <span class="attr">response</span>: res &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> intentMap = <span class="keyword">new</span> <span class="built_in">Map</span>() <span class="comment">//and using an intentMap to match the intent and function to execute. like below: </span></span><br><span class="line">  intentMap.set(<span class="string">'Default Welcome Intent'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) =&gt; </span>&#123;</span><br><span class="line">                agent.add(<span class="string">"aaa"</span> + <span class="string">":user words:"</span> + agent.query)</span><br><span class="line">                &#125;)<span class="comment">//Default Welcome Intent is the name</span></span><br><span class="line">  agent.handleRequest(intentMap)</span><br><span class="line">&#125;</span><br><span class="line">app.listen(process.env.PORT || <span class="number">8080</span>)</span><br></pre></td></tr></table></figure><h3 id="discussion"><a class="markdownIt-Anchor" href="#discussion"></a> Discussion</h3><h4 id="pros"><a class="markdownIt-Anchor" href="#pros"></a> Pros:</h4><ol><li>Super easy to use, a two hour learning is enough to build an application</li><li>Have a lot of sample</li><li>Have a more powerful training platform.</li><li>Can easily integrate into platforms and deliver to user.</li></ol><h4 id="cons"><a class="markdownIt-Anchor" href="#cons"></a> Cons:</h4><ol><li>Dialogflow provided a easy to configured way to integrate the voice interaction with most applications. But their compatibility focuses on google platform. Platform like <code>Expo</code> gets to eject to integrate with it.</li><li>Dialogflow will time out after 5 seconds, which means the server need to run everything super fast. But this is hard in some cases, when network are not good, or in some network limited area.</li><li>Entity extraction might match wrong and really broad keyword that backend do not know how to prevent, like match <code>this</code> with <code>dress</code>, personally thinking <code>Nlp.js</code> is a better tool, refer to <a href="https://shaokangjiang.github.io/2021/Nlp-js-in-Expo-usage/">Nlp.js in Expo usage</a> to see more about implementing on it.</li><li>Possible privacy issue.</li><li>It is impossible to define intent/entity based on user needs. Even though one model could work for majority people, personalization could make user feel much more comfortable to certain people. And this could eliminate training phrases as well.</li></ol><h3 id="entire-source-code"><a class="markdownIt-Anchor" href="#entire-source-code"></a> Entire source code:</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="keyword">const</span> &#123; WebhookClient &#125; = <span class="built_in">require</span>(<span class="string">'dialogflow-fulfillment'</span>)</span><br><span class="line"><span class="keyword">const</span> app = express()</span><br><span class="line"><span class="keyword">const</span> fetch = <span class="built_in">require</span>(<span class="string">'node-fetch'</span>)</span><br><span class="line"><span class="keyword">const</span> base64 = <span class="built_in">require</span>(<span class="string">'base-64'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> username = <span class="string">""</span>;</span><br><span class="line"><span class="keyword">let</span> password = <span class="string">""</span>;</span><br><span class="line"><span class="keyword">let</span> token = <span class="string">""</span>;</span><br><span class="line"><span class="keyword">let</span> products;</span><br><span class="line"><span class="keyword">let</span> filtered;</span><br><span class="line"></span><br><span class="line">USE_LOCAL_ENDPOINT = <span class="literal">false</span>;</span><br><span class="line"><span class="comment">// set this flag to true if you want to use a local endpoint</span></span><br><span class="line"><span class="comment">// set this flag to false if you want to use the online endpoint</span></span><br><span class="line">ENDPOINT_URL = <span class="string">""</span></span><br><span class="line"><span class="keyword">if</span> (USE_LOCAL_ENDPOINT) &#123;</span><br><span class="line">  ENDPOINT_URL = <span class="string">"http://127.0.0.1:5000"</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  ENDPOINT_URL = <span class="string">"XXX"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fetch(ENDPOINT_URL + <span class="string">'/products'</span>).then(<span class="function"><span class="params">res</span> =&gt;</span> res.json()).then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> data.products) &#123;</span><br><span class="line">    fetch(ENDPOINT_URL + <span class="string">'/products/'</span> + i.id + <span class="string">"/tags"</span>).then(<span class="function"><span class="params">res</span> =&gt;</span> res.json()).then(<span class="function"><span class="params">data1</span> =&gt;</span> &#123;</span><br><span class="line">      i[<span class="string">"tags"</span>] = data1.tags;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  products = data</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">navigation</span>(<span class="params">back, dialogflow, page</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> request;</span><br><span class="line">  <span class="keyword">if</span> (page === <span class="literal">null</span>) &#123;</span><br><span class="line">    request = &#123;</span><br><span class="line">      method: <span class="string">'PUT'</span>,</span><br><span class="line">      headers: &#123;</span><br><span class="line">        <span class="string">'Content-Type'</span>: <span class="string">'application/json'</span>,</span><br><span class="line">        <span class="string">'x-access-token'</span>: token</span><br><span class="line">      &#125;,</span><br><span class="line">      body: <span class="built_in">JSON</span>.stringify(&#123;</span><br><span class="line">        <span class="string">"back"</span>: back,</span><br><span class="line">        <span class="string">"dialogflowUpdated"</span>: dialogflow</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    request = &#123;</span><br><span class="line">      method: <span class="string">'PUT'</span>,</span><br><span class="line">      headers: &#123;</span><br><span class="line">        <span class="string">'Content-Type'</span>: <span class="string">'application/json'</span>,</span><br><span class="line">        <span class="string">'x-access-token'</span>: token</span><br><span class="line">      &#125;,</span><br><span class="line">      body: <span class="built_in">JSON</span>.stringify(&#123;</span><br><span class="line">        <span class="string">"back"</span>: back,</span><br><span class="line">        <span class="string">"dialogflowUpdated"</span>: dialogflow,</span><br><span class="line">        <span class="string">"page"</span>: <span class="string">"/"</span> + page</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> serverReturn1 = <span class="keyword">await</span> fetch(ENDPOINT_URL + <span class="string">'/application'</span>, request)</span><br><span class="line">  <span class="keyword">const</span> serverResponse1 = <span class="keyword">await</span> serverReturn1.json()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">getToken</span>(<span class="params">message</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> request = &#123;</span><br><span class="line">    method: <span class="string">'GET'</span>,</span><br><span class="line">    headers: &#123;</span><br><span class="line">      <span class="string">'Content-Type'</span>: <span class="string">'application/json'</span>,</span><br><span class="line">      <span class="string">'Authorization'</span>: <span class="string">'Basic '</span> + base64.encode(username + <span class="string">':'</span> + password)</span><br><span class="line">    &#125;,</span><br><span class="line">    redirect: <span class="string">'follow'</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> serverReturn = <span class="keyword">await</span> fetch(ENDPOINT_URL + <span class="string">'/login'</span>, request)</span><br><span class="line">  <span class="keyword">if</span> (serverReturn.ok) &#123;</span><br><span class="line">    <span class="keyword">const</span> serverResponse = <span class="keyword">await</span> serverReturn.json()</span><br><span class="line">    token = serverResponse.token</span><br><span class="line"></span><br><span class="line">    request = &#123;</span><br><span class="line">      method: <span class="string">'PUT'</span>,</span><br><span class="line">      headers: &#123;</span><br><span class="line">        <span class="string">'Content-Type'</span>: <span class="string">'application/json'</span>,</span><br><span class="line">        <span class="string">'x-access-token'</span>: token</span><br><span class="line">      &#125;,</span><br><span class="line">      body: <span class="built_in">JSON</span>.stringify(&#123;</span><br><span class="line">        <span class="string">"back"</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="string">"dialogflowUpdated"</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">"page"</span>: <span class="string">"/"</span> + username</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> serverReturn2 = <span class="keyword">await</span> fetch(ENDPOINT_URL + <span class="string">'/application/messages'</span>, &#123;</span><br><span class="line">      method: <span class="string">'DELETE'</span>,</span><br><span class="line">      headers: &#123;</span><br><span class="line">        <span class="string">'x-access-token'</span>: token</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    serverReturn2.json()</span><br><span class="line"></span><br><span class="line">    addUserMessage(message);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> serverReturn1 = <span class="keyword">await</span> fetch(ENDPOINT_URL + <span class="string">'/application'</span>, request)</span><br><span class="line">    <span class="keyword">const</span> serverResponse1 = <span class="keyword">await</span> serverReturn1.json()</span><br><span class="line"></span><br><span class="line">    <span class="comment">//console.log(products)</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> token;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    username = <span class="string">""</span>;</span><br><span class="line">    password = <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"fail"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">addUserMessage</span>(<span class="params">user</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> serverReturn2 = <span class="keyword">await</span> fetch(ENDPOINT_URL + <span class="string">'/application/messages'</span>, &#123;</span><br><span class="line">    method: <span class="string">'POST'</span>,</span><br><span class="line">    headers: &#123;</span><br><span class="line">      <span class="string">'Content-Type'</span>: <span class="string">'application/json'</span>,</span><br><span class="line">      <span class="string">'x-access-token'</span>: token</span><br><span class="line">    &#125;,</span><br><span class="line">    body: <span class="built_in">JSON</span>.stringify(&#123;</span><br><span class="line">      <span class="string">"isUser"</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="string">"date"</span>: <span class="keyword">new</span> <span class="built_in">Date</span>().toISOString(),</span><br><span class="line">      <span class="string">"text"</span>: user</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">await</span> serverReturn2.json()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">addAgentMessage</span>(<span class="params">agent</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> serverReturn2 = <span class="keyword">await</span> fetch(ENDPOINT_URL + <span class="string">'/application/messages'</span>, &#123;</span><br><span class="line">    method: <span class="string">'POST'</span>,</span><br><span class="line">    headers: &#123;</span><br><span class="line">      <span class="string">'Content-Type'</span>: <span class="string">'application/json'</span>,</span><br><span class="line">      <span class="string">'x-access-token'</span>: token</span><br><span class="line">    &#125;,</span><br><span class="line">    body: <span class="built_in">JSON</span>.stringify(&#123;</span><br><span class="line">      <span class="string">"isUser"</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="string">"date"</span>: <span class="keyword">new</span> <span class="built_in">Date</span>().toISOString(),</span><br><span class="line">      <span class="string">"text"</span>: agent</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">await</span> serverReturn2.json()</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/'</span>, (req, res) =&gt; res.send(<span class="string">'online'</span>))</span><br><span class="line">app.post(<span class="string">'/'</span>, express.json(), (req, res) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> agent = <span class="keyword">new</span> WebhookClient(&#123; <span class="attr">request</span>: req, <span class="attr">response</span>: res &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">welcome</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    agent.add(<span class="string">'Webhook works!'</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(ENDPOINT_URL)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">login</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//console.log(products.products[0].tags);</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (token.localeCompare(<span class="string">""</span>) !== <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">await</span> addUserMessage(agent.query);</span><br><span class="line">      agent.add(<span class="string">"You have logged in as "</span> + username);</span><br><span class="line">      <span class="keyword">await</span> addAgentMessage(<span class="string">"You have logged in as "</span> + username);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// You need to set this from `username` entity that you declare in DialogFlow</span></span><br><span class="line">    username = agent.parameters.username;</span><br><span class="line">    <span class="comment">// You need to set this from password entity that you declare in DialogFlow</span></span><br><span class="line">    password = agent.parameters.password;</span><br><span class="line">    <span class="keyword">await</span> getToken(agent.query);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (token.localeCompare(<span class="string">""</span>) === <span class="number">0</span>) &#123;</span><br><span class="line">      agent.add(<span class="string">"login failed, try again with login"</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      agent.add(<span class="string">"Successfully logged in as "</span> + username);</span><br><span class="line">      addAgentMessage(<span class="string">"Successfully logged in as "</span> + username);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">loginStatus</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (token.localeCompare(<span class="string">""</span>) === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">Math</span>.random() &gt; <span class="number">0.5</span>)</span><br><span class="line">        agent.add(<span class="string">"You are not logged in. "</span>);</span><br><span class="line">      <span class="keyword">else</span> agent.add(<span class="string">"Please log in at first"</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">await</span> addUserMessage(agent.query);</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">Math</span>.random() &lt; <span class="number">0.3</span>) &#123;</span><br><span class="line">        agent.add(<span class="string">"You are "</span> + username);</span><br><span class="line">        <span class="keyword">await</span> addAgentMessage(<span class="string">"You are "</span> + username);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">Math</span>.random() &lt; <span class="number">0.6</span>) &#123;</span><br><span class="line">        agent.add(<span class="string">"You username is "</span> + username);</span><br><span class="line">        <span class="keyword">await</span> addAgentMessage(<span class="string">"You username is "</span> + username);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        agent.add(<span class="string">"Hello, "</span> + username);</span><br><span class="line">        <span class="keyword">await</span> addAgentMessage(<span class="string">"Hello, "</span> + username);</span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">queryCategories</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (token.localeCompare(<span class="string">""</span>) === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="comment">//ensure user is logged in</span></span><br><span class="line">      agent.add(<span class="string">"Invalid visit, please login first"</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//console.log(agent.parameters.category);</span></span><br><span class="line">    <span class="keyword">await</span> addUserMessage(agent.query);</span><br><span class="line">    <span class="keyword">await</span> navigation(<span class="literal">false</span>, <span class="literal">true</span>, username + <span class="string">"/"</span> + agent.parameters.category);</span><br><span class="line">    filtered = [];</span><br><span class="line">    <span class="keyword">let</span> k = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> products.products) &#123;</span><br><span class="line">      <span class="keyword">if</span> (i.category.localeCompare(agent.parameters.category) === <span class="number">0</span>) &#123;</span><br><span class="line">        filtered.push(i);</span><br><span class="line">        k.push(i.name)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    agent.add(<span class="string">"I found "</span> + k.length === <span class="number">0</span> ? <span class="string">"nothing"</span> : k.toString() + <span class="string">" belongs to "</span> + agent.parameters.category)</span><br><span class="line">    addAgentMessage(<span class="string">"I found "</span> + k.length === <span class="number">0</span> ? <span class="string">"nothing"</span> : k.toString() + <span class="string">" belongs to "</span> + agent.parameters.category);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">filterTags</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (token.localeCompare(<span class="string">""</span>) === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="comment">//ensure user is logged in</span></span><br><span class="line">      agent.add(<span class="string">"Invalid visit, please login first"</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">await</span> addUserMessage(agent.query)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> serve = <span class="keyword">await</span> fetch(ENDPOINT_URL + <span class="string">'/application/tags/'</span> + agent.parameters.tags, &#123;</span><br><span class="line">      method: <span class="string">'POST'</span>,</span><br><span class="line">      headers: &#123;</span><br><span class="line">        <span class="string">'x-access-token'</span>: token</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">await</span> serve.json()</span><br><span class="line">    <span class="keyword">if</span> (serve.ok) &#123;</span><br><span class="line">      <span class="keyword">let</span> k = <span class="string">" "</span>;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> filtered) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i.tags.indexOf(agent.parameters.tags) !== <span class="number">-1</span>) &#123;</span><br><span class="line">          k += i.name + <span class="string">", "</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      agent.add(<span class="string">"Successfully add tag "</span> + agent.parameters.tags + <span class="string">", filtered items: "</span> + k)<span class="comment">//need filter and return something here</span></span><br><span class="line">      addAgentMessage(<span class="string">"Successfully add tag "</span> + agent.parameters.tags + <span class="string">", filtered items: "</span> + k)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      agent.add(<span class="string">"Unknown problem happened"</span>);</span><br><span class="line">      addAgentMessage(<span class="string">"Unknown problem happened"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">clearTags</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (token.localeCompare(<span class="string">""</span>) === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="comment">//ensure user is logged in</span></span><br><span class="line">      agent.add(<span class="string">"Invalid visit, please login first"</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">await</span> addUserMessage(agent.query)</span><br><span class="line">    <span class="keyword">let</span> serve = <span class="keyword">await</span> fetch(ENDPOINT_URL + <span class="string">'/application/tags'</span>, &#123;</span><br><span class="line">      method: <span class="string">'DELETE'</span>,</span><br><span class="line">      headers: &#123;</span><br><span class="line">        <span class="string">'x-access-token'</span>: token</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">await</span> serve.json()</span><br><span class="line">    <span class="keyword">if</span> (serve.ok) &#123;</span><br><span class="line">      <span class="keyword">let</span> k = <span class="string">" "</span>;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> filtered) &#123;</span><br><span class="line">        k += i.name + <span class="string">", "</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      agent.add(<span class="string">"Successfully cleared all tags filters, current items are "</span> + k)</span><br><span class="line">      addAgentMessage(<span class="string">"Successfully cleared all tags filters, current items are "</span> + k)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      agent.add(<span class="string">"Unknown problem happened"</span>);</span><br><span class="line">      addAgentMessage(<span class="string">"Unknown problem happened"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">queryCategoryTag</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (token.localeCompare(<span class="string">""</span>) === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="comment">//ensure user is logged in</span></span><br><span class="line">      agent.add(<span class="string">"Invalid visit, please login first"</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">await</span> addUserMessage(agent.query)</span><br><span class="line">    <span class="keyword">let</span> serve = <span class="keyword">await</span> fetch(ENDPOINT_URL + <span class="string">'/application/tags'</span>, &#123;</span><br><span class="line">      method: <span class="string">'DELETE'</span>,</span><br><span class="line">      headers: &#123;</span><br><span class="line">        <span class="string">'x-access-token'</span>: token</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">await</span> serve.json()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (serve.ok) &#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">await</span> navigation(<span class="literal">false</span>, <span class="literal">true</span>, username + <span class="string">"/"</span> + agent.parameters.category);</span><br><span class="line">      filtered = [];</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> products.products) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i.category.localeCompare(agent.parameters.category) === <span class="number">0</span>) &#123;</span><br><span class="line">          filtered.push(i);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">let</span> serve1 = <span class="keyword">await</span> fetch(ENDPOINT_URL + <span class="string">'/application/tags/'</span> + agent.parameters.tags, &#123;</span><br><span class="line">        method: <span class="string">'POST'</span>,</span><br><span class="line">        headers: &#123;</span><br><span class="line">          <span class="string">'x-access-token'</span>: token</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="keyword">await</span> serve1.json()</span><br><span class="line">      <span class="keyword">if</span> (serve1.ok) &#123;</span><br><span class="line">        <span class="keyword">let</span> k = <span class="string">" "</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> filtered) &#123;</span><br><span class="line">          <span class="keyword">if</span> (i.tags.indexOf(agent.parameters.tags) !== <span class="number">-1</span>) &#123;</span><br><span class="line">            k += i.name + <span class="string">", "</span>;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        agent.add(<span class="string">"Successfully add tag "</span> + agent.parameters.tags + <span class="string">", filtered items: "</span> + k)<span class="comment">//need filter and return something here</span></span><br><span class="line">        addAgentMessage(<span class="string">"Successfully add tag "</span> + agent.parameters.tags + <span class="string">", filtered items: "</span> + k)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        agent.add(<span class="string">"Unknown problem happened"</span>);</span><br><span class="line">        addAgentMessage(<span class="string">"Unknown problem happened"</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      agent.add(<span class="string">"Unknown problem happened"</span>);</span><br><span class="line">      addAgentMessage(<span class="string">"Unknown problem happened"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">goBack</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (token.localeCompare(<span class="string">""</span>) === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="comment">//ensure user is logged in</span></span><br><span class="line">      agent.add(<span class="string">"Invalid visit, please login first"</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">await</span> addUserMessage(agent.query)</span><br><span class="line">    <span class="keyword">await</span> navigation(<span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">null</span>);</span><br><span class="line">    agent.add(<span class="string">"Go back successfully"</span>);</span><br><span class="line">    <span class="keyword">await</span> addAgentMessage(<span class="string">"Go back successfully"</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">productRating</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (token.localeCompare(<span class="string">""</span>) === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="comment">//ensure user is logged in</span></span><br><span class="line">      agent.add(<span class="string">"Invalid visit, please login first"</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">await</span> addUserMessage(agent.query);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> id;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> products.products) &#123;</span><br><span class="line">      <span class="keyword">if</span> (agent.parameters.product.indexOf(i.name) !== <span class="number">-1</span>) &#123;</span><br><span class="line">        id = i.id;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> serve = <span class="keyword">await</span> fetch(ENDPOINT_URL + <span class="string">'/products/'</span> + id + <span class="string">"/reviews"</span>)</span><br><span class="line">    <span class="keyword">let</span> reviews = <span class="keyword">await</span> serve.json()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (reviews.reviews.length !== <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="comment">//review exist</span></span><br><span class="line">      <span class="keyword">let</span> reviewText = [];</span><br><span class="line">      <span class="keyword">let</span> rating = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> reviews.reviews) &#123;</span><br><span class="line">        rating += i.stars;</span><br><span class="line">        <span class="keyword">if</span> (i.text.localeCompare(<span class="string">"&lt;Product Review Text&gt;"</span>) !== <span class="number">0</span>) &#123;</span><br><span class="line">          reviewText.push(<span class="string">"Title: "</span> + i.title)</span><br><span class="line">          reviewText.push(<span class="string">"Text: "</span> + i.text)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      agent.add(<span class="string">"This items has the average rating of "</span> + (rating / reviews.reviews.length).toFixed(<span class="number">2</span>) + <span class="string">". It also contains comments of the following: "</span> + reviewText.toString())</span><br><span class="line">      addAgentMessage(<span class="string">"This items has the average rating of "</span> + (rating / reviews.reviews.length).toFixed(<span class="number">2</span>) + <span class="string">". It also contains comments of the following: "</span> + reviewText.toString())</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      agent.add(<span class="string">"Review do not exist"</span>)</span><br><span class="line">      addAgentMessage(<span class="string">"Review do not exist"</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">viewProduct</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (token.localeCompare(<span class="string">""</span>) === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="comment">//ensure user is logged in</span></span><br><span class="line">      agent.add(<span class="string">"Invalid visit, please login first"</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">await</span> addUserMessage(agent.query);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> id;</span><br><span class="line">    <span class="keyword">let</span> catego;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> products.products) &#123;</span><br><span class="line">      <span class="keyword">if</span> (agent.parameters.product.toLocaleLowerCase().indexOf(i.name.toLocaleLowerCase()) !== <span class="number">-1</span>) &#123;</span><br><span class="line">        id = i.id;</span><br><span class="line">        catego = i.category;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> serve = <span class="keyword">await</span> fetch(ENDPOINT_URL + <span class="string">'/products/'</span> + id + <span class="string">"/reviews"</span>)</span><br><span class="line">    <span class="keyword">let</span> reviews = <span class="keyword">await</span> serve.json()</span><br><span class="line"></span><br><span class="line">    navigation(<span class="literal">false</span>, <span class="literal">true</span>, username + <span class="string">"/"</span> + catego + <span class="string">"/products/"</span> + id)</span><br><span class="line">    agent.add(<span class="string">"Navigate you to "</span> + agent.parameters.product + <span class="string">"page"</span>)</span><br><span class="line">    addAgentMessage(<span class="string">"Navigate you to "</span> + agent.parameters.product + <span class="string">"page"</span>)</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">addProduct</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (token.localeCompare(<span class="string">""</span>) === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="comment">//ensure user is logged in</span></span><br><span class="line">      agent.add(<span class="string">"Invalid visit, please login first"</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">await</span> addUserMessage(agent.query);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> id = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (agent.parameters.product.localeCompare(<span class="string">""</span>) === <span class="number">0</span> || agent.parameters.product.toLocaleLowerCase().indexOf(<span class="string">"product"</span>) !== <span class="number">-1</span>) &#123;</span><br><span class="line">      <span class="comment">//get info from page</span></span><br><span class="line">      <span class="keyword">const</span> serverReturn2 = <span class="keyword">await</span> fetch(ENDPOINT_URL + <span class="string">'/application/'</span>, &#123;</span><br><span class="line">        method: <span class="string">'GET'</span>,</span><br><span class="line">        headers: &#123;</span><br><span class="line">          <span class="string">'x-access-token'</span>: token</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line"></span><br><span class="line">      <span class="comment">//page field</span></span><br><span class="line">      <span class="keyword">let</span> result = <span class="keyword">await</span> serverReturn2.json()</span><br><span class="line">      result = result.page.split(<span class="string">"/"</span>);</span><br><span class="line">      <span class="keyword">if</span> (result.length &gt; <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (result[result.length - <span class="number">2</span>].localeCompare(<span class="string">"products"</span>) === <span class="number">0</span>) &#123;</span><br><span class="line">          <span class="comment">//normal add</span></span><br><span class="line">          id = <span class="built_in">parseInt</span>(result[result.length - <span class="number">1</span>]);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          agent.add(<span class="string">"You are not in a product page"</span>);</span><br><span class="line">          addAgentMessage(<span class="string">"You are not in a product page"</span>);</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        agent.add(<span class="string">"You are not in a product page"</span>);</span><br><span class="line">        addAgentMessage(<span class="string">"You are not in a product page"</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> toFind = agent.parameters.product.toLocaleLowerCase();</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> products.products) &#123;</span><br><span class="line">        <span class="keyword">let</span> tocompare = i.name.toLocaleLowerCase();</span><br><span class="line">        <span class="keyword">if</span> (toFind.indexOf(tocompare) !== <span class="number">-1</span>) &#123;</span><br><span class="line">          id = i.id;</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (id === <span class="literal">null</span>) &#123;</span><br><span class="line">      agent.add(<span class="string">"Product name has problem"</span>);</span><br><span class="line">      addAgentMessage(<span class="string">"Product name has problem"</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//adding</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> serve = <span class="keyword">await</span> fetch(ENDPOINT_URL + <span class="string">'/application/products/'</span> + id, &#123;</span><br><span class="line">      method: <span class="string">'POST'</span>,</span><br><span class="line">      headers: &#123;</span><br><span class="line">        <span class="string">'Content-Type'</span>: <span class="string">'application/json'</span>,</span><br><span class="line">        <span class="string">'x-access-token'</span>: token</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//page field</span></span><br><span class="line">    <span class="keyword">await</span> serve.json()</span><br><span class="line">    <span class="keyword">if</span> (serve.ok) &#123;</span><br><span class="line">      agent.add(<span class="string">"Successfully added 1 of "</span> + agent.parameters.product + <span class="string">" to your cart"</span>)</span><br><span class="line">      addAgentMessage(<span class="string">"Successfully added 1 of "</span> + agent.parameters.product + <span class="string">" to your cart"</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      agent.add(<span class="string">"Failed with server problem"</span>);</span><br><span class="line">      addAgentMessage(<span class="string">"Failed with server problem"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">cleanCart</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (token.localeCompare(<span class="string">""</span>) === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="comment">//ensure user is logged in</span></span><br><span class="line">      agent.add(<span class="string">"Invalid visit, please login first"</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">await</span> addUserMessage(agent.query);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> serve = <span class="keyword">await</span> fetch(ENDPOINT_URL + <span class="string">'/application/products/'</span>, &#123;</span><br><span class="line">      method: <span class="string">'DELETE'</span>,</span><br><span class="line">      headers: &#123;</span><br><span class="line">        <span class="string">'Content-Type'</span>: <span class="string">'application/json'</span>,</span><br><span class="line">        <span class="string">'x-access-token'</span>: token</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">await</span> serve.json()</span><br><span class="line">    <span class="keyword">if</span> (serve.ok) &#123;</span><br><span class="line">      agent.add(<span class="string">"Successfully cleaned your cart"</span>)</span><br><span class="line">      addAgentMessage(<span class="string">"Successfully cleaned your cart"</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      agent.add(<span class="string">"Failed with server problem"</span>);</span><br><span class="line">      addAgentMessage(<span class="string">"Failed with server problem"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">removeProduct</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (token.localeCompare(<span class="string">""</span>) === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="comment">//ensure user is logged in</span></span><br><span class="line">      agent.add(<span class="string">"Invalid visit, please login first"</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">await</span> addUserMessage(agent.query);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> id = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> products.products) &#123;</span><br><span class="line">      <span class="keyword">if</span> (agent.parameters.product.toLocaleLowerCase().indexOf(i.name.toLocaleLowerCase()) !== <span class="number">-1</span>) &#123;</span><br><span class="line">        id = i.id;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (id === <span class="literal">null</span>) &#123;</span><br><span class="line">      agent.add(<span class="string">"Product name has problem"</span>);</span><br><span class="line">      addAgentMessage(<span class="string">"Product name has problem"</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> serve = <span class="keyword">await</span> fetch(ENDPOINT_URL + <span class="string">'/application/products/'</span> + id, &#123;</span><br><span class="line">      method: <span class="string">'DELETE'</span>,</span><br><span class="line">      headers: &#123;</span><br><span class="line">        <span class="string">'Content-Type'</span>: <span class="string">'application/json'</span>,</span><br><span class="line">        <span class="string">'x-access-token'</span>: token</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">await</span> serve.json()</span><br><span class="line">    <span class="keyword">if</span> (serve.ok) &#123;</span><br><span class="line">      agent.add(<span class="string">"Successfully removed 1 of "</span> + agent.parameters.product + <span class="string">" from your cart"</span>)</span><br><span class="line">      addAgentMessage(<span class="string">"Successfully removed 1 of "</span> + agent.parameters.product + <span class="string">" from your cart"</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      agent.add(<span class="string">"Failed with server problem"</span>);</span><br><span class="line">      addAgentMessage(<span class="string">"Failed with server problem"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">navigatePage</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (token.localeCompare(<span class="string">""</span>) === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="comment">//ensure user is logged in</span></span><br><span class="line">      agent.add(<span class="string">"Invalid visit, please login first"</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">await</span> addUserMessage(agent.query);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> findContent = agent.parameters.pages.toLocaleLowerCase();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (findContent.indexOf(<span class="string">"home"</span>) !== <span class="number">-1</span>) &#123;</span><br><span class="line">      navigation(<span class="literal">false</span>, <span class="literal">true</span>, username)</span><br><span class="line">      agent.add(<span class="string">"Navigating you to home..."</span>);</span><br><span class="line">      addAgentMessage(<span class="string">"Navigating you to home..."</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (findContent.indexOf(<span class="string">"review"</span>) !== <span class="number">-1</span>) &#123;</span><br><span class="line">      navigation(<span class="literal">false</span>, <span class="literal">true</span>, username + <span class="string">"/cart-review"</span>)</span><br><span class="line">      agent.add(<span class="string">"Navigating you to cart-review..."</span>);</span><br><span class="line">      addAgentMessage(<span class="string">"Navigating you to cart-review..."</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (findContent.indexOf(<span class="string">"confirm"</span>) !== <span class="number">-1</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> serverReturn2 = <span class="keyword">await</span> fetch(ENDPOINT_URL + <span class="string">'/application/'</span>, &#123;</span><br><span class="line">        method: <span class="string">'GET'</span>,</span><br><span class="line">        headers: &#123;</span><br><span class="line">          <span class="string">'x-access-token'</span>: token</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line"></span><br><span class="line">      <span class="comment">//page field</span></span><br><span class="line">      <span class="keyword">let</span> result = <span class="keyword">await</span> serverReturn2.json()</span><br><span class="line">      result = result.page.split(<span class="string">"/"</span>);</span><br><span class="line">      <span class="keyword">if</span> (result.length &gt; <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (result[result.length - <span class="number">1</span>].localeCompare(<span class="string">"cart-review"</span>) === <span class="number">0</span>) &#123;</span><br><span class="line"></span><br><span class="line">          navigation(<span class="literal">false</span>, <span class="literal">true</span>, username + <span class="string">"/cart-confirmed"</span>)</span><br><span class="line">          agent.add(<span class="string">"Navigating you to cart-confirmed..."</span>);</span><br><span class="line">          addAgentMessage(<span class="string">"Navigating you to cart-confirmed..."</span>);</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          agent.add(<span class="string">"You are not in a cart review page"</span>);</span><br><span class="line">          addAgentMessage(<span class="string">"You are not in a cart review page"</span>);</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        agent.add(<span class="string">"You are not in a cart review page"</span>);</span><br><span class="line">        addAgentMessage(<span class="string">"You are not in a cart review page"</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (findContent.indexOf(<span class="string">"cart"</span>) !== <span class="number">-1</span>) &#123;</span><br><span class="line">      navigation(<span class="literal">false</span>, <span class="literal">true</span>, username + <span class="string">"/cart"</span>)</span><br><span class="line">      agent.add(<span class="string">"Navigating you to cart..."</span>);</span><br><span class="line">      addAgentMessage(<span class="string">"Navigating you to cart..."</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">cartInfo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (token.localeCompare(<span class="string">""</span>) === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="comment">//ensure user is logged in</span></span><br><span class="line">      agent.add(<span class="string">"Invalid visit, please login first"</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">await</span> addUserMessage(agent.query);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> serve = <span class="keyword">await</span> fetch(ENDPOINT_URL + <span class="string">'/application/products/'</span>, &#123;</span><br><span class="line">      method: <span class="string">'GET'</span>,</span><br><span class="line">      headers: &#123;</span><br><span class="line">        <span class="string">'Content-Type'</span>: <span class="string">'application/json'</span>,</span><br><span class="line">        <span class="string">'x-access-token'</span>: token</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> cart = <span class="keyword">await</span> serve.json();</span><br><span class="line">    cart = cart.products;</span><br><span class="line">    navigation(<span class="literal">false</span>, <span class="literal">true</span>, username + <span class="string">"/cart"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> findContent = agent.parameters.cartInformation.toLocaleLowerCase();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (findContent.indexOf(<span class="string">"number"</span>) !== <span class="number">-1</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> k = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> cart) &#123;</span><br><span class="line">        k += i.count;</span><br><span class="line">      &#125;</span><br><span class="line">      agent.add(<span class="string">"You have "</span> + k + <span class="string">" items in your cart"</span>);</span><br><span class="line">      addAgentMessage(<span class="string">"You have "</span> + k + <span class="string">" items in your cart"</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (findContent.indexOf(<span class="string">"cost"</span>) !== <span class="number">-1</span> || findContent.indexOf(<span class="string">"price"</span>) !== <span class="number">-1</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> k = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> cart) &#123;</span><br><span class="line">        k += i.count * i.price;</span><br><span class="line">      &#125;</span><br><span class="line">      agent.add(<span class="string">"Total price is "</span> + k.toFixed(<span class="number">2</span>) + <span class="string">" in your cart"</span>);</span><br><span class="line">      addAgentMessage(<span class="string">"Total price is "</span> + k.toFixed(<span class="number">2</span>) + <span class="string">" in your cart"</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (findContent.indexOf(<span class="string">"type"</span>) !== <span class="number">-1</span>) &#123;<span class="comment">//assume to be category</span></span><br><span class="line">      <span class="keyword">let</span> k = [];</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> cart) &#123;</span><br><span class="line">        <span class="keyword">if</span> (k.indexOf(i.category) === <span class="number">-1</span>) &#123;</span><br><span class="line">          k.push(i.category);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      agent.add(<span class="string">"You have items belong to the following categories "</span> + k.length === <span class="number">0</span> ? <span class="string">"nothing"</span> : k.toString() + <span class="string">" in your cart"</span>);</span><br><span class="line">      addAgentMessage(<span class="string">"You have items belong to the following categories "</span> + k.length === <span class="number">0</span> ? <span class="string">"nothing"</span> : k.toString() + <span class="string">" in your cart"</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (findContent.indexOf(<span class="string">"item"</span>) !== <span class="number">-1</span>) &#123;<span class="comment">//assume to be items name + count</span></span><br><span class="line">      <span class="keyword">let</span> k = [];</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> cart) &#123;</span><br><span class="line">        k.push(i.count + <span class="string">" of "</span> + i.name);</span><br><span class="line">      &#125;</span><br><span class="line">      agent.add(<span class="string">"You have items "</span> + k.length === <span class="number">0</span> ? <span class="string">"nothing"</span> : k.toString() + <span class="string">" in your cart"</span>);</span><br><span class="line">      addAgentMessage(<span class="string">"You have items "</span> + k.length === <span class="number">0</span> ? <span class="string">"nothing"</span> : k.toString() + <span class="string">" in your cart"</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//entering default, all info</span></span><br><span class="line">    <span class="keyword">let</span> toSend = <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">let</span> k = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> cart) &#123;</span><br><span class="line">      k += i.count;</span><br><span class="line">    &#125;</span><br><span class="line">    toSend += <span class="string">"You have "</span> + k + <span class="string">" items in your cart "</span>;</span><br><span class="line"></span><br><span class="line">    k = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> cart) &#123;</span><br><span class="line">      k += i.count * i.price;</span><br><span class="line">    &#125;</span><br><span class="line">    toSend += <span class="string">"Total price is "</span> + k.toFixed(<span class="number">2</span>) + <span class="string">" in your cart "</span>;</span><br><span class="line"></span><br><span class="line">    k = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> cart) &#123;</span><br><span class="line">      <span class="keyword">if</span> (k.indexOf(i.category) === <span class="number">-1</span>) &#123;</span><br><span class="line">        k.push(i.category);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    toSend += <span class="string">"You have items belong to the following categories "</span> + k.toString() + <span class="string">" in your cart"</span>;</span><br><span class="line"></span><br><span class="line">    k = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> cart) &#123;</span><br><span class="line">      k.push(i.count + <span class="string">" of "</span> + i.name);</span><br><span class="line">    &#125;</span><br><span class="line">    toSend += <span class="string">"You have items "</span> + k.toString() + <span class="string">" in your cart"</span>;</span><br><span class="line"></span><br><span class="line">    agent.add(toSend);</span><br><span class="line">    addAgentMessage(toSend);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> intentMap = <span class="keyword">new</span> <span class="built_in">Map</span>()</span><br><span class="line">  intentMap.set(<span class="string">'Default Welcome Intent'</span>, welcome)</span><br><span class="line">  <span class="comment">// You will need to declare this `Login` content in DialogFlow to make this work</span></span><br><span class="line"></span><br><span class="line">  intentMap.set(<span class="string">'LoginStatus'</span>, loginStatus)</span><br><span class="line">  intentMap.set(<span class="string">'login'</span>, login)</span><br><span class="line">  intentMap.set(<span class="string">'queryCategories'</span>, queryCategories)</span><br><span class="line">  intentMap.set(<span class="string">'filterTags'</span>, filterTags)</span><br><span class="line">  intentMap.set(<span class="string">'clearTags'</span>, clearTags)</span><br><span class="line">  intentMap.set(<span class="string">'queryCategoryTag'</span>, queryCategoryTag)</span><br><span class="line">  intentMap.set(<span class="string">'goBack'</span>, goBack)</span><br><span class="line">  intentMap.set(<span class="string">'productRating'</span>, productRating)</span><br><span class="line">  intentMap.set(<span class="string">'viewProduct'</span>, viewProduct)</span><br><span class="line">  intentMap.set(<span class="string">'addProduct'</span>, addProduct)</span><br><span class="line">  intentMap.set(<span class="string">'cleanCart'</span>, cleanCart)</span><br><span class="line">  intentMap.set(<span class="string">'removeProduct'</span>, removeProduct)</span><br><span class="line">  intentMap.set(<span class="string">'removeProduct'</span>, removeProduct)</span><br><span class="line">  intentMap.set(<span class="string">'navigatePage'</span>, navigatePage)</span><br><span class="line">  intentMap.set(<span class="string">'cartInfo'</span>, cartInfo)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  agent.handleRequest(intentMap)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.listen(process.env.PORT || <span class="number">8080</span>)</span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      
      <category domain="https://shaokangjiang.github.io/categories/Programs/">Programs</category>
      
      <category domain="https://shaokangjiang.github.io/categories/Programs/Coursework/">Coursework</category>
      
      
      <category domain="https://shaokangjiang.github.io/tags/Dialogflow/">Dialogflow</category>
      
      
      <comments>https://shaokangjiang.github.io/2020/a-dialog-flow-app/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Build Cloudflare worker with endpoint</title>
      <link>https://shaokangjiang.github.io/2020/projects/Build-Cloudflare-worker-with-endpoint/</link>
      <guid>https://shaokangjiang.github.io/2020/projects/Build-Cloudflare-worker-with-endpoint/</guid>
      <pubDate>Sat, 05 Dec 2020 20:50:27 GMT</pubDate>
      
      <description>&lt;p&gt;Cloudflare worker is a serverless application based on v9 engine. The structure is a little bit different than the Node.js. Endpoints is familiar to most people in developing. But this seems to be different on worker. And it is useful especially when different services is running in the same worker. This one will show how to integrate traditional endpoint feature on cloudflare worker to likely have a fake endpoint handler. This is a sub-project of Financial website.&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<p>Cloudflare worker is a serverless application based on v9 engine. The structure is a little bit different than the Node.js. Endpoints is familiar to most people in developing. But this seems to be different on worker. And it is useful especially when different services is running in the same worker. This one will show how to integrate traditional endpoint feature on cloudflare worker to likely have a fake endpoint handler. This is a sub-project of Financial website.</p><a id="more"></a><h3 id="end-points"><a class="markdownIt-Anchor" href="#end-points"></a> End-points:</h3><p>Three end points is in this sample, they are arranged in three different purpose.</p><blockquote><p>Check the <a href="https://shaokangjiang.github.io/2021/AES-Encrypt-and-Decrypt-on-Cloudflare-worker/">AES Encrypt and Decrypt on Cloudflare worker</a> to see the encryption and decryption methods using in <code>/authenticate</code> and <code>/generate</code>, which is based on <code>AES-GCM</code></p></blockquote><p><code>/authenticate</code> return a password if the information, like <code>token</code> and <code>quizepartcode</code> matched with our record. Otherwise, return false;</p><p><code>/generate</code> Generate a user learning progress, will need quizpartcode in the body.</p><p><code>/sendmail</code> with a password as authentication to send email via sendgrid from <a href="mailto:admin@capitaltwo.ga" target="_blank" rel="noopener">admin@capitaltwo.ga</a>. This method is not enabled as sendgrid has been blocked by a lot of client.</p><h3 id="initial-handling"><a class="markdownIt-Anchor" href="#initial-handling"></a> Initial Handling</h3><p>In each fetch request to worker, there will be a request with content pass to the worker, usually and officially returning method is</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">addEventListener(<span class="string">'fetch'</span>, event =&gt; &#123;</span><br><span class="line">  event.respondWith(handleRequest(event.request))</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="reroute-request"><a class="markdownIt-Anchor" href="#reroute-request"></a> Reroute Request</h3><p>Even though Worker is just JavaScript running on v8, we could just create a function to reroute each request based on the address user is requesting, like</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(endpoint, fn) =&gt; &#123;</span><br><span class="line">      url = <span class="keyword">new</span> URL(request.url);</span><br><span class="line">      <span class="keyword">if</span> (url.pathname === endpoint &amp;&amp; request.method === <span class="string">"POST"</span>)</span><br><span class="line">        <span class="keyword">return</span> fn(request);</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span>;</span><br></pre></td></tr></table></figure><p>In javascript, functions could wrapped using a variable, so, it is possible to create an object to contain everything, like</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> app = &#123;</span><br><span class="line">  <span class="keyword">get</span>: (endpoint, fn) =&gt; &#123; <span class="comment">// for get request</span></span><br><span class="line">    url = <span class="keyword">new</span> URL(request.url);</span><br><span class="line">    <span class="keyword">if</span> (url.pathname === endpoint &amp;&amp; request.method === <span class="string">"GET"</span>)</span><br><span class="line">      <span class="keyword">return</span> fn(request);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  post: <span class="function">(<span class="params">endpoint, fn</span>) =&gt;</span> &#123;</span><br><span class="line">    url = <span class="keyword">new</span> URL(request.url);</span><br><span class="line">    <span class="keyword">if</span> (url.pathname === endpoint &amp;&amp; request.method === <span class="string">"POST"</span>)</span><br><span class="line">      <span class="keyword">return</span> fn(request);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="return-a-response"><a class="markdownIt-Anchor" href="#return-a-response"></a> Return a <code>Response</code></h3><p>Whenever needed in <code>handleRequest</code>, it is as easy as calling <code>app.post(&quot;/endPoint&quot;, functionName)</code>. And if null is returned, check next endpoint, otherwise the correct function will be called and executed. The reroute function like this:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * reroute</span></span><br><span class="line"><span class="comment"> * @param &#123;Request&#125; request</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">handleRequest</span>(<span class="params">request</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> app = &#123;</span><br><span class="line">    <span class="keyword">get</span>: (endpoint, fn) =&gt; &#123; <span class="comment">// for get request</span></span><br><span class="line">      url = <span class="keyword">new</span> URL(request.url);</span><br><span class="line">      <span class="keyword">if</span> (url.pathname === endpoint &amp;&amp; request.method === <span class="string">"GET"</span>)</span><br><span class="line">        <span class="keyword">return</span> fn(request);</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    post: <span class="function">(<span class="params">endpoint, fn</span>) =&gt;</span> &#123;</span><br><span class="line">      url = <span class="keyword">new</span> URL(request.url);</span><br><span class="line">      <span class="keyword">if</span> (url.pathname === endpoint &amp;&amp; request.method === <span class="string">"POST"</span>)</span><br><span class="line">        <span class="keyword">return</span> fn(request);</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">let</span> lastResponse = app.post(<span class="string">"/authenticate"</span>, handleAuthen)</span><br><span class="line">  <span class="keyword">if</span> (lastResponse) &#123;</span><br><span class="line">    <span class="keyword">return</span> lastResponse;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  lastResponse = app.post(<span class="string">"/generate"</span>, handleGen)</span><br><span class="line">  <span class="keyword">if</span> (lastResponse) &#123;</span><br><span class="line">    <span class="keyword">return</span> lastResponse;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  lastResponse = app.post(<span class="string">"/sendmail"</span>, sendMail)</span><br><span class="line">  <span class="keyword">if</span> (lastResponse) &#123;</span><br><span class="line">    <span class="keyword">return</span> lastResponse;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> Response(<span class="string">'&#123;"message":"Hello! Default is touched."&#125;'</span>, notFoundHead);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>notFoundHead</code> is the head content created as a js Object, like</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> notFoundHead = &#123;</span><br><span class="line">  status: <span class="string">'404'</span>,</span><br><span class="line">  statusText: <span class="string">'NOT FOUND'</span>,</span><br><span class="line">  headers: &#123;</span><br><span class="line">    <span class="string">'Content-Type'</span>: <span class="string">'application/json;charset=utf-8'</span>,</span><br><span class="line">    <span class="string">'Access-Control-Allow-Origin'</span>: <span class="string">'https://capitaltwo.ga'</span>,</span><br><span class="line">    <span class="string">'Access-Control-Allow-Methods'</span>: <span class="string">'GET,POST,PUT,DELETE'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><strong>Caution:</strong> Without a head containing the <code>Access-Control-Allow-Origin</code>, CORS error will be posted. Cloudflare worker seems to be strict on this thing. If any error or exception happened without any <code>try</code> ‚Ä¶ <code>catch</code>, CORS will also be given. So, to be convenient in debugging, a good practice is always to return a Not found header when error happened in some cases.</p><p>If method other than <code>GET</code> is used, <code>Access-Control-Allow-Methods</code> should also be used. Otherwise, CORS error would also happen.</p><p>And when posting fetch request, do not append header in this example because it is not appropriately handled and it might have problem in this case.</p></blockquote><p>One function in the sample is <code>handleAuthen</code>, and one another is <code>handleGen</code>. Those two are normal functions and just return a new <code>Response</code> at last would be fine. Like:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * @param &#123;*&#125; request </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">handleAuthen</span>(<span class="params">request</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> data = <span class="keyword">await</span> request.json();</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> Response(<span class="built_in">JSON</span>.stringify(&#123;</span><br><span class="line">  XXX: XXX&#125;), Header)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="visiting-data-part-in-request"><a class="markdownIt-Anchor" href="#visiting-data-part-in-request"></a> Visiting Data part in request</h3><p>Because the data section of the request is a <code>Promise</code> object, it has to be called with <code>await</code> and <code>.json()</code> in order to visit it. Like: <code>var data = await request.json();</code>.</p><h3 id="sendmail-through-sendgrid"><a class="markdownIt-Anchor" href="#sendmail-through-sendgrid"></a> SendMail through sendgrid</h3><p>In the real case, sending a mail to the user is general. And sometimes, we have certain sensitive data that should not be promoted to client. This could be implemented through the following method in worker and called in client like this. That is what the third endpoint <code>/sendmail</code> is doing. like:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * @param &#123;*&#125; request </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">sendMail</span>(<span class="params">request</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="keyword">await</span> fetch(<span class="string">"https://api.sendgrid.com/v3/mail/send"</span>, &#123;</span><br><span class="line">    method: <span class="string">"POST"</span>,</span><br><span class="line">    headers: &#123;</span><br><span class="line">      <span class="string">"Authorization"</span>: <span class="string">"Bearer SG.P_Xcg7PmRgirESQCCXXX...Tm1xo7tz5w"</span>,</span><br><span class="line">      <span class="string">"Content-Type"</span>: <span class="string">"application/json"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    body: <span class="built_in">JSON</span>.stringify(&#123;</span><br><span class="line">      <span class="string">"personalizations"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">"to"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="string">"email"</span>: <span class="string">"admin@capitaltwo.ga"</span></span><br><span class="line">            &#125;</span><br><span class="line">          ]</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      <span class="string">"from"</span>: &#123;</span><br><span class="line">        <span class="string">"email"</span>: <span class="string">"admin@capitaltwo.ga"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">"subject"</span>: <span class="string">"Sending with SendGrid is Fun"</span>,</span><br><span class="line">      <span class="string">"content"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">"type"</span>: <span class="string">"text/plain"</span>,</span><br><span class="line">          <span class="string">"value"</span>: <span class="string">"and easy to do anywhere, even with cURL"</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (a.ok) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Response(<span class="string">'&#123;"message":"successfully sent"&#125;'</span>, normalHeader)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> k = <span class="keyword">await</span> a.json();</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Response(<span class="built_in">JSON</span>.stringify(k), normalHeader)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><strong>Caution:</strong> <code>sendgrid</code> will not return anything if the response status is ok, which could be checked with <code>a.ok</code> in the previous sample. If wrong, a data will be returned and could be decoded to json Object</p></blockquote><h3 id="run"><a class="markdownIt-Anchor" href="#run"></a> Run</h3><p>In order to run and test locally, you need to install <a href="https://developers.cloudflare.com/workers/cli-wrangler/install-update" target="_blank" rel="noopener">Cloudflare Worker Local client</a> first.</p><p>Then do:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wrangler dev</span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      
      <category domain="https://shaokangjiang.github.io/categories/website/">website</category>
      
      <category domain="https://shaokangjiang.github.io/categories/website/Cloudflare-Worker/">Cloudflare Worker</category>
      
      
      <category domain="https://shaokangjiang.github.io/tags/JS/">JS</category>
      
      
      <comments>https://shaokangjiang.github.io/2020/projects/Build-Cloudflare-worker-with-endpoint/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Financial organization phone app - stage 1</title>
      <link>https://shaokangjiang.github.io/2020/Financial-organization-phone-application/</link>
      <guid>https://shaokangjiang.github.io/2020/Financial-organization-phone-application/</guid>
      <pubDate>Sat, 05 Dec 2020 13:52:55 GMT</pubDate>
      
      <description>&lt;p&gt;This is an app provide a easy to use interface to help user organize their spendings/earning and see a summary and guidance by visiting yearly budgeting tool on capitaltwo‚Äôs tools page, which will generate those results based on user‚Äôs history spending and provide user guidance about their future spending. User is able to provide an importance level to each future spending to guide system which item should be fulfilled at first. System will also intelligently detect user‚Äôs past earning and spending and ensure user‚Äôs future spending/earning include those fixed monthly/bi-monthly income/expense. Everything is done locally without risk of leaking privacy information. The stage 1 of the app provide a wonderful, easy to use interface and basic functionality, together with cross platform support, including android, ios. More details is in below. Dark and light theme is following user‚Äôs system default. This app is done solely by me.&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<p>This is an app provide a easy to use interface to help user organize their spendings/earning and see a summary and guidance by visiting yearly budgeting tool on capitaltwo‚Äôs tools page, which will generate those results based on user‚Äôs history spending and provide user guidance about their future spending. User is able to provide an importance level to each future spending to guide system which item should be fulfilled at first. System will also intelligently detect user‚Äôs past earning and spending and ensure user‚Äôs future spending/earning include those fixed monthly/bi-monthly income/expense. Everything is done locally without risk of leaking privacy information. The stage 1 of the app provide a wonderful, easy to use interface and basic functionality, together with cross platform support, including android, ios. More details is in below. Dark and light theme is following user‚Äôs system default. This app is done solely by me.</p><a id="more"></a><h3 id="usage"><a class="markdownIt-Anchor" href="#usage"></a> Usage</h3><p>Select past date for your spent or income, and select the future date for the stuff you planned. Expense and Income in a future date consider as whatever you plan to do or have, in a past date will be considered as whatever you have done. If an expense or income have a high occurence ratio, like exist &gt;50%, future income and expense will be calculated based on this. So, do not add recurring expense or income in a future date as they will be considered as extra income/plan to buy(like wishlist). And the order of expense category will be used to fulfill this wishlist in order.</p><p><strong>Categories:</strong> Expense is orderable, order is the importancec level, Income are all important</p><h3 id="features"><a class="markdownIt-Anchor" href="#features"></a> Features</h3><p>This app is an organization app contains basic functions, such as add, edit, delete, batch deletion, reorder categories, remove empty categories. A short demo:</p><p>First demo is to show the basic appearance, including add, delete, reorder in dark theme:</p><p><img src="https://github.com/ShaokangJiang/React-Helper/releases/download/0.0/demo1.gif" alt></p><p>Second demo is to show some appearance in light theme:</p><p><img src="https://github.com/ShaokangJiang/React-Helper/releases/download/0.0/demo2.gif" alt></p><h3 id="running"><a class="markdownIt-Anchor" href="#running"></a> Running</h3><p>Click <a href="https://github.com/CapitalTwo/CapitalTwo-Financial" target="_blank" rel="noopener">here</a> for source code.</p><p>Click <a href="https://expo.io/@huangsk100/projects/CapitalTwo-Financial" target="_blank" rel="noopener">here</a> for an expo runable version.</p><p><a href="https://github.com/CapitalTwo/CapitalTwo-Financial/releases/download/0.1.0/CapitalTwo-Financial-android.apk" target="_blank" rel="noopener">Download Apk for android</a></p><p><a href="https://github.com/CapitalTwo/CapitalTwo-Financial/releases/download/0.1.0/CapitalTwo-Financial-ios.tar.gz" target="_blank" rel="noopener">Download for ios</a></p><h3 id="compile-from-source"><a class="markdownIt-Anchor" href="#compile-from-source"></a> Compile from source</h3><p>To compile and run locally:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/CapitalTwo/CapitalTwo-Financial.git</span><br><span class="line"><span class="built_in">cd</span> CapitalTwo-Financial</span><br><span class="line">npm install</span><br><span class="line">expo install</span><br><span class="line">expo start</span><br></pre></td></tr></table></figure><p>And use our phone to scan the QR code on screen.</p><h3 id="span-classcard-titleyearly-budgeting-toolspan"><a class="markdownIt-Anchor" href="#span-classcard-titleyearly-budgeting-toolspan"></a> <span class="card-title">Yearly Budgeting Tool</span></h3><p>This Budgeting tools allows you to create a spending plan for your money and see your past spending more interactively, it ensures that you will have enough money for your top priorities which you can assign in the app. Budget plan will also keep you out of debt or help you work your<br>way out of debt if you currently in debt. Starting by adding some information in the next page.</p><h4 id="methods-behind-this"><a class="markdownIt-Anchor" href="#methods-behind-this"></a> Methods behind this</h4><p>User could type their money on each category or item with an importance level associated to it. With those information, we will solve it by using an optimization rules. User could choose either optimizing saving or optimizing consuming (maybe another word at here).</p><p>User will have choices to indicate if this is a one time purchase or not, like wishlist. Then we will make a plan to tell user when would be the best time to buy it. And in order to achieve this goal, what they should do in each month.</p><p>In this category, we will consider the saved money will be used in some low-risk investment, like 0.036 APR. The report generated would be the item should be bought at that month.</p><p>We could support up to 100 level of priority, but priority of 1 is the essential stuff, like housing, foods. Snacks might be in a lower priority.</p><h6 id="optimize-saving"><a class="markdownIt-Anchor" href="#optimize-saving"></a> Optimize saving</h6><p>This process doesn‚Äôt require optimization, thought it could be used to reach this purpose. But it might be as easy as loop through the list and select all components that have a priority level of 1. Sample methods as below:</p><img src="/2020/Financial-organization-phone-application/alg1.png"><h6 id="optimize-consume"><a class="markdownIt-Anchor" href="#optimize-consume"></a> Optimize consume</h6><p>Define variables: <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">P_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.68333em"></span><span class="strut bottom" style="height:.969438em;vertical-align:-.286108em"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:.13889em">P</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.13889em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:.05724em">j</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span></span></span></span> ‚Äì The amount of money that needs to be spent in different categories i in month j.</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>L</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">L_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.68333em"></span><span class="strut bottom" style="height:.969438em;vertical-align:-.286108em"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">L</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:.05724em">j</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span></span></span></span> ‚Äì The priority level associate with each spending category, <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">P_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.68333em"></span><span class="strut bottom" style="height:.969438em;vertical-align:-.286108em"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:.13889em">P</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.13889em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:.05724em">j</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span></span></span></span>. It is the reverse of the original list done by user. Like for high priority stuff, <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>L</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">L_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.68333em"></span><span class="strut bottom" style="height:.969438em;vertical-align:-.286108em"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">L</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:.05724em">j</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span></span></span></span> will be high</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>I</mi><mrow><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">I_{j}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.68333em"></span><span class="strut bottom" style="height:.969438em;vertical-align:-.286108em"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:.07847em">I</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.07847em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:.05724em">j</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span></span></span></span> ‚Äì The anticipated money in in each month.</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>T</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">T_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.68333em"></span><span class="strut bottom" style="height:.969438em;vertical-align:-.286108em"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:.13889em">T</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.13889em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:.05724em">j</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span></span></span></span> ‚Äì The money available at the end of month J.</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>S</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">S_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.68333em"></span><span class="strut bottom" style="height:.969438em;vertical-align:-.286108em"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:.05764em">S</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.05764em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:.05724em">j</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span></span></span></span> ‚Äì The binary selector to indicate this category should be selected or not in the month j.</p><p>A ‚Äì The one month rate of buying some low-risk investment product.</p><p>O ‚Äì Set including one time purchase, like wait list.</p><p>R ‚Äì Set including repeating purchase.</p><p>Formula:</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtable><mtr><mtd><mrow></mrow></mtd><mtd><mrow><mrow></mrow><mtext><mi mathvariant="normal">M</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">x</mi><mi mathvariant="normal">m</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">z</mi><mi mathvariant="normal">e</mi><mtext>¬†</mtext></mtext></mrow></mtd><mtd><mrow><msubsup><mo>‚àë</mo><mrow><mi>i</mi></mrow><mrow><mi>R</mi><mo>‚à™</mo><mi>O</mi></mrow></msubsup><msubsup><mo>‚àë</mo><mrow><mi>j</mi></mrow><mrow><mn>1</mn><mn>2</mn></mrow></msubsup><msub><mi>L</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><msub><mi>S</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow></mtd></mtr><mtr><mtd><mrow></mrow></mtd><mtd><mrow><mrow></mrow><mtext><mi mathvariant="normal">S</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">b</mi><mi mathvariant="normal">j</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">c</mi><mi mathvariant="normal">t</mi><mtext>¬†</mtext><mi mathvariant="normal">t</mi><mi mathvariant="normal">o</mi></mtext></mrow></mtd><mtd><mrow><msubsup><mo>‚àë</mo><mrow><mi>i</mi></mrow><mrow><mi>n</mi></mrow></msubsup><msub><mi>P</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><msub><mi>S</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>‚â§</mo><mi>A</mi><msub><mi>T</mi><mrow><mi>j</mi><mo>‚àí</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>I</mi><mi>j</mi></msub></mrow></mtd></mtr><mtr><mtd><mrow></mrow></mtd><mtd><mrow><mrow></mrow></mrow></mtd><mtd><mrow><msub><mi>T</mi><mrow><mi>j</mi></mrow></msub><mo>=</mo><mi>A</mi><msub><mi>T</mi><mrow><mi>j</mi><mo>‚àí</mo><mn>1</mn></mrow></msub><mo>‚àí</mo><msubsup><mo>‚àë</mo><mrow><mi>i</mi></mrow><mrow><mi>n</mi></mrow></msubsup><msub><mi>P</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><msub><mi>S</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>+</mo><msub><mi>I</mi><mi>j</mi></msub></mrow></mtd></mtr><mtr><mtd><mrow></mrow></mtd><mtd><mrow><mrow></mrow></mrow></mtd><mtd><mrow><msubsup><mo>‚àë</mo><mrow><mi>i</mi></mrow><mrow><mi>O</mi></mrow></msubsup><msubsup><mo>‚àë</mo><mrow><mi>j</mi></mrow><mrow><mn>1</mn><mn>2</mn></mrow></msubsup><msub><mi>S</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><mn>1</mn></mrow></mtd></mtr><mtr><mtd><mrow></mrow></mtd><mtd><mrow><mrow></mrow></mrow></mtd><mtd><mrow><msubsup><mo>‚àë</mo><mrow><mi>i</mi></mrow><mrow><mi>R</mi></mrow></msubsup><msub><mi>S</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><mn>1</mn><mspace width="1em"></mspace><mi mathvariant="normal">‚àÄ</mi><mi>j</mi><mo>‚àà</mo><mo>{</mo><mn>1</mn><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mn>1</mn><mn>2</mn><mo>}</mo></mrow></mtd></mtr><mtr><mtd><mrow></mrow></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">\begin{aligned} &amp; \text{Maxmize } &amp; \sum_{i}^{R\cup O}\sum_{j}^{12}L_{ij}S_{ij} \\ &amp; \text{Subject to} &amp; \sum_{i}^{n}P_{ij}S_{ij}\le AT_{j-1}+I_j \\ &amp; &amp; T_{j} = AT_{j-1} - \sum_{i}^{n}P_{ij}S_{ij} +I_j \\ &amp; &amp; \sum_{i}^{O}\sum_{j}^{12}S_{ij} = 1 \\ &amp; &amp; \sum_{i}^{R}S_{ij} = 1 \quad \forall j\in \{1...12\} \\ \end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:8.5741815em"></span><span class="strut bottom" style="height:16.648363em;vertical-align:-8.0741815em"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist"><span style="top:-6.7458455em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"></span></span><span style="top:-3.6806714999999994em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"></span></span><span style="top:-.7516054999999988em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"></span></span><span style="top:2.3543995000000013em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"></span></span><span style="top:5.596512500000001em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"></span></span><span style="top:7.7141815em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="col-align-l"><span class="vlist"><span style="top:-6.7458455em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="text mord displaystyle textstyle uncramped"><span class="mord mathrm">M</span><span class="mord mathrm">a</span><span class="mord mathrm">x</span><span class="mord mathrm">m</span><span class="mord mathrm">i</span><span class="mord mathrm">z</span><span class="mord mathrm">e</span><span class="mord mspace">¬†</span></span></span></span><span style="top:-3.6806714999999994em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="text mord displaystyle textstyle uncramped"><span class="mord mathrm">S</span><span class="mord mathrm">u</span><span class="mord mathrm">b</span><span class="mord mathrm">j</span><span class="mord mathrm">e</span><span class="mord mathrm">c</span><span class="mord mathrm">t</span><span class="mord mspace">¬†</span><span class="mord mathrm">t</span><span class="mord mathrm">o</span></span></span></span><span style="top:-.7516054999999988em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span></span></span><span style="top:2.3543995000000013em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span></span></span><span style="top:5.596512500000001em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="arraycolsep" style="width:2em"></span><span class="col-align-r"><span class="vlist"><span style="top:-6.7458455em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"><span class="mop op-limits"><span class="vlist"><span style="top:1.1776689999999999em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span></span></span></span><span style="top:-.000005000000000143778em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span><span class="op-symbol large-op mop">‚àë</span></span></span><span style="top:-1.2500050000000003em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit" style="margin-right:.00773em">R</span><span class="mbin">‚à™</span><span class="mord mathit" style="margin-right:.02778em">O</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mop op-limits"><span class="vlist"><span style="top:1.1776689999999999em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:.05724em">j</span></span></span></span><span style="top:-.000005000000000254801em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span><span class="op-symbol large-op mop">‚àë</span></span></span><span style="top:-1.2500050000000005em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">1</span><span class="mord mathrm">2</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mord"><span class="mord mathit">L</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:.05724em">j</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:.05764em">S</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.05764em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:.05724em">j</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span></span></span><span style="top:-3.6806714999999994em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"><span class="mop op-limits"><span class="vlist"><span style="top:1.1776689999999999em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span></span></span></span><span style="top:-.000005000000000143778em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span><span class="op-symbol large-op mop">‚àë</span></span></span><span style="top:-1.2500050000000003em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:.13889em">P</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.13889em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:.05724em">j</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:.05764em">S</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.05764em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:.05724em">j</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mrel">‚â§</span><span class="mord mathit">A</span><span class="mord"><span class="mord mathit" style="margin-right:.13889em">T</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.13889em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:.05724em">j</span><span class="mbin">‚àí</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mbin">+</span><span class="mord"><span class="mord mathit" style="margin-right:.07847em">I</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.07847em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:.05724em">j</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span></span></span><span style="top:-.7516054999999988em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:.13889em">T</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.13889em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:.05724em">j</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mrel">=</span><span class="mord mathit">A</span><span class="mord"><span class="mord mathit" style="margin-right:.13889em">T</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.13889em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:.05724em">j</span><span class="mbin">‚àí</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mbin">‚àí</span><span class="mop op-limits"><span class="vlist"><span style="top:1.1776689999999999em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span></span></span></span><span style="top:-.000005000000000143778em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span><span class="op-symbol large-op mop">‚àë</span></span></span><span style="top:-1.2500050000000003em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:.13889em">P</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.13889em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:.05724em">j</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:.05764em">S</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.05764em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:.05724em">j</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mbin">+</span><span class="mord"><span class="mord mathit" style="margin-right:.07847em">I</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.07847em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:.05724em">j</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span></span></span><span style="top:2.3543995000000013em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"><span class="mop op-limits"><span class="vlist"><span style="top:1.1776689999999999em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span></span></span></span><span style="top:-.000005000000000143778em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span><span class="op-symbol large-op mop">‚àë</span></span></span><span style="top:-1.2500050000000003em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit" style="margin-right:.02778em">O</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mop op-limits"><span class="vlist"><span style="top:1.1776689999999999em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:.05724em">j</span></span></span></span><span style="top:-.000005000000000254801em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span><span class="op-symbol large-op mop">‚àë</span></span></span><span style="top:-1.2500050000000005em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">1</span><span class="mord mathrm">2</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:.05764em">S</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.05764em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:.05724em">j</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span><span style="top:5.596512500000001em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"><span class="mop op-limits"><span class="vlist"><span style="top:1.1776689999999999em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span></span></span></span><span style="top:-.000005000000000143778em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span><span class="op-symbol large-op mop">‚àë</span></span></span><span style="top:-1.2500050000000003em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit" style="margin-right:.00773em">R</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:.05764em">S</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.05764em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:.05724em">j</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mrel">=</span><span class="mord mathrm">1</span><span class="mord mspace quad"></span><span class="mord mathrm">‚àÄ</span><span class="mord mathit" style="margin-right:.05724em">j</span><span class="mrel">‚àà</span><span class="mopen">{</span><span class="mord mathrm">1</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mord mathrm">1</span><span class="mord mathrm">2</span><span class="mclose">}</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span></span></span></span></span></span></span></p><p>Though optimization might give us the optimal solution in complex cases, but it is also acceptable to use normal methods as shown below.</p><blockquote><p>This is the method the website is using, though small modification is made basedd on this description. The website will calculate your history spending and get a expected income and expense in your future spending. But the core part of calculation is this.</p></blockquote><img src="/2020/Financial-organization-phone-application/alg2.png"><h3 id="next-stage"><a class="markdownIt-Anchor" href="#next-stage"></a> Next Stage</h3><p>By considering non-stable testing, the current version is the stable version and compatible to multiple different platforms. The future version of this app will contains future stuff, such as locally voice interaction to add stuff with local trained Natural language processing. And local trained command to handle nearly all functions this app is able to do.</p><p><a href="https://shaokangjiang.github.io/2021/projects/Financial-organization-phone-app-stage-2/">Stage two</a> is nearly published now, which is a stable and compatible to multiple different platforms version that user is able to add items using chats.</p>]]></content:encoded>
      
      
      <category domain="https://shaokangjiang.github.io/categories/Expo/">Expo</category>
      
      
      <category domain="https://shaokangjiang.github.io/tags/MIP/">MIP</category>
      
      <category domain="https://shaokangjiang.github.io/tags/Expo/">Expo</category>
      
      
      <comments>https://shaokangjiang.github.io/2020/Financial-organization-phone-application/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Sample interactive page</title>
      <link>https://shaokangjiang.github.io/2020/Sample-interactive-page/</link>
      <guid>https://shaokangjiang.github.io/2020/Sample-interactive-page/</guid>
      <pubDate>Wed, 02 Dec 2020 18:10:46 GMT</pubDate>
      
      <description>&lt;p&gt;Markdown is based on html, so whatever html have markdown can have, &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/web/html/element/iframe&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;code&gt;&amp;lt;iframe&amp;gt;&lt;/code&gt;&lt;/a&gt; is the most common one. I will show some example by using iframe below:&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<p>Markdown is based on html, so whatever html have markdown can have, <a href="https://developer.mozilla.org/en-US/docs/web/html/element/iframe" target="_blank" rel="noopener"><code>&lt;iframe&gt;</code></a> is the most common one. I will show some example by using iframe below:</p><a id="more"></a><h3 id="map"><a class="markdownIt-Anchor" href="#map"></a> Map</h3><p>Use the following code to embedded a map:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">id</span>=<span class="string">"inlineFrameExample"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">title</span>=<span class="string">"Inline Frame Example"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">width</span>=<span class="string">"100%"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">height</span>=<span class="string">"500"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">src</span>=<span class="string">"https://www.openstreetmap.org/export/embed.html?bbox=-0.004017949104309083%2C51.47612752641776%2C0.00030577182769775396%2C51.478569861898606&amp;layer=mapnik"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Appearance:</p><iframe id="inlineFrameExample" title="Inline Frame Example" width="100%" height="500" src="https://www.openstreetmap.org/export/embed.html?bbox=-0.004017949104309083%2C51.47612752641776%2C0.00030577182769775396%2C51.478569861898606&layer=mapnik"></iframe><h3 id="youtube"><a class="markdownIt-Anchor" href="#youtube"></a> Youtube</h3><p>Use the following code to embedded a youtube, other video platform would have similar function. This is an example for <a href="https://www.youtube.com/watch?v=W6NZfCO5SIk" target="_blank" rel="noopener">JavaScript Tutorial for Beginners: Learn JavaScript in 1 Hour</a> :</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">height</span>=<span class="string">"550"</span> <span class="attr">src</span>=<span class="string">"https://www.youtube.com/embed/W6NZfCO5SIk"</span> <span class="attr">frameborder</span>=<span class="string">"0"</span> <span class="attr">allow</span>=<span class="string">"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"</span> <span class="attr">allowfullscreen</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure><img src="/2020/Sample-interactive-page/youtube.gif" title="youtube"><p>Appearance:</p><iframe width="100%" height="550" src="https://www.youtube.com/embed/W6NZfCO5SIk" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><h3 id="document"><a class="markdownIt-Anchor" href="#document"></a> Document</h3><p>Use the following code to embedded a microsoft document (you may get the link through your onedrive panel -&gt; Embed in your personal onedrive, other version/driver should have similar function). The following code would embed our schedule:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">height</span>=<span class="string">"500"</span> <span class="attr">frameborder</span>=<span class="string">"0"</span> <span class="attr">scrolling</span>=<span class="string">"no"</span> <span class="attr">src</span>=<span class="string">"https://onedrive.live.com/embed?resid=C4FE7ED776152B7%21179112&amp;authkey=%21AIBpqBFVsOqASe0&amp;em=2&amp;wdAllowInteractivity=False&amp;wdInConfigurator=True"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Appearance:</p><iframe width="100%" height="500" frameborder="0" scrolling="no" src="https://onedrive.live.com/embed?resid=C4FE7ED776152B7%21179112&authkey=%21AIBpqBFVsOqASe0&em=2&wdAllowInteractivity=False&wdInConfigurator=True"></iframe><h3 id="games"><a class="markdownIt-Anchor" href="#games"></a> Games</h3><p>To be more creative, you can even embedded some games, such as the following 3D games by using glitch using this code: Below code is for project <a href="https://github.com/aframevr/a-blast" target="_blank" rel="noopener">a-blast</a>. You may create your own on glitch or just on any website server and embed to here.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">height</span>=<span class="string">"500"</span> <span class="attr">frameborder</span>=<span class="string">"0"</span> <span class="attr">scrolling</span>=<span class="string">"no"</span> <span class="attr">src</span>=<span class="string">"https://aframe.io/a-blast/"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Appearance:</p><iframe width="100%" height="500" frameborder="0" scrolling="no" src="https://aframe.io/a-blast/"></iframe><h3 id="conslusion"><a class="markdownIt-Anchor" href="#conslusion"></a> Conslusion</h3><p>As markdown is based on html, there are much more areas could be explored. Be creative.</p>]]></content:encoded>
      
      
      <category domain="https://shaokangjiang.github.io/categories/website/">website</category>
      
      <category domain="https://shaokangjiang.github.io/categories/website/Hexo/">Hexo</category>
      
      
      <category domain="https://shaokangjiang.github.io/tags/Website/">Website</category>
      
      
      <comments>https://shaokangjiang.github.io/2020/Sample-interactive-page/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Simple autocorrect with Bigram</title>
      <link>https://shaokangjiang.github.io/2020/Simple-autocorrect-with-Bigram/</link>
      <guid>https://shaokangjiang.github.io/2020/Simple-autocorrect-with-Bigram/</guid>
      <pubDate>Thu, 15 Oct 2020 18:28:58 GMT</pubDate>
      
      <description>&lt;p&gt;This is a simple auto correct javascript function based on Bi-gram. It will handle input and find any possible similarity based on threshold. It is a part of a coursework. This work is solely on my own. And because of a previous bad experience on posting code, just a short portion of key codes will be shown.&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<p>This is a simple auto correct javascript function based on Bi-gram. It will handle input and find any possible similarity based on threshold. It is a part of a coursework. This work is solely on my own. And because of a previous bad experience on posting code, just a short portion of key codes will be shown.</p><a id="more"></a><h3 id="core-function"><a class="markdownIt-Anchor" href="#core-function"></a> Core function</h3><p>The <code>getSimilarLevel</code> function will produce the similarity level between two input words. Basically, it is just to compare and calculate the number of 2-grams that is the same. <code>getTwoGram</code> function is just to generate 2-gram used to compare.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">function getTwoGram(data) &#123;</span><br><span class="line">  let toRe = [];</span><br><span class="line">  for (let i = 0; i &lt; data.length-1; i++) &#123;</span><br><span class="line">    toRe.push(data[i] + data[i+1]);</span><br><span class="line">  &#125;</span><br><span class="line">  return toRe;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function getSimilarLevel(data1, data2) &#123;</span><br><span class="line">  data1 = data1.toLocaleLowerCase();</span><br><span class="line">  data2 = data2.toLocaleLowerCase();</span><br><span class="line">  const twogram1 = getTwoGram(data1), twogram2 = getTwoGram(data2);</span><br><span class="line">  let count = 0;</span><br><span class="line"></span><br><span class="line">  for (let i of twogram1) &#123;</span><br><span class="line">      if (twogram2.indexOf(i) !== -1) &#123;</span><br><span class="line">          count++;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  return count / Math.max(twogram1.length, twogram2.length);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="possible-way-of-using"><a class="markdownIt-Anchor" href="#possible-way-of-using"></a> Possible way of using:</h3><p>A word will be pushed to the possible waiting list when they have a similarity level greater than the threshold.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">let keywords = [&quot;a&quot;,&quot;b&quot;,&quot;c&quot;]</span><br><span class="line">generateSuggestion(input) &#123;</span><br><span class="line">    let possibleSuggestion = [];</span><br><span class="line"></span><br><span class="line">    for (let i of keywords) &#123;</span><br><span class="line">        let similarity = getSimilarLevel(i, input);</span><br><span class="line">        if(similarity &gt; threshold)</span><br><span class="line">          possibleSuggestion.push([similarity, i]);</span><br><span class="line">    &#125;</span><br><span class="line">    //sort</span><br><span class="line"></span><br><span class="line">    possibleSuggestion.sort();</span><br><span class="line">    possibleSuggestion.reverse();</span><br><span class="line"></span><br><span class="line">    if(possibleSuggestion.length &lt;=6) &#123;</span><br><span class="line">      let toRe = [];</span><br><span class="line">      for(let i = 0;i&lt;possibleSuggestion.length;i++)&#123;</span><br><span class="line">        toRe.push(possibleSuggestion[i][1]);</span><br><span class="line">      &#125;    </span><br><span class="line">      return toRe;    </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    let toRe = [];</span><br><span class="line"></span><br><span class="line">    for(let i = 0;i&lt;6;i++)&#123;</span><br><span class="line">      toRe.push(possibleSuggestion[i][1]);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    return toRe;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      
      <category domain="https://shaokangjiang.github.io/categories/Programs/">Programs</category>
      
      <category domain="https://shaokangjiang.github.io/categories/Programs/Coursework/">Coursework</category>
      
      
      <category domain="https://shaokangjiang.github.io/tags/JS/">JS</category>
      
      
      <comments>https://shaokangjiang.github.io/2020/Simple-autocorrect-with-Bigram/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Capstone project design specification</title>
      <link>https://shaokangjiang.github.io/2020/Capstone-prooject-design-specification-v0-1/</link>
      <guid>https://shaokangjiang.github.io/2020/Capstone-prooject-design-specification-v0-1/</guid>
      <pubDate>Sat, 03 Oct 2020 18:24:14 GMT</pubDate>
      
      <description>&lt;p&gt;This is a project done for capital one to teach college students about financial stuff. Below is the design specification and schedule done by me that the entire group follows at last, including tools in using, website structure. Refer to the Publication of Financial website to know the final product of this website. This design specification is done solely by me with improvement advice from group members. This design contains my experience from multiple sources in the past few years, the final product is intended to be a well-performances, useful, containing academic value product.&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<p>This is a project done for capital one to teach college students about financial stuff. Below is the design specification and schedule done by me that the entire group follows at last, including tools in using, website structure. Refer to the Publication of Financial website to know the final product of this website. This design specification is done solely by me with improvement advice from group members. This design contains my experience from multiple sources in the past few years, the final product is intended to be a well-performances, useful, containing academic value product.<a id="more"></a></p><h1 id="general-idea"><a class="markdownIt-Anchor" href="#general-idea"></a> General idea</h1><h2 id="some-basic-agreement"><a class="markdownIt-Anchor" href="#some-basic-agreement"></a> Some basic agreement</h2><ul><li>The entire project would be a nearly serverless application, except some fundamental database part</li><li>Consistent of design: The theme for the entire project is using Material Design.</li><li>All quizzes come from a question bank. So less collision would happen.</li><li>User Login credential will be saved in local cache place temporary.</li><li>Majority of repeating code works should be done by programs</li><li>Privacy is a big issue, no part should integrate into collecting privacy information.</li></ul><h2 id="tools-recommend"><a class="markdownIt-Anchor" href="#tools-recommend"></a> Tools recommend</h2><p>The percentage stands for the percentage of work required. Following percetage is measured base on my experience. Written part is a little bit heavy as I do not like writting.</p><h5 id="markdown30"><a class="markdownIt-Anchor" href="#markdown30"></a> Markdown(30%)</h5><p>This might be the core part of the entire project. It contains the knowledge passage(3 points*10 topics=30 passages) we are going to provide to user. This part might also include some part of quiz questions design and the words in the homepage(our group description). If nobody knows Markdown, then Microsoft doc would be a good substitution but the entire work will be increased as we need to convert it to markdown. And it is also not good for keeping your copyright. Google doc is not really compatible with it, so it is not recommended.</p><h5 id="json20"><a class="markdownIt-Anchor" href="#json20"></a> JSON(20%)</h5><p>Quiz questions(30 passages*80 Questions/passage = 2400 Questions) and answers should be in JSON format. Do not be shocked by the quiz questions part, we could also generate some, see in part [quiz]. But this is still a large amount of work.</p><h5 id="javascript12"><a class="markdownIt-Anchor" href="#javascript12"></a> Javascript(12%)</h5><p>This will be needed in the stock simulation, the loan calculation, etc. It will calculate information provided and return user with the result.</p><h5 id="html7"><a class="markdownIt-Anchor" href="#html7"></a> HTML(7%)</h5><p>This part will include the page design of stock simulation, the loan calculation, etc.</p><h5 id="css1"><a class="markdownIt-Anchor" href="#css1"></a> CSS(1%)</h5><p>This part won‚Äôt need a lot of time. We might customize some CSS, but majority part of CSS comes from MaterilizeCss. Or other pre-defined library.</p><h5 id="javapythonjavascriptcc17"><a class="markdownIt-Anchor" href="#javapythonjavascriptcc17"></a> Java/Python/Javascript/C/C++(17%)</h5><p>This part include the work on the worker size, including providing different types of questions. The way of providing questions will be discussed in part [quiz]. In worker, you could select the language you want. But I would like to recommend Javascript. Because the other language will require you to use assembly to load code. You can read more at <a href="https://blog.cloudflare.com/webassembly-on-cloudflare-workers/" target="_blank" rel="noopener">here</a></p><h5 id="ejs6"><a class="markdownIt-Anchor" href="#ejs6"></a> Ejs(6%)</h5><p>ejs, a.k.a effective javascript, is the code that will be used to generate our knowledge passage. We have some pre-defined structure, but we do need to modify them to meet our needs. This part might take some time. Since I am not pretty familiar with it, 6% is just a rough estimate. But it won‚Äôt take too long because we only need to do some small modifications.</p><h5 id="microsoft-powerpointgoogle-slides2"><a class="markdownIt-Anchor" href="#microsoft-powerpointgoogle-slides2"></a> Microsoft Powerpoint/Google Slides(2%):</h5><p>We need to do some presentations throughout this semester. I prefre to use Powerpoint as it has some wonderful functions. But Google slide is also acceptable.</p><h5 id="csv2"><a class="markdownIt-Anchor" href="#csv2"></a> CSV(2%)</h5><p>Organize and report the data of stocks in stock simulation tool. We need 8 stocks*10 groups = 80 data pieces. See [stock] for more details.</p><h5 id="google-spreadsheetmicrosoft-excel1"><a class="markdownIt-Anchor" href="#google-spreadsheetmicrosoft-excel1"></a> Google Spreadsheet/Microsoft Excel(1%)</h5><p>Organize pass code, quiz code information.</p><h5 id="other2"><a class="markdownIt-Anchor" href="#other2"></a> Other(2%)</h5><p>In case I forget anything. And we do need time to design and choose right color, picture for each part in the website.</p><h5 id="statistic"><a class="markdownIt-Anchor" href="#statistic"></a> Statistic</h5><p>New(29%) Old(71%)</p><h2 id="techniquesoftware-recommend"><a class="markdownIt-Anchor" href="#techniquesoftware-recommend"></a> Technique/Software recommend</h2><p>Description comes from their official or wikipedia. Each paragraph title is clickable, it will bring you to a description page or download page. For most of programs, we do not need to install.</p><h5 id="hexo"><a class="markdownIt-Anchor" href="#hexo"></a> <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a></h5><p>A fast, simple &amp; powerful blog framework. Hexo is a fast, simple &amp; powerful blog framework powered by Node.js.</p><h5 id="cloudflare-worker"><a class="markdownIt-Anchor" href="#cloudflare-worker"></a> <a href="https://www.cloudflare.com/en-in/products/cloudflare-workers/" target="_blank" rel="noopener">Cloudflare Worker</a></h5><p>Cloudflare Workers lets developers deploy serverless JavaScript applications on Cloudflare‚Äôs global cloud network, where they are seamlessly scalable and closer to end users. Based on the Service Workers API, Workers receive events for every HTTP (S) request made to an application.</p><h5 id="gitpages"><a class="markdownIt-Anchor" href="#gitpages"></a> <a href="https://pages.github.com/" target="_blank" rel="noopener">Gitpages</a></h5><p>GitHub Pages are public webpages hosted and easily published through GitHub.</p><h5 id="typora"><a class="markdownIt-Anchor" href="#typora"></a> <a href="https://typora.io/" target="_blank" rel="noopener">Typora</a></h5><p>Typora allows you to manage your files easily, providing both file tree panel and articles (file list) side panel, allows you to manage your files easily. Organize your files your way, including putting in sync services, like Dropbox or iCloud.</p><h5 id="microsoft-powerpoint"><a class="markdownIt-Anchor" href="#microsoft-powerpoint"></a> <a href="https://www.microsoft.com/en-us/microsoft-365/powerpoint" target="_blank" rel="noopener">Microsoft Powerpoint</a></h5><p>Microsoft PowerPoint empowers you to create clean slide presentations and intricate pitch decks and gives you a powerful presentation maker to tell your story.</p><h5 id="cloudflare-cdn"><a class="markdownIt-Anchor" href="#cloudflare-cdn"></a> <a href="https://www.cloudflare.com/cdn/" target="_blank" rel="noopener">Cloudflare CDN</a></h5><p>The Cloudflare CDN is an content delivery network that uses next-gen tech to deliver a fast, reliable, CDN services.</p><h5 id="github-release"><a class="markdownIt-Anchor" href="#github-release"></a> <a href="https://docs.github.com/en/free-pro-team@latest/rest/reference/repos#releases" target="_blank" rel="noopener">Github Release</a></h5><p>Releases are deployable software iterations you can package and make available for a wider audience to download and use.</p><h5 id="htmljs-pages"><a class="markdownIt-Anchor" href="#htmljs-pages"></a> <a href="https://en.wikipedia.org/wiki/HTML" target="_blank" rel="noopener">HTML+JS pages</a></h5><p>HTML is the standard markup language for Web pages. JavaScript, often abbreviated as JS, is a programming language that conforms to the ECMAScript specification.</p><h5 id="visual-studio-code"><a class="markdownIt-Anchor" href="#visual-studio-code"></a> <a href="https://code.visualstudio.com/" target="_blank" rel="noopener">visual studio code</a></h5><p>Visual Studio Code is a code editor redefined and optimized for building and debugging modern web and cloud applications.</p><h5 id="livesever"><a class="markdownIt-Anchor" href="#livesever"></a> <a href="https://marketplace.visualstudio.com/items?itemName=ritwickdey.LiveServer" target="_blank" rel="noopener">Livesever</a></h5><p>Launch a development local Server with live reload feature for static &amp; dynamic pages on visual studio code.</p><h5 id="git"><a class="markdownIt-Anchor" href="#git"></a> <a href="https://git-scm.com/" target="_blank" rel="noopener">Git</a></h5><p>Git is a free and open source distributed version control system designed to handle everything from small to very large projects with speed and efficiency. Git is easy to learn and has a tiny footprint with lightning fast performance .</p><h5 id="notepad"><a class="markdownIt-Anchor" href="#notepad"></a> <a href="https://notepad-plus-plus.org/" target="_blank" rel="noopener">Notepad++</a></h5><p>Notepad++ is a free (as in ‚Äúfree speech‚Äù and also as in ‚Äúfree beer‚Äù) source code editor and Notepad replacement that supports several languages. Running in the MS Windows environment, its use is governed by GNU General Public License.</p><h5 id="google-spreadsheet"><a class="markdownIt-Anchor" href="#google-spreadsheet"></a> <a href="https://www.google.com/sheets/about/" target="_blank" rel="noopener">Google Spreadsheet</a></h5><p>Google Sheets is a spreadsheet program included as part of a free, web-based software office suite offered by Google within its Google Drive service.</p><h5 id="microsoft-excel"><a class="markdownIt-Anchor" href="#microsoft-excel"></a> <a href="https://www.microsoft.com/en-us/microsoft-365/excel" target="_blank" rel="noopener">Microsoft Excel</a></h5><p>Microsoft Excel is a spreadsheet developed by Microsoft for Windows, macOS, Android and iOS. It features calculation, graphing tools, pivot tables, and a macro programming language called Visual Basic for Applications.</p><blockquote><p>Hexo is actually based on Node.js. So, Node.js technically should be included.</p></blockquote><p>Different library in jvascript will be discussed in each section.</p><h2 id="suggest-roles"><a class="markdownIt-Anchor" href="#suggest-roles"></a> Suggest roles</h2><p>This part just states we need those role. It doesn‚Äôt mean each one take one job of this. We should work on each part together.</p><ul><li><p>Writer</p></li><li><p>Worker script</p></li><li><p>Designer</p></li><li><p>Speaker</p></li><li><p>Tool Implement</p></li></ul><h1 id="knowledge-passage"><a class="markdownIt-Anchor" href="#knowledge-passage"></a> Knowledge Passage</h1><h5 id="host"><a class="markdownIt-Anchor" href="#host"></a> Host</h5><p>This page will be hosted at a subsite, at <a href="http://knowledge.capitaltwo.ga" target="_blank" rel="noopener">knowledge.capitaltwo.ga</a>. Structure will be determined by Hexo + Material-X theme.</p><h5 id="naming-rule"><a class="markdownIt-Anchor" href="#naming-rule"></a> Naming rule</h5><p>The name of each passage file should be in words with dash in the middle between each two words. No white space or special character is permitted. For example, <code>How_to_do.md</code> is valid, <code>How to do.md</code> is not valid.</p><p>Final format of most of knowledge passage would be in Markdown format with valid yaml formatter. Each passage will be in one file. Each file have a yaml formatter.</p><h5 id="yaml-formatter"><a class="markdownIt-Anchor" href="#yaml-formatter"></a> yaml Formatter</h5><p>It likes a key value pair dictionary, each passage should at least have the following fields.</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">parentTitle:</span> <span class="string">Crypto</span> <span class="comment">#parent title of this page, might be useful</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">Tell</span> <span class="string">us</span> <span class="string">who</span> <span class="string">you</span> <span class="string">interviewed</span> <span class="comment">#Title or topic of this page, like intro to crypto, part 1</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">dev</span> <span class="comment">#The category, like cypto</span></span><br><span class="line"><span class="attr">toc:</span> <span class="literal">true</span> <span class="comment">#True means including menu</span></span><br><span class="line"><span class="attr">body:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">article</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">comments</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2020</span><span class="bullet">-09</span><span class="bullet">-30</span> <span class="number">11</span><span class="string">:53:46</span></span><br><span class="line"><span class="attr">top:</span></span><br><span class="line"><span class="attr">keywords:</span> </span><br><span class="line"><span class="bullet">  -</span> <span class="string">Design</span></span><br><span class="line"><span class="attr">categories:</span> <span class="string">Development</span> <span class="comment">#The category, like cypto</span></span><br><span class="line"><span class="attr">tags:</span> <span class="comment">#Tags, like primaey level, seondary level, or other good tag.</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">Design</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><p><span>Notice</span> Keys are caase sensitive. And three dash line in the front and the end should be included. In Typora, you can just type <code>‚Äî</code> and press <code>enter</code> to enter the front matter typing mode. In this mode, dash line in the front and the end should <strong>NOT</strong> be included as typora will do that for you.</p><h5 id="main-passage"><a class="markdownIt-Anchor" href="#main-passage"></a> Main Passage</h5><p>Main Passage will be in Markdown format. For the best experience of converting and user experience, Markdown is the best. Though Microsoft word and google doc is acceptable.</p><p>A short reference to useful command:</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">### aa &lt;!--Title, one more # means a lower level title--&gt;</span></span><br><span class="line"><span class="bullet">- </span>aa <span class="xml"><span class="comment">&lt;!--Unordered list--&gt;</span></span></span><br><span class="line"><span class="bullet">1. </span>aa <span class="xml"><span class="comment">&lt;!--ordered list--&gt;</span></span></span><br><span class="line">[<span class="string">something</span>](<span class="link">link</span>) <span class="xml"><span class="comment">&lt;!--Links --&gt;</span></span></span><br><span class="line">![](link) <span class="xml"><span class="comment">&lt;!--images, links required to be online source. Good imagebed would be Onedrive--&gt;</span></span></span><br><span class="line"><span class="code">`code`</span> <span class="xml"><span class="comment">&lt;!--Small field keyword highlighting--&gt;</span></span></span><br><span class="line"><span class="strong">**text**</span> <span class="xml"><span class="comment">&lt;!--Make text bold--&gt;</span></span></span><br><span class="line"><span class="emphasis">*text*</span> <span class="xml"><span class="comment">&lt;!--Make text in italian--&gt;</span></span></span><br><span class="line"><span class="quote">&gt; Reference &lt;!--Do a reference, large quota--&gt;</span></span><br></pre></td></tr></table></figure><p>You can also utilize HTML code in each markdown file to create multi-media document, just put HTML code to markdown file, then it will work, some common codes:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">"https://docs.google.com/forms/d/e/1FAIpQLSeIQZNBcicL01lptHL_VDwL5u9KR6iDYFNE-ElCjMQ88VDBDQ/viewform?usp=sf_link"</span> <span class="attr">title</span>=<span class="string">"Questionnaires"</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">height</span>=<span class="string">"450 pixels"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mark</span>&gt;</span><span class="tag">&lt;/<span class="name">mark</span>&gt;</span> <span class="comment">&lt;!--To highlight some words--&gt;</span></span><br></pre></td></tr></table></figure><h2 id="quiz-reference"><a class="markdownIt-Anchor" href="#quiz-reference"></a> Quiz Reference</h2><p>If this passage is associated with a quiz, usually this is always true, you need also to include a unique quizpart code. It will be passed to quiz part. Each passage should have a unique code. The code doesn‚Äôt necessary to make sense in their word meaning. It could be a random word. I recommend for a higher security by using aes, which will be discussed in pointing system at [pointsys]. But it is not required at here. Because user might want to use the quiz without finishing the reading requirement.</p><p>To include a quizepart code, add following field to previous yaml:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">quizepart:</span> <span class="string">XXX</span> <span class="comment">#The quiz part code</span></span><br></pre></td></tr></table></figure><p>Except including those stuff, you also need to put the quizpart field to a shared google sheet/ Microsoft Excel.</p><h2 id="pointing-system"><a class="markdownIt-Anchor" href="#pointing-system"></a> Pointing System</h2><p>If this passage require user to finish a previous chapter, you then need to include the following field:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">password:</span> <span class="string">XXX</span> <span class="comment">#The encryption password.</span></span><br></pre></td></tr></table></figure><p>Except including those stuff, you also need to specify a securitynumber in a shared google sheet/ Microsoft Excel, which will be used to verificate user activity. And you also need to put the password field to this document.</p><h5 id="method-behind-this-finish-one-study"><a class="markdownIt-Anchor" href="#method-behind-this-finish-one-study"></a> Method behind this - finish one study</h5><p>Each passage with a previous reading requirement is associated with a securitynumber, a password, which are stored in the worker side. When a user finish a quiz, they could choose either go to next chapter directly(use local storage to store the credential text and go to the next page directly) or get a credential text directly, they could choose to copy the text or download as a txt file. To see code of downloading, refer to after quiz page at [afterquiz]. By saving it, they can use it and continue their study next time. The credential text is generated on worker and returned to client. It will be encrypted by a high level security code via AES-256 encryption, like Secret Passphrase. This phrase will be stored in the worker.</p><p><span>credential text</span></p><p>[name of current chapter], [the securitynumber], [Browser Identification String], [IP Address]</p><p>For sample code of this part, refer to [afterquiz].</p><p>The reason I choose this is that user will have the full control of their own data. So we are free of information storage risk and privacy concern. And we do not need to use cookies as well.</p><h5 id="method-behind-this-continue-their-study"><a class="markdownIt-Anchor" href="#method-behind-this-continue-their-study"></a> Method behind this - continue their study</h5><p>To continue their study using those credential, the main page and each page that require credential will have a window for them to upload their credential before continue. Once they upload, their text will be passed to worker to decrypt and worker will return an address for that passage for them to continue. Client will also be required to check the desired passage has a correct securitynumber, browser identification, IP address or not. Or if the worker code detect any cheating, worker will just return home page with an error message. Client js will then tell user those information.</p><p>The sample code for loading file:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">'inputfile'</span>).addEventListener(<span class="string">'change'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">  <span class="keyword">var</span> fr=<span class="keyword">new</span> FileReader(); </span><br><span class="line">  fr.onload=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">    <span class="comment">//do something with fr.result, here is one sample</span></span><br><span class="line">    <span class="comment">//pass to the server using fetch and see if correct information is provided</span></span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'output'</span>).textContent=fr.result; </span><br><span class="line">  &#125; </span><br><span class="line">  </span><br><span class="line">  fr.readAsText(<span class="keyword">this</span>.files[<span class="number">0</span>]); </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>The sample JSON data sever should return: [samplereceive]</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    securitynumber: <span class="string">"XXX"</span>,</span><br><span class="line">    next: <span class="string">"absolute address to the next passage"</span>,</span><br><span class="line">    browserID: <span class="string">"XXX"</span>,</span><br><span class="line">    IP: <span class="string">"XXX"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>The sample worker side that returns JSON: read more at <a href="https://developers.cloudflare.com/workers/learning/getting-started" target="_blank" rel="noopener">https://developers.cloudflare.com/workers/learning/getting-started</a> [returnjson]</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">addEventListener(<span class="string">"fetch"</span>, event =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> data = &#123;</span><br><span class="line">    hello: <span class="string">"world"</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> json = <span class="built_in">JSON</span>.stringify(data, <span class="literal">null</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> event.respondWith(</span><br><span class="line">    <span class="keyword">new</span> Response(json, &#123;</span><br><span class="line">      headers: &#123;</span><br><span class="line">        <span class="string">"content-type"</span>: <span class="string">"application/json;charset=UTF-8"</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  )</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>The client will then direct user to the page in the ‚Äúnext‚Äù field and also pass in those stuff as a localstorage. The page in the ‚Äúnext‚Äù field will finish the remaining validation stuff.</p><p>For the validation in each page, we might check the IP and BrowserID locally. And then check the securitycode with worker side by passing a JSON object, worker side will check if security code of this passage is correct or not. If result is correct, user have access, otherwise user doesn‚Äôt have access.</p><p>Sample request JSON:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    passageName: <span class="string">"XXX"</span>,</span><br><span class="line">    securityCode: <span class="string">"XXX"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Return is just a JSON of true or false and password for this passage.</p><h5 id="encrypt-decrypt"><a class="markdownIt-Anchor" href="#encrypt-decrypt"></a> Encrypt &amp; Decrypt</h5><p>All encription and decription, no matter sever side or user side, will always be handled by using AES via crypto-js. Sample code shown below: More details could be read at <a href="https://github.com/brix/crypto-js" target="_blank" rel="noopener">https://github.com/brix/crypto-js</a> and <a href="https://www.c-sharpcorner.com/blogs/advanced-encryption-in-javascript-using-cryptojs" target="_blank" rel="noopener">https://www.c-sharpcorner.com/blogs/advanced-encryption-in-javascript-using-cryptojs</a> [pointsys]</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Encrypt</span></span><br><span class="line"><span class="keyword">var</span> ciphertext = CryptoJS.AES.encrypt(<span class="string">'my message'</span>, <span class="string">'secret key 123'</span>).toString();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Decrypt</span></span><br><span class="line"><span class="keyword">var</span> bytes  = CryptoJS.AES.decrypt(ciphertext, <span class="string">'secret key 123'</span>);</span><br><span class="line"><span class="keyword">var</span> originalText = bytes.toString(CryptoJS.enc.Utf8);</span><br></pre></td></tr></table></figure><p>We also need to include their script in the header:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdnjs.cloudflare.com/ajax/libs/cryptojs/3.1.2/rollups/aes.js"</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>In the worker side, we will still use crypto-js with another method, which is we need to require first.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> AES = <span class="built_in">require</span>(<span class="string">"crypto-js/aes"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Encrypt</span></span><br><span class="line"><span class="keyword">var</span> ciphertext = CryptoJS.AES.encrypt(<span class="string">'my message'</span>, <span class="string">'secret key 123'</span>).toString();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Decrypt</span></span><br><span class="line"><span class="keyword">var</span> bytes  = CryptoJS.AES.decrypt(ciphertext, <span class="string">'secret key 123'</span>);</span><br><span class="line"><span class="keyword">var</span> originalText = bytes.toString(CryptoJS.enc.Utf8);</span><br></pre></td></tr></table></figure><h1 id="quizzes"><a class="markdownIt-Anchor" href="#quizzes"></a> Quizzes</h1><h5 id="host-2"><a class="markdownIt-Anchor" href="#host-2"></a> Host</h5><p>This page will be hosted at main site in a sub directory, at <a href="http://capitaltwo.ga/quiz/" target="_blank" rel="noopener">capitaltwo.ga/quiz/</a>. Structure will be described in Client Side at [clientside].</p><p>[quiz] Quiz part will utilize the Cloudflare Worker functions. Quiz question will be stored in each script. Each script has a size limit of 1 MB, it is enough to store 160-240 questions. (Assume 200 chars per question, 200*240 = 48000 &lt; 1048576)</p><p>Each generated quiz would contain some of Pre-defined Quiz and some Generated quiz, the proportion of each part could be pre-defined or not pre-defined. We could get the quiz questions from quizlet.</p><h2 id="quiz-type"><a class="markdownIt-Anchor" href="#quiz-type"></a> Quiz Type</h2><h3 id="pre-defined-quiz"><a class="markdownIt-Anchor" href="#pre-defined-quiz"></a> Pre-defined Quiz</h3><p>All Pre-defined Quiz question will be pre-defined in JSON field.</p><p>Sample pre-defined quiz:</p><blockquote><p><span>Pre-defined Quiz</span> Is 401K a tax deferred retirement plan funded by employees of profit seeking business?</p><p>A. Yes</p><p>B. No</p></blockquote><p>Sample JSON format:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">"QuestionText"</span>: <span class="xml"><span class="tag">&lt;<span class="name">The</span> <span class="attr">text</span> <span class="attr">of</span> <span class="attr">question</span>&gt;</span>,</span></span><br><span class="line"><span class="xml">        "Choices": &#123;"option1" : "choice text", "option2" : "choice text",...&#125;,</span></span><br><span class="line">        "Answer": &lt;option&gt;,  </span><br><span class="line">        "Explanation": &lt;word description&gt;,  </span><br><span class="line">    &#125;, ...</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="generated-quiz"><a class="markdownIt-Anchor" href="#generated-quiz"></a> Generated Quiz</h3><p>Generated quiz is a quiz that have some variables able to be changed. Each quiz question means a pair of generation and validation method in worker. Sample generated quiz: The 1000 and 3.6 in the following question could be changed.</p><blockquote><p><span>Generated Quiz</span> You rent 1000 from bank at an APR of 3.6% for a year, how much interest you need to pay for a year?</p><p>______</p></blockquote><p>Because we will not have a lot of calculation in the quiz part, I guess we could just define each question separately. It would be enough.</p><h2 id="preparing-quiz"><a class="markdownIt-Anchor" href="#preparing-quiz"></a> Preparing Quiz</h2><h3 id="worker-side"><a class="markdownIt-Anchor" href="#worker-side"></a> Worker side</h3><p>Worker will generate the quiz and return a JSON to a request. Because the original question is in JSON file, this place is just to randomly select some question from the bank. The question bank is just an object variable in script. We might add more verification in the request header in the future. For the code of returning JSON, see [returnjson]. Here is the sample JSON file returned from worker:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">"QNumber"</span>: <span class="xml"><span class="tag">&lt;<span class="name">The</span> <span class="attr">index</span> <span class="attr">of</span> <span class="attr">number</span>, <span class="attr">the</span> <span class="attr">same</span> <span class="attr">as</span> <span class="attr">the</span> <span class="attr">order</span> <span class="attr">of</span> <span class="attr">problem</span> <span class="attr">set</span>, <span class="attr">for</span> <span class="attr">indexing</span> <span class="attr">purpose</span>&gt;</span>,</span></span><br><span class="line">        "QuestionText": &lt;The text of question&gt;,</span><br><span class="line">        "QuestionType": &lt;Either pre-defined or generated&gt;,</span><br><span class="line">        "QuestionSubType": &lt;none if multiple choice, otherwise an identification code for validation method&gt;,</span><br><span class="line">        "Choices": &lt;&#123;"none":" or &#123;"option1" : "choice text", "option2" : "choice text",...&#125;&gt;, //none means it is a calculation question.</span><br><span class="line">    &#125;, ...</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>Some data describing requiesting detail, such as quizcode, will be passed into worker in the data part. And then worker could use it to navigate to the correct question.</p><p>Whether generate quiz in one file (use header to distinguish the function) or in seperate files (client call different address on worker) on worker is up to designer.</p><p>Worker side will also have script to check the correctness of the quiz by using the QNumber or calculation method and return correctness for each question. Client will sent a JSON as body in a fetch request, sample passed in JSON:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">"Task"</span>: <span class="string">"XXX"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">"QNumber"</span>: <span class="xml"><span class="tag">&lt;<span class="name">The</span> <span class="attr">index</span> <span class="attr">of</span> <span class="attr">number</span>, <span class="attr">the</span> <span class="attr">same</span> <span class="attr">as</span> <span class="attr">the</span> <span class="attr">order</span> <span class="attr">of</span> <span class="attr">problem</span> <span class="attr">set</span>, <span class="attr">for</span> <span class="attr">indexing</span> <span class="attr">purpose</span>&gt;</span>,</span></span><br><span class="line">        "Selection": &lt;Choice&gt; //user selection of the corresponding quiz  </span><br><span class="line">    &#125;, ...</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>Sample return JSON for validation process from server: The order of each question should remain the same as the order in the pass in data. And only represent wrong questions.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">"pass"</span>: <span class="xml"><span class="tag">&lt;<span class="name">true,</span> <span class="attr">false</span>&gt;</span></span></span><br><span class="line"><span class="xml">    &#125;,//the first object records if user pass this quiz (60\%) or not</span></span><br><span class="line"><span class="xml">    &#123;</span></span><br><span class="line">        "QNumber": &lt;The index of number, the same as the order of problem set, for indexing purpose&gt;,</span><br><span class="line">        "Correct": &lt;true, false&gt;,  </span><br><span class="line">        "Explanation": &lt;word description&gt;,  </span><br><span class="line">    &#125;, ...</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="client-side"><a class="markdownIt-Anchor" href="#client-side"></a> Client Side</h3><p>Client side is just to formulate the data as described in the pass in side in the above part. And it will loop through the data passed back to either formulate questions or generate a report, like check answer and showing explanation. If a user pass the quiz, user will be guided to the next section After finishing quiz at [afterquiz].</p><p>In the main page of Client Side, which is located at <a href="http://capitaltwo.ga/quiz/index.html" target="_blank" rel="noopener">capitaltwo.ga/quiz/index.html</a>. The default page will have a input window asking user for quizcode. Then it will guide user to <a href="http://capitaltwo.ga/quiz/index.html?quizcode=XXX" target="_blank" rel="noopener">capitaltwo.ga/quiz/index.html?quizcode=XXX</a>. This page will be generated to be the page for this quiz. Other page could navigate user to the quiz page by using <a href="http://capitaltwo.ga/quiz/index.html?quizcode=XXX" target="_blank" rel="noopener">capitaltwo.ga/quiz/index.html?quizcode=XXX</a>. Then they will not see the default page in the case.</p><p>The method behind this is to analyze the parameter in the javascript part, sample code for getting parameters as shown below:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> request = &#123;</span><br><span class="line">        QueryString: <span class="function"><span class="keyword">function</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> uri = <span class="built_in">window</span>.location.search;</span><br><span class="line">            <span class="keyword">var</span> re = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">""</span> + val + <span class="string">"=([^&amp;?]*)"</span>, <span class="string">"ig"</span>);</span><br><span class="line">            <span class="keyword">return</span> ((uri.match(re)) ? (uri.match(re)[<span class="number">0</span>].substr(val.length + <span class="number">1</span>)) : <span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">request.QueryString(<span class="string">"wind"</span>) == <span class="literal">null</span>;<span class="comment">//check no parameters called wind</span></span><br><span class="line">request.QueryString(<span class="string">"wind"</span>);<span class="comment">//get the value of parameter of wind</span></span><br></pre></td></tr></table></figure><p>By using those information get, this javascript will then write corresponding elements by using DOM Manipulation Methods in jQuery. Sample:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Creating a new div element </span></span><br><span class="line"><span class="keyword">var</span> newDiv = <span class="built_in">document</span>.createElement(<span class="string">"div"</span>);</span><br><span class="line"> </span><br><span class="line"><span class="comment">// Creating a text node </span></span><br><span class="line"><span class="keyword">var</span> newContent = <span class="built_in">document</span>.createTextNode(<span class="string">"Hi, how are you doing?"</span>);</span><br><span class="line"> </span><br><span class="line"><span class="comment">// Adding the text node to the newly created div</span></span><br><span class="line">newDiv.appendChild(newContent);</span><br><span class="line"> </span><br><span class="line"><span class="comment">// Adding the newly created element and its content into the DOM </span></span><br><span class="line"><span class="keyword">var</span> currentDiv = <span class="built_in">document</span>.getElementById(<span class="string">"main"</span>); </span><br><span class="line"><span class="built_in">document</span>.body.appendChild(newDiv, currentDiv);</span><br></pre></td></tr></table></figure><p>Jquery can also do this by using append():</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'#div1'</span>).after(<span class="string">'&lt;div style="background-color:yellow"&gt; New div &lt;/div&gt;'</span>);</span><br></pre></td></tr></table></figure><p>Sample HTML:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"main"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">id</span>=<span class="string">"title"</span>&gt;</span>Hello World!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"hint"</span>&gt;</span>This is a simple paragraph.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="after-finishing-quiz"><a class="markdownIt-Anchor" href="#after-finishing-quiz"></a> After finishing quiz</h2><p>If user passed this quiz and checked all explanations, user will get choices of getting certificate or go to next passage directly.</p><p>If user choose to go to the next page directly, the client will then ask worker provide related JSON object, and then direct user to the page in the ‚Äúnext‚Äù field and also pass in those stuff as a localstorage. The sample received stuff is described in previous part at [samplereceive]. The page in the ‚Äúnext‚Äù field will finish the remaining validation stuff. The request JSON is slightly different than the request JSON discussed before. And worker should have a seperate function for it, the sample request JSON.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    quizcode: <span class="string">"XXX"</span>,</span><br><span class="line">    browserID: <span class="string">"XXX"</span>,</span><br><span class="line">    IP: <span class="string">"XXX"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>If they choose to get certificate, the client side script will pass in some information, including [quizcode], [Browser Identification String], [IP Address] to worker and will receive an encrypted text. See later part for how this works. And a small window will go out with certificate information. The small window sample code is:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">OpenDetial</span>(<span class="params">id, width, height</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> _srcWidth = <span class="built_in">parseInt</span>(<span class="built_in">window</span>.innerWidth || <span class="built_in">document</span>.documentElement.clientWidth || <span class="built_in">document</span>.body.clientWidth);</span><br><span class="line">    <span class="keyword">var</span> _srcHeight = <span class="built_in">parseInt</span>(<span class="built_in">window</span>.innerHeight || <span class="built_in">document</span>.documentElement.clientHeight || <span class="built_in">document</span>.body.clientHeight);</span><br><span class="line">    _width = <span class="built_in">parseInt</span>(width) || _srcWidth;</span><br><span class="line">    _height = <span class="built_in">parseInt</span>(height) || _srcHeight;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> cssWidth = width == <span class="literal">undefined</span> ? <span class="string">"100%"</span> : _width;</span><br><span class="line">    <span class="keyword">var</span> cssHeight = height == <span class="literal">undefined</span> ? <span class="string">"100%"</span> : _height;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> left = (_srcWidth - _width) == <span class="number">0</span> ? <span class="number">0</span> : ((_srcWidth - _width) / <span class="number">2</span>);</span><br><span class="line">    <span class="keyword">var</span> top = (_srcHeight - _height) == <span class="number">0</span> ? <span class="number">0</span> : ((_srcHeight - _height) / <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> _id = <span class="string">"#"</span> + id;</span><br><span class="line">    <span class="keyword">var</span> detial;</span><br><span class="line">        detial =</span><br><span class="line">        <span class="string">'&lt;div id="panel"&gt; &lt;div class="card white z-depth-3"&gt;&lt;div class="card-content black-text"&gt;  &lt;div class="row"&gt;'</span> +</span><br><span class="line">        <span class="string">'&lt;div class="file-field input-field col s12"&gt; &lt;div class="btn"&gt;&lt;span&gt;File&lt;/span&gt;&lt;input id="history_data" name="history_data" type="file" onchange="loadFile(this)" accept=".csv"&gt;&lt;/div&gt;&lt;div class="file-path-wrapper"&gt;&lt;input placeholder="Input Stream" id="Input_Stream" class="file-path validate" type="text"&gt;&lt;/div&gt;&lt;/div&gt;&lt;p class="col s12"&gt;&lt;label&gt;&lt;input type="checkbox" onchange="switchExport(this);" /&gt;&lt;span&gt;I don\'t need to export usage data(Choose when source is intended to be large).&lt;/span&gt;&lt;/label&gt;&lt;/p&gt;&lt;p class="col s8" id="notice"&gt;&lt;p&gt;&lt;button  id="usethis" class="waves-effect waves-light btn col s3" disabled onclick="Start()"&gt;Use This&lt;/button&gt;'</span> +</span><br><span class="line">        <span class="string">'&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;'</span>;</span><br><span class="line"></span><br><span class="line">    $(_id).html(detial);</span><br><span class="line">    $(_id).css(&#123;</span><br><span class="line">        <span class="string">"display"</span>: <span class="string">"none"</span>,</span><br><span class="line">        <span class="string">"position"</span>: <span class="string">"fixed"</span>,</span><br><span class="line">        <span class="string">"bottom"</span>: <span class="string">"0px"</span>,</span><br><span class="line">        <span class="string">"width"</span>: <span class="string">"100%"</span>,</span><br><span class="line">        <span class="string">"top"</span>: <span class="string">"0px"</span>,</span><br><span class="line">        <span class="string">"height"</span>: <span class="string">"100%"</span>,</span><br><span class="line">        <span class="string">"background-color"</span>: <span class="string">"rgba(223, 236, 236, 0.36)"</span></span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">"#panel"</span>).css(&#123;</span><br><span class="line">        <span class="string">"width"</span>: cssWidth,</span><br><span class="line">        <span class="string">"height"</span>: cssHeight,</span><br><span class="line">        <span class="string">"left"</span>: left,</span><br><span class="line">        <span class="string">"top"</span>: top,</span><br><span class="line">        <span class="string">"position"</span>: <span class="string">"fixed"</span></span><br><span class="line">    &#125;);</span><br><span class="line">    $(_id).slideDown();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">OpenDetial(<span class="string">"&lt;div id&gt;"</span>, <span class="number">400</span>, <span class="number">200</span>);<span class="comment">//open this window</span></span><br></pre></td></tr></table></figure><p>If user choose to download it, Then client could generate a download like this:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> funDownload = <span class="function"><span class="keyword">function</span>(<span class="params">content, filename</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> eleLink = <span class="built_in">document</span>.createElement(<span class="string">'a'</span>);</span><br><span class="line">    eleLink.download = filename;</span><br><span class="line">    eleLink.style.display = <span class="string">'none'</span>;</span><br><span class="line">    <span class="keyword">var</span> blob = <span class="keyword">new</span> Blob([content]);</span><br><span class="line">    eleLink.href = URL.createObjectURL(blob);</span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(eleLink);</span><br><span class="line">    eleLink.click();</span><br><span class="line">    <span class="built_in">document</span>.body.removeChild(eleLink);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">funDownload(text, <span class="string">'credential.txt'</span>);</span><br></pre></td></tr></table></figure><p>We will use body to pass information to worker, Sample JS to request information, read more at <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch</a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">fetch(<span class="string">'https://XXX.1442334619.workers.dev'</span>, &#123;</span><br><span class="line">  headers: &#123;</span><br><span class="line">    <span class="string">'User-agent'</span>: <span class="string">'Mozilla/4.0 Custom User Agent'</span>,</span><br><span class="line">    <span class="string">'Content-Type'</span>: <span class="string">'application/json'</span></span><br><span class="line">    <span class="comment">// 'Content-Type': 'application/x-www-form-urlencoded',</span></span><br><span class="line">  &#125;,</span><br><span class="line">  body: <span class="built_in">JSON</span>.stringify(data)</span><br><span class="line">&#125;)</span><br><span class="line">.then(<span class="function"><span class="params">response</span> =&gt;</span> response.json())</span><br><span class="line">.then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;)</span><br><span class="line">.catch(<span class="function"><span class="params">error</span> =&gt;</span> <span class="built_in">console</span>.error(error))</span><br></pre></td></tr></table></figure><p>sample JSON request body</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    quizcode: <span class="string">"XXX"</span>,</span><br><span class="line">    IP: <span class="string">"XXX"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Sample code for returning text from worker side, this step will need to install worker local environment. It will need to use quizcode information to get the securitycode of next passage and other information to finish the encryption.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> AES = <span class="built_in">require</span>(<span class="string">"crypto-js/aes"</span>);</span><br><span class="line"></span><br><span class="line">addEventListener(<span class="string">"fetch"</span>, event =&gt; &#123;</span><br><span class="line">  event.respondWith(handleRequest(event.request))</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">handleRequest</span>(<span class="params">request</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//use request.body and request.header and handle encryption using AES</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> Response(<span class="string">"Hello worker!"</span>, &#123;</span><br><span class="line">    headers: &#123; <span class="string">"content-type"</span>: <span class="string">"text/plain"</span> &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="stock-simulation-tool"><a class="markdownIt-Anchor" href="#stock-simulation-tool"></a> Stock Simulation Tool</h1><h5 id="host-3"><a class="markdownIt-Anchor" href="#host-3"></a> Host</h5><p>This page will be hosted at main site in a sub directory, at <a href="http://capitaltwo.ga/stock/" target="_blank" rel="noopener">capitaltwo.ga/stock/</a>. Structure could be determined by user implementing it. Data part of this section may be put in the same directory or using Guthub release/raw.github.com in another repo if it is too big.</p><p>This tool will get some history data and let user have a simulated stock trade experience. User will could have an initial amount of money and trade in and trade out at some time. We will compress a day‚Äôs trend chart to 10 minutes.</p><h5 id="data-preparation"><a class="markdownIt-Anchor" href="#data-preparation"></a> Data Preparation</h5><p>Data source could be stored in Github, it might also be held in other cloud storage. We will provide user with 5 stocks to play with in each game. As required of randomization, we will prepare 10 pairs of data. Each data will include the following information in csv like this:</p><pre><code>Date,Open,High,Low,Close,Volume,Adj Close11:59:16,43.23,43.32,42.91,43.20,28942700,43.2011:59:16,42.84,43.45,42.65,43.23,30314900,43.2311:59:17,42.74,43.17,42.21,42.74,24634000,42.7411:59:18,43.31,43.46,42.83,43.08,26266400,43.0811:59:19,42.97,43.47,42.81,43.37,34244200,43.3711:59:20,43.21,43.25,42.60,42.86,31170300,42.8611:59:20,43.38,43.69,43.08,43.16,31537500,43.1611:59:20,44.07,44.10,43.29,43.58,31921400,43.5811:59:21,43.91,44.09,43.64,43.89,27763100,43.89</code></pre><h5 id="data-reading"><a class="markdownIt-Anchor" href="#data-reading"></a> Data Reading</h5><p>Because this is a large amount of data, it might cause a high traffic and memory load would be high, in extreme case, it might also cause IO choke. We will use <a href="https://www.papaparse.com/" target="_blank" rel="noopener">Papa Parse</a> to use stream to fix this issue.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Papa.parse(<span class="string">"http://example.com/file.csv"</span>, &#123;</span><br><span class="line">    header: <span class="literal">true</span>,</span><br><span class="line">        skipEmptyLines: <span class="literal">true</span>,</span><br><span class="line">        dynamicTyping: <span class="literal">true</span>,</span><br><span class="line">    download: <span class="literal">true</span>,</span><br><span class="line">    step: <span class="function"><span class="keyword">function</span>(<span class="params">results, parser</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"Row data:"</span>, results.data[<span class="string">"Time"</span>]);</span><br><span class="line">    complete: <span class="function"><span class="keyword">function</span>(<span class="params">results</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(results);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>As always, we will need to include their js file in our HTML header.</p><h5 id="data-representation"><a class="markdownIt-Anchor" href="#data-representation"></a> Data Representation</h5><p>For the data representation, I think <a href="https://www.amcharts.com/" target="_blank" rel="noopener">amcharts</a>. A sample representation code like below: Refer to <a href="https://www.amcharts.com/demos/stock-chart/" target="_blank" rel="noopener">https://www.amcharts.com/demos/stock-chart/</a> for more details.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line">am4core.ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Themes begin</span></span><br><span class="line">am4core.useTheme(am4themes_animated);</span><br><span class="line"><span class="comment">// Themes end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Create chart</span></span><br><span class="line"><span class="keyword">var</span> chart = am4core.create(<span class="string">"chartdiv"</span>, am4charts.XYChart);</span><br><span class="line">chart.padding(<span class="number">0</span>, <span class="number">15</span>, <span class="number">0</span>, <span class="number">15</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Load external data</span></span><br><span class="line">chart.dataSource.url = <span class="string">"https://www.amcharts.com/wp-content/uploads/assets/stock/MSFT.csv"</span>;</span><br><span class="line">chart.dataSource.parser = <span class="keyword">new</span> am4core.CSVParser();</span><br><span class="line">chart.dataSource.parser.options.useColumnNames = <span class="literal">true</span>;</span><br><span class="line">chart.dataSource.parser.options.reverse = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// the following line makes value axes to be arranged vertically.</span></span><br><span class="line">chart.leftAxesContainer.layout = <span class="string">"vertical"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// uncomment this line if you want to change order of axes</span></span><br><span class="line"><span class="comment">//chart.bottomAxesContainer.reverseOrder = true;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> dateAxis = chart.xAxes.push(<span class="keyword">new</span> am4charts.DateAxis());</span><br><span class="line">dateAxis.renderer.grid.template.location = <span class="number">0</span>;</span><br><span class="line">dateAxis.renderer.ticks.template.length = <span class="number">8</span>;</span><br><span class="line">dateAxis.renderer.ticks.template.strokeOpacity = <span class="number">0.1</span>;</span><br><span class="line">dateAxis.renderer.grid.template.disabled = <span class="literal">true</span>;</span><br><span class="line">dateAxis.renderer.ticks.template.disabled = <span class="literal">false</span>;</span><br><span class="line">dateAxis.renderer.ticks.template.strokeOpacity = <span class="number">0.2</span>;</span><br><span class="line">dateAxis.renderer.minLabelPosition = <span class="number">0.01</span>;</span><br><span class="line">dateAxis.renderer.maxLabelPosition = <span class="number">0.99</span>;</span><br><span class="line">dateAxis.keepSelection = <span class="literal">true</span>;</span><br><span class="line">dateAxis.minHeight = <span class="number">30</span>;</span><br><span class="line"></span><br><span class="line">dateAxis.groupData = <span class="literal">true</span>;</span><br><span class="line">dateAxis.minZoomCount = <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// these two lines makes the axis to be initially zoomed-in</span></span><br><span class="line"><span class="comment">// dateAxis.start = 0.7;</span></span><br><span class="line"><span class="comment">// dateAxis.keepSelection = true;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> valueAxis = chart.yAxes.push(<span class="keyword">new</span> am4charts.ValueAxis());</span><br><span class="line">valueAxis.tooltip.disabled = <span class="literal">true</span>;</span><br><span class="line">valueAxis.zIndex = <span class="number">1</span>;</span><br><span class="line">valueAxis.renderer.baseGrid.disabled = <span class="literal">true</span>;</span><br><span class="line"><span class="comment">// height of axis</span></span><br><span class="line">valueAxis.height = am4core.percent(<span class="number">65</span>);</span><br><span class="line"></span><br><span class="line">valueAxis.renderer.gridContainer.background.fill = am4core.color(<span class="string">"#000000"</span>);</span><br><span class="line">valueAxis.renderer.gridContainer.background.fillOpacity = <span class="number">0.05</span>;</span><br><span class="line">valueAxis.renderer.inside = <span class="literal">true</span>;</span><br><span class="line">valueAxis.renderer.labels.template.verticalCenter = <span class="string">"bottom"</span>;</span><br><span class="line">valueAxis.renderer.labels.template.padding(<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//valueAxis.renderer.maxLabelPosition = 0.95;</span></span><br><span class="line">valueAxis.renderer.fontSize = <span class="string">"0.8em"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> series = chart.series.push(<span class="keyword">new</span> am4charts.LineSeries());</span><br><span class="line">series.dataFields.dateX = <span class="string">"Date"</span>;</span><br><span class="line">series.dataFields.valueY = <span class="string">"Adj Close"</span>;</span><br><span class="line">series.tooltipText = <span class="string">"&#123;valueY.value&#125;"</span>;</span><br><span class="line">series.name = <span class="string">"MSFT: Value"</span>;</span><br><span class="line">series.defaultState.transitionDuration = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> valueAxis2 = chart.yAxes.push(<span class="keyword">new</span> am4charts.ValueAxis());</span><br><span class="line">valueAxis2.tooltip.disabled = <span class="literal">true</span>;</span><br><span class="line"><span class="comment">// height of axis</span></span><br><span class="line">valueAxis2.height = am4core.percent(<span class="number">35</span>);</span><br><span class="line">valueAxis2.zIndex = <span class="number">3</span></span><br><span class="line"><span class="comment">// this makes gap between panels</span></span><br><span class="line">valueAxis2.marginTop = <span class="number">30</span>;</span><br><span class="line">valueAxis2.renderer.baseGrid.disabled = <span class="literal">true</span>;</span><br><span class="line">valueAxis2.renderer.inside = <span class="literal">true</span>;</span><br><span class="line">valueAxis2.renderer.labels.template.verticalCenter = <span class="string">"bottom"</span>;</span><br><span class="line">valueAxis2.renderer.labels.template.padding(<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>);</span><br><span class="line"><span class="comment">//valueAxis.renderer.maxLabelPosition = 0.95;</span></span><br><span class="line">valueAxis2.renderer.fontSize = <span class="string">"0.8em"</span></span><br><span class="line"></span><br><span class="line">valueAxis2.renderer.gridContainer.background.fill = am4core.color(<span class="string">"#000000"</span>);</span><br><span class="line">valueAxis2.renderer.gridContainer.background.fillOpacity = <span class="number">0.05</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> series2 = chart.series.push(<span class="keyword">new</span> am4charts.ColumnSeries());</span><br><span class="line">series2.dataFields.dateX = <span class="string">"Date"</span>;</span><br><span class="line">series2.dataFields.valueY = <span class="string">"Volume"</span>;</span><br><span class="line">series2.yAxis = valueAxis2;</span><br><span class="line">series2.tooltipText = <span class="string">"&#123;valueY.value&#125;"</span>;</span><br><span class="line">series2.name = <span class="string">"MSFT: Volume"</span>;</span><br><span class="line"><span class="comment">// volume should be summed</span></span><br><span class="line">series2.groupFields.valueY = <span class="string">"sum"</span>;</span><br><span class="line">series2.defaultState.transitionDuration = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">chart.cursor = <span class="keyword">new</span> am4charts.XYCursor();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> scrollbarX = <span class="keyword">new</span> am4charts.XYChartScrollbar();</span><br><span class="line">scrollbarX.series.push(series);</span><br><span class="line">scrollbarX.marginBottom = <span class="number">20</span>;</span><br><span class="line">scrollbarX.scrollbarChart.xAxes.getIndex(<span class="number">0</span>).minHeight = <span class="literal">undefined</span>;</span><br><span class="line">chart.scrollbarX = scrollbarX;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Add range selector</span></span><br><span class="line"><span class="keyword">var</span> selector = <span class="keyword">new</span> am4plugins_rangeSelector.DateAxisRangeSelector();</span><br><span class="line">selector.container = <span class="built_in">document</span>.getElementById(<span class="string">"controls"</span>);</span><br><span class="line">selector.axis = dateAxis;</span><br><span class="line"></span><br><span class="line">&#125;); <span class="comment">// end am4core.ready()</span></span><br></pre></td></tr></table></figure><p>To use it, we need to include their js library:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css"><span class="selector-id">#chartdiv</span> &#123;</span></span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 500px;</span><br><span class="line">  max-width: 100%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="css"><span class="selector-id">#controls</span> &#123;</span></span><br><span class="line">  overflow: hidden;</span><br><span class="line">  padding-bottom: 3px;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.amcharts.com/lib/4/core.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.amcharts.com/lib/4/charts.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.amcharts.com/lib/4/plugins/rangeSelector.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.amcharts.com/lib/4/themes/animated.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"controls"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"chartdiv"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><span>Notice</span> We will draw the graph animated, so it is not just using csv file directly as code above. We will pass data into the graph asa time goes.</p><h5 id="user-interaction"><a class="markdownIt-Anchor" href="#user-interaction"></a> User Interaction</h5><p>For the user interaction, user could trade in and trade out by put number or press button. The key solution at here is to refresh the page every 100 ms(or other rational value). Sample refresh code would like this:</p><p>If asynchronous, not really recommend as js is synchronous.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> hoverId = setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Do whatever you want at here, below is just a sample</span></span><br><span class="line">    data.push(&#123;</span><br><span class="line">        name: history.getLast().getKey(),</span><br><span class="line">        value: [</span><br><span class="line">            history.getLast().getKey(),</span><br><span class="line">            history.getLast().getValue()</span><br><span class="line">        ]</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">&#125;, freq);</span><br><span class="line"></span><br><span class="line">clearInterval(hoverId); <span class="comment">//Use this when we no longer want to refresh the page</span></span><br></pre></td></tr></table></figure><p>Synchronous method could be used to parallel with file reading:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> delay = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (Model_Status == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="comment">//do some things at here</span></span><br><span class="line">            parser.resume();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                delay();</span><br><span class="line">            &#125;, <span class="number">200</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    delay();</span><br><span class="line">&#125;, freq);</span><br></pre></td></tr></table></figure><p><span>Further Notice</span> User‚Äôs purchasing might influence stock market, and we can calculate this asa well. But I do not suggest this as JavaScript will have error in those detailed floating calculation. And user‚Äôs influence is pretty low.</p><h1 id="retirement-calculation-tool"><a class="markdownIt-Anchor" href="#retirement-calculation-tool"></a> Retirement Calculation Tool</h1><h5 id="host-4"><a class="markdownIt-Anchor" href="#host-4"></a> Host</h5><p>This page will be hosted at main site in a sub directory, at <a href="http://capitaltwo.ga/retire/" target="_blank" rel="noopener">capitaltwo.ga/retire/</a>. Structure could be determined by user implementing it.</p><p>This part doesn‚Äôt have any special stuff. We will collect some information and let user select some common retirement plan, or customize their own plan. And click calculate to get the calculation result and see the amount of money they could receive in the next few months.</p><p>This part will only use some normal javascript function with some calculation logic. When representing result, we could use another page or rewrite current page using javascript. We might represent some pie chart for some data, code is represented in [combinefigure], like money from social security and money from deposite.</p><h1 id="loan-calculation-tool"><a class="markdownIt-Anchor" href="#loan-calculation-tool"></a> Loan Calculation Tool</h1><h5 id="host-5"><a class="markdownIt-Anchor" href="#host-5"></a> Host</h5><p>This page will be hosted at main site in a sub directory, at <a href="http://capitaltwo.ga/loan/" target="_blank" rel="noopener">capitaltwo.ga/loan/</a>. Structure could be determined by user implementing it.</p><p>This part doesn‚Äôt have any special stuff. We will collect some information and let user select some common loan plan and the duration of loan, or customize their own plan. And click calculate to get the calculation result. We will represent result in a table to show how much they need to pay in the next few months.</p><p>This part will only use some normal javascript function with some calculation logic. When representing result, we could use another page or rewrite current page using javascript. We might represent some pie chart for some data, code is represented in [combinefigure], like the interest and your base money.</p><h1 id="budgeting-tool"><a class="markdownIt-Anchor" href="#budgeting-tool"></a> Budgeting Tool</h1><h5 id="host-6"><a class="markdownIt-Anchor" href="#host-6"></a> Host</h5><p>This page will be hosted at main site in a sub directory, at <a href="http://capitaltwo.ga/budget/" target="_blank" rel="noopener">capitaltwo.ga/budget/</a>. Structure could be determined by user implementing it.</p><p>This will be in a collapsibles list and user could choose between those two.</p><h2 id="monthly-budgeting-tool"><a class="markdownIt-Anchor" href="#monthly-budgeting-tool"></a> Monthly Budgeting Tool</h2><p>This is a normal one month calculation. People will input their money in and money out category, then we just generate a report of money usage of current month. This is just a simple calculation to let money in - money out. And we could also draw some spending category chart using echarts. (Or amchart) A pie chart would be great.</p><p>A sample pie chart using echarts at [piechart], in this sample a div have <code>main</code> should be defined, like in [combinefigure]:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myChart = echarts.init(<span class="built_in">document</span>.getElementById(<span class="string">'main'</span>));</span><br><span class="line"><span class="keyword">var</span> options = &#123;</span><br><span class="line">    title: &#123;</span><br><span class="line">        text: <span class="string">'title'</span>,</span><br><span class="line">        subtext: <span class="string">'subtitle'</span>,</span><br><span class="line">        left: <span class="string">'center'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    tooltip: &#123;</span><br><span class="line">        trigger: <span class="string">'item'</span>,</span><br><span class="line">        formatter: <span class="string">'&#123;a&#125; &lt;br/&gt;&#123;b&#125; : &#123;c&#125; (&#123;d&#125;%)'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    legend: &#123;</span><br><span class="line">        orient: <span class="string">'vertical'</span>,</span><br><span class="line">        left: <span class="string">'left'</span>,</span><br><span class="line">        data: [<span class="string">'Direct'</span>, <span class="string">'Mail'</span>, <span class="string">'advertise'</span>, <span class="string">'video'</span>, <span class="string">'search'</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    series: [</span><br><span class="line">        &#123;</span><br><span class="line">            name: <span class="string">'source'</span>,</span><br><span class="line">            type: <span class="string">'pie'</span>,</span><br><span class="line">            radius: <span class="string">'55%'</span>,</span><br><span class="line">            center: [<span class="string">'50%'</span>, <span class="string">'60%'</span>],</span><br><span class="line">            data: [</span><br><span class="line">                &#123;<span class="attr">value</span>: <span class="number">335</span>, <span class="attr">name</span>: <span class="string">'Direct'</span>&#125;,</span><br><span class="line">                &#123;<span class="attr">value</span>: <span class="number">310</span>, <span class="attr">name</span>: <span class="string">'Mail'</span>&#125;,</span><br><span class="line">                &#123;<span class="attr">value</span>: <span class="number">234</span>, <span class="attr">name</span>: <span class="string">'advertise'</span>&#125;,</span><br><span class="line">                &#123;<span class="attr">value</span>: <span class="number">135</span>, <span class="attr">name</span>: <span class="string">'video'</span>&#125;,</span><br><span class="line">                &#123;<span class="attr">value</span>: <span class="number">1548</span>, <span class="attr">name</span>: <span class="string">'search'</span>&#125;</span><br><span class="line">            ],</span><br><span class="line">            emphasis: &#123;</span><br><span class="line">                itemStyle: &#123;</span><br><span class="line">                    shadowBlur: <span class="number">10</span>,</span><br><span class="line">                    shadowOffsetX: <span class="number">0</span>,</span><br><span class="line">                    shadowColor: <span class="string">'rgba(0, 0, 0, 0.5)'</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">myChart.setOption(options);</span><br></pre></td></tr></table></figure><p><span>0.48</span> Need to import script:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.staticfile.org/echarts/4.3.0/echarts.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><img src="/2020/Capstone-prooject-design-specification-v0-1/pie.png"><p>We could also analyze the data and made some suggestion to their spending.</p><h2 id="year-budgeting-tool"><a class="markdownIt-Anchor" href="#year-budgeting-tool"></a> Year Budgeting Tool</h2><p>User could type their money on each category or item with an importance level associated to it. With those information, we will solve it by using an optimization rules. User could choose either optimizing saving or optimizing consuming (maybe another word at here).</p><p>In this part, we will utilize <a href="https://github.com/JWally/jsLPSolver" target="_blank" rel="noopener">jsLPSolver</a> and solve the problem. Refer to [opsample] to see the sample of using it.</p><p>User will have choices to indicate if this is a one time purchase or not, like wishlist. Then we will make a plan to tell user when would be the best time to buy it. And in order to achieve this goal, what they should do in each month.</p><p>In this category, we will consider the saved money will be used in some low-risk investment, like 0.036 APR. The report generated would be the item should be bought at that month.</p><p>We could support up to 100 level of priority, but priority of 1 is the essential stuff, like housing, foods. Snacks might be in a lower priority.</p><h5 id="optimize-saving"><a class="markdownIt-Anchor" href="#optimize-saving"></a> Optimize saving</h5><p>This process doesn‚Äôt require optimization, thought it could be used to reach this purpose. But it might be as easy as loop through the list and select all components that have a priority level of 1. Sample methods as below:</p><img src="/2020/Capstone-prooject-design-specification-v0-1/alg1.png"><h5 id="optimize-consume"><a class="markdownIt-Anchor" href="#optimize-consume"></a> Optimize consume</h5><p>Define variables: <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">P_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.68333em"></span><span class="strut bottom" style="height:.969438em;vertical-align:-.286108em"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:.13889em">P</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.13889em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:.05724em">j</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span></span></span></span> ‚Äì The amount of money that needs to be spent in different categories i in month j.</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>L</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">L_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.68333em"></span><span class="strut bottom" style="height:.969438em;vertical-align:-.286108em"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">L</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:.05724em">j</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span></span></span></span> ‚Äì The priority level associate with each spending category, <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">P_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.68333em"></span><span class="strut bottom" style="height:.969438em;vertical-align:-.286108em"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:.13889em">P</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.13889em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:.05724em">j</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span></span></span></span>. It is the reverse of the original list done by user. Like for high priority stuff, <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>L</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">L_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.68333em"></span><span class="strut bottom" style="height:.969438em;vertical-align:-.286108em"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">L</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:.05724em">j</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span></span></span></span> will be high</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>I</mi><mrow><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">I_{j}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.68333em"></span><span class="strut bottom" style="height:.969438em;vertical-align:-.286108em"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:.07847em">I</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.07847em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:.05724em">j</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span></span></span></span> ‚Äì The anticipated money in in each month.</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>T</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">T_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.68333em"></span><span class="strut bottom" style="height:.969438em;vertical-align:-.286108em"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:.13889em">T</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.13889em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:.05724em">j</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span></span></span></span> ‚Äì The money available at the end of month J.</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>S</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">S_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.68333em"></span><span class="strut bottom" style="height:.969438em;vertical-align:-.286108em"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:.05764em">S</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.05764em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:.05724em">j</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span></span></span></span> ‚Äì The binary selector to indicate this category should be selected or not in the month j.</p><p>A ‚Äì The one month rate of buying some low-risk investment product.</p><p>O ‚Äì Set including one time purchase, like wait list.</p><p>R ‚Äì Set including repeating purchase.</p><p>Formula:</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtable><mtr><mtd><mrow></mrow></mtd><mtd><mrow><mrow></mrow><mtext><mi mathvariant="normal">M</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">x</mi><mi mathvariant="normal">m</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">z</mi><mi mathvariant="normal">e</mi><mtext>¬†</mtext></mtext></mrow></mtd><mtd><mrow><msubsup><mo>‚àë</mo><mrow><mi>i</mi></mrow><mrow><mi>R</mi><mo>‚à™</mo><mi>O</mi></mrow></msubsup><msubsup><mo>‚àë</mo><mrow><mi>j</mi></mrow><mrow><mn>1</mn><mn>2</mn></mrow></msubsup><msub><mi>L</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><msub><mi>S</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow></mtd></mtr><mtr><mtd><mrow></mrow></mtd><mtd><mrow><mrow></mrow><mtext><mi mathvariant="normal">S</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">b</mi><mi mathvariant="normal">j</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">c</mi><mi mathvariant="normal">t</mi><mtext>¬†</mtext><mi mathvariant="normal">t</mi><mi mathvariant="normal">o</mi></mtext></mrow></mtd><mtd><mrow><msubsup><mo>‚àë</mo><mrow><mi>i</mi></mrow><mrow><mi>n</mi></mrow></msubsup><msub><mi>P</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><msub><mi>S</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>‚â§</mo><mi>A</mi><msub><mi>T</mi><mrow><mi>j</mi><mo>‚àí</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>I</mi><mi>j</mi></msub></mrow></mtd></mtr><mtr><mtd><mrow></mrow></mtd><mtd><mrow><mrow></mrow></mrow></mtd><mtd><mrow><msub><mi>T</mi><mrow><mi>j</mi></mrow></msub><mo>=</mo><mi>A</mi><msub><mi>T</mi><mrow><mi>j</mi><mo>‚àí</mo><mn>1</mn></mrow></msub><mo>‚àí</mo><msubsup><mo>‚àë</mo><mrow><mi>i</mi></mrow><mrow><mi>n</mi></mrow></msubsup><msub><mi>P</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><msub><mi>S</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>+</mo><msub><mi>I</mi><mi>j</mi></msub></mrow></mtd></mtr><mtr><mtd><mrow></mrow></mtd><mtd><mrow><mrow></mrow></mrow></mtd><mtd><mrow><msubsup><mo>‚àë</mo><mrow><mi>i</mi></mrow><mrow><mi>O</mi></mrow></msubsup><msubsup><mo>‚àë</mo><mrow><mi>j</mi></mrow><mrow><mn>1</mn><mn>2</mn></mrow></msubsup><msub><mi>S</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><mn>1</mn></mrow></mtd></mtr><mtr><mtd><mrow></mrow></mtd><mtd><mrow><mrow></mrow></mrow></mtd><mtd><mrow><msubsup><mo>‚àë</mo><mrow><mi>i</mi></mrow><mrow><mi>R</mi></mrow></msubsup><msub><mi>S</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><mn>1</mn><mspace width="1em"></mspace><mi mathvariant="normal">‚àÄ</mi><mi>j</mi><mo>‚àà</mo><mo>{</mo><mn>1</mn><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mn>1</mn><mn>2</mn><mo>}</mo></mrow></mtd></mtr><mtr><mtd><mrow></mrow></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">\begin{aligned} &amp; \text{Maxmize } &amp; \sum_{i}^{R\cup O}\sum_{j}^{12}L_{ij}S_{ij} \\ &amp; \text{Subject to} &amp; \sum_{i}^{n}P_{ij}S_{ij}\le AT_{j-1}+I_j \\ &amp; &amp; T_{j} = AT_{j-1} - \sum_{i}^{n}P_{ij}S_{ij} +I_j \\ &amp; &amp; \sum_{i}^{O}\sum_{j}^{12}S_{ij} = 1 \\ &amp; &amp; \sum_{i}^{R}S_{ij} = 1 \quad \forall j\in \{1...12\} \\ \end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:8.5741815em"></span><span class="strut bottom" style="height:16.648363em;vertical-align:-8.0741815em"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist"><span style="top:-6.7458455em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"></span></span><span style="top:-3.6806714999999994em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"></span></span><span style="top:-.7516054999999988em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"></span></span><span style="top:2.3543995000000013em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"></span></span><span style="top:5.596512500000001em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"></span></span><span style="top:7.7141815em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="col-align-l"><span class="vlist"><span style="top:-6.7458455em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="text mord displaystyle textstyle uncramped"><span class="mord mathrm">M</span><span class="mord mathrm">a</span><span class="mord mathrm">x</span><span class="mord mathrm">m</span><span class="mord mathrm">i</span><span class="mord mathrm">z</span><span class="mord mathrm">e</span><span class="mord mspace">¬†</span></span></span></span><span style="top:-3.6806714999999994em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="text mord displaystyle textstyle uncramped"><span class="mord mathrm">S</span><span class="mord mathrm">u</span><span class="mord mathrm">b</span><span class="mord mathrm">j</span><span class="mord mathrm">e</span><span class="mord mathrm">c</span><span class="mord mathrm">t</span><span class="mord mspace">¬†</span><span class="mord mathrm">t</span><span class="mord mathrm">o</span></span></span></span><span style="top:-.7516054999999988em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span></span></span><span style="top:2.3543995000000013em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span></span></span><span style="top:5.596512500000001em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="arraycolsep" style="width:2em"></span><span class="col-align-r"><span class="vlist"><span style="top:-6.7458455em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"><span class="mop op-limits"><span class="vlist"><span style="top:1.1776689999999999em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span></span></span></span><span style="top:-.000005000000000143778em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span><span class="op-symbol large-op mop">‚àë</span></span></span><span style="top:-1.2500050000000003em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit" style="margin-right:.00773em">R</span><span class="mbin">‚à™</span><span class="mord mathit" style="margin-right:.02778em">O</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mop op-limits"><span class="vlist"><span style="top:1.1776689999999999em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:.05724em">j</span></span></span></span><span style="top:-.000005000000000254801em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span><span class="op-symbol large-op mop">‚àë</span></span></span><span style="top:-1.2500050000000005em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">1</span><span class="mord mathrm">2</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mord"><span class="mord mathit">L</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:.05724em">j</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:.05764em">S</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.05764em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:.05724em">j</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span></span></span><span style="top:-3.6806714999999994em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"><span class="mop op-limits"><span class="vlist"><span style="top:1.1776689999999999em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span></span></span></span><span style="top:-.000005000000000143778em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span><span class="op-symbol large-op mop">‚àë</span></span></span><span style="top:-1.2500050000000003em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:.13889em">P</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.13889em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:.05724em">j</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:.05764em">S</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.05764em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:.05724em">j</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mrel">‚â§</span><span class="mord mathit">A</span><span class="mord"><span class="mord mathit" style="margin-right:.13889em">T</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.13889em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:.05724em">j</span><span class="mbin">‚àí</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mbin">+</span><span class="mord"><span class="mord mathit" style="margin-right:.07847em">I</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.07847em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:.05724em">j</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span></span></span><span style="top:-.7516054999999988em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:.13889em">T</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.13889em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:.05724em">j</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mrel">=</span><span class="mord mathit">A</span><span class="mord"><span class="mord mathit" style="margin-right:.13889em">T</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.13889em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:.05724em">j</span><span class="mbin">‚àí</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mbin">‚àí</span><span class="mop op-limits"><span class="vlist"><span style="top:1.1776689999999999em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span></span></span></span><span style="top:-.000005000000000143778em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span><span class="op-symbol large-op mop">‚àë</span></span></span><span style="top:-1.2500050000000003em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:.13889em">P</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.13889em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:.05724em">j</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:.05764em">S</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.05764em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:.05724em">j</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mbin">+</span><span class="mord"><span class="mord mathit" style="margin-right:.07847em">I</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.07847em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:.05724em">j</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span></span></span><span style="top:2.3543995000000013em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"><span class="mop op-limits"><span class="vlist"><span style="top:1.1776689999999999em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span></span></span></span><span style="top:-.000005000000000143778em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span><span class="op-symbol large-op mop">‚àë</span></span></span><span style="top:-1.2500050000000003em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit" style="margin-right:.02778em">O</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mop op-limits"><span class="vlist"><span style="top:1.1776689999999999em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:.05724em">j</span></span></span></span><span style="top:-.000005000000000254801em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span><span class="op-symbol large-op mop">‚àë</span></span></span><span style="top:-1.2500050000000005em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">1</span><span class="mord mathrm">2</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:.05764em">S</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.05764em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:.05724em">j</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span><span style="top:5.596512500000001em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"><span class="mop op-limits"><span class="vlist"><span style="top:1.1776689999999999em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span></span></span></span><span style="top:-.000005000000000143778em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span><span class="op-symbol large-op mop">‚àë</span></span></span><span style="top:-1.2500050000000003em;margin-left:0"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit" style="margin-right:.00773em">R</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:.05764em">S</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.05764em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:.05724em">j</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="mrel">=</span><span class="mord mathrm">1</span><span class="mord mspace quad"></span><span class="mord mathrm">‚àÄ</span><span class="mord mathit" style="margin-right:.05724em">j</span><span class="mrel">‚àà</span><span class="mopen">{</span><span class="mord mathrm">1</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mord mathrm">1</span><span class="mord mathrm">2</span><span class="mclose">}</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span></span></span></span></span></span></span></p><p>Though optimization might give us the optimal solution in complex cases, but it is also acceptable to use normal methods as shown below.</p><img src="/2020/Capstone-prooject-design-specification-v0-1/alg2.png"><h2 id="sample-codes"><a class="markdownIt-Anchor" href="#sample-codes"></a> Sample codes</h2><h5 id="sample-question"><a class="markdownIt-Anchor" href="#sample-question"></a> Sample Question</h5><p>Each week you‚Äôre limited to 300 square feet of wood, 110 hours of labor, and 400 square feet of storage.</p><p>A table uses 30sf of wood, 5 hours of labor, requires 30sf of storage and has a gross profit of 1,200. A dresser uses 20sf of wood, 10 hours of work to put together, requires 50 square feet to store and has a gross profit of 1,600.</p><p>How much of each do you produce to maximize profit, given that partial furniture aren‚Äôt allowed in this dumb world problem?</p><h5 id="for-the-model"><a class="markdownIt-Anchor" href="#for-the-model"></a> For the model</h5><p>Definition of model:</p><p>W: wood provided</p><p>L: labor provided</p><p>S: storage provided</p><p>T: amount of table made</p><p>D: amount of dresser produced</p><p></p><p>Math representation:</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtable><mtr><mtd><mrow></mrow></mtd><mtd><mrow><mrow></mrow><mtext><mi mathvariant="normal">M</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">x</mi><mi mathvariant="normal">m</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">z</mi><mi mathvariant="normal">e</mi><mtext>¬†</mtext></mtext></mrow></mtd><mtd><mrow><mn>1</mn><mn>2</mn><mn>0</mn><mn>0</mn><mi>T</mi><mo>+</mo><mn>1</mn><mn>6</mn><mn>0</mn><mn>0</mn><mi>D</mi></mrow></mtd></mtr><mtr><mtd><mrow></mrow></mtd><mtd><mrow><mrow></mrow><mtext><mi mathvariant="normal">S</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">b</mi><mi mathvariant="normal">j</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">c</mi><mi mathvariant="normal">t</mi><mtext>¬†</mtext><mi mathvariant="normal">t</mi><mi mathvariant="normal">o</mi></mtext></mrow></mtd><mtd><mrow><mn>3</mn><mn>0</mn><mi>T</mi><mo>+</mo><mn>2</mn><mn>0</mn><mi>D</mi><mo>‚â§</mo><mn>3</mn><mn>0</mn><mn>0</mn></mrow></mtd></mtr><mtr><mtd><mrow></mrow></mtd><mtd><mrow><mrow></mrow></mrow></mtd><mtd><mrow><mn>5</mn><mi>T</mi><mo>+</mo><mn>1</mn><mn>0</mn><mi>D</mi><mo>‚â§</mo><mn>1</mn><mn>1</mn><mn>0</mn></mrow></mtd></mtr><mtr><mtd><mrow></mrow></mtd><mtd><mrow><mrow></mrow></mrow></mtd><mtd><mrow><mn>3</mn><mn>0</mn><mi>T</mi><mo>+</mo><mn>5</mn><mn>0</mn><mi>D</mi><mo>‚â§</mo><mn>4</mn><mn>0</mn><mn>0</mn></mrow></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">\begin{aligned} &amp; \text{Maxmize } &amp; 1200T+1600D\\ &amp; \text{Subject to} &amp; 30T+20D \le 300 \\ &amp; &amp; 5T+10D \le 110 \\ &amp; &amp; 30T+50D \le 400 \end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:2.6500000000000004em"></span><span class="strut bottom" style="height:4.800000000000001em;vertical-align:-2.1500000000000004em"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist"><span style="top:-1.8100000000000003em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"></span></span><span style="top:-.6100000000000001em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"></span></span><span style="top:.5900000000000001em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"></span></span><span style="top:1.7900000000000003em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="col-align-l"><span class="vlist"><span style="top:-1.8100000000000003em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="text mord displaystyle textstyle uncramped"><span class="mord mathrm">M</span><span class="mord mathrm">a</span><span class="mord mathrm">x</span><span class="mord mathrm">m</span><span class="mord mathrm">i</span><span class="mord mathrm">z</span><span class="mord mathrm">e</span><span class="mord mspace">¬†</span></span></span></span><span style="top:-.6100000000000001em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="text mord displaystyle textstyle uncramped"><span class="mord mathrm">S</span><span class="mord mathrm">u</span><span class="mord mathrm">b</span><span class="mord mathrm">j</span><span class="mord mathrm">e</span><span class="mord mathrm">c</span><span class="mord mathrm">t</span><span class="mord mspace">¬†</span><span class="mord mathrm">t</span><span class="mord mathrm">o</span></span></span></span><span style="top:.5900000000000001em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span></span></span><span style="top:1.7900000000000003em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span><span class="arraycolsep" style="width:2em"></span><span class="col-align-r"><span class="vlist"><span style="top:-1.8100000000000003em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathrm">1</span><span class="mord mathrm">2</span><span class="mord mathrm">0</span><span class="mord mathrm">0</span><span class="mord mathit" style="margin-right:.13889em">T</span><span class="mbin">+</span><span class="mord mathrm">1</span><span class="mord mathrm">6</span><span class="mord mathrm">0</span><span class="mord mathrm">0</span><span class="mord mathit" style="margin-right:.02778em">D</span></span></span><span style="top:-.6100000000000001em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathrm">3</span><span class="mord mathrm">0</span><span class="mord mathit" style="margin-right:.13889em">T</span><span class="mbin">+</span><span class="mord mathrm">2</span><span class="mord mathrm">0</span><span class="mord mathit" style="margin-right:.02778em">D</span><span class="mrel">‚â§</span><span class="mord mathrm">3</span><span class="mord mathrm">0</span><span class="mord mathrm">0</span></span></span><span style="top:.5900000000000001em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathrm">5</span><span class="mord mathit" style="margin-right:.13889em">T</span><span class="mbin">+</span><span class="mord mathrm">1</span><span class="mord mathrm">0</span><span class="mord mathit" style="margin-right:.02778em">D</span><span class="mrel">‚â§</span><span class="mord mathrm">1</span><span class="mord mathrm">1</span><span class="mord mathrm">0</span></span></span><span style="top:1.7900000000000003em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathrm">3</span><span class="mord mathrm">0</span><span class="mord mathit" style="margin-right:.13889em">T</span><span class="mbin">+</span><span class="mord mathrm">5</span><span class="mord mathrm">0</span><span class="mord mathit" style="margin-right:.02778em">D</span><span class="mrel">‚â§</span><span class="mord mathrm">4</span><span class="mord mathrm">0</span><span class="mord mathrm">0</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span></span></span></span></span></span></span></p><h5 id="for-the-code"><a class="markdownIt-Anchor" href="#for-the-code"></a> For the code</h5><p>Code as shown below:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> model = &#123;</span><br><span class="line">        <span class="string">"optimize"</span>: <span class="string">"profit"</span>,</span><br><span class="line">        <span class="string">"opType"</span>: <span class="string">"max"</span>,</span><br><span class="line">        <span class="string">"constraints"</span>: &#123;</span><br><span class="line">            <span class="string">"wood"</span>: &#123;<span class="string">"max"</span>: <span class="number">300</span>&#125;,</span><br><span class="line">            <span class="string">"labor"</span>: &#123;<span class="string">"max"</span>: <span class="number">110</span>&#125;,</span><br><span class="line">            <span class="string">"storage"</span>: &#123;<span class="string">"max"</span>: <span class="number">400</span>&#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"variables"</span>: &#123;</span><br><span class="line">            <span class="string">"table"</span>: &#123;<span class="string">"wood"</span>: <span class="number">30</span>, <span class="string">"labor"</span>: <span class="number">5</span>, <span class="string">"profit"</span>: <span class="number">1200</span>, <span class="string">"table"</span>: <span class="number">1</span>, <span class="string">"storage"</span>: <span class="number">30</span>&#125;,</span><br><span class="line">            <span class="string">"dresser"</span>: &#123;<span class="string">"wood"</span>: <span class="number">20</span>, <span class="string">"labor"</span>: <span class="number">10</span>, <span class="string">"profit"</span>: <span class="number">1600</span>, <span class="string">"dresser"</span>: <span class="number">1</span>, <span class="string">"storage"</span>: <span class="number">50</span>&#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"ints"</span>: &#123;<span class="string">"table"</span>: <span class="number">1</span>, <span class="string">"dresser"</span>: <span class="number">1</span>&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"><span class="built_in">console</span>.log(solver.Solve(model));</span><br></pre></td></tr></table></figure><h1 id="home-page"><a class="markdownIt-Anchor" href="#home-page"></a> Home Page</h1><h5 id="host-7"><a class="markdownIt-Anchor" href="#host-7"></a> Host</h5><p>This page will be hosted at main site in a sub directory, at <a href="http://capitaltwo.ga/index.html" target="_blank" rel="noopener">capitaltwo.ga/index.html</a>.</p><p>This is a pure HTML + JS page. I will suggest to use <a href="https://materializecss.com/" target="_blank" rel="noopener">Materialcss</a>. By filling the data and do a little edit to their <a href="https://materializecss.com/templates/parallax-template/preview.html" target="_blank" rel="noopener">Parallax Template</a>, then we could build a home page as template. The home page would include our information and purpose of this website, as well as our functions, special stuff.</p><h1 id="copyright-info-and-disclaimer"><a class="markdownIt-Anchor" href="#copyright-info-and-disclaimer"></a> Copyright info and Disclaimer</h1><h5 id="host-8"><a class="markdownIt-Anchor" href="#host-8"></a> Host</h5><p>This page will be hosted at main site in a sub directory, at <a href="http://capitaltwo.ga/legal.html" target="_blank" rel="noopener">capitaltwo.ga/legal.html</a>. Or in a defaault place created by Github.</p><p>The whole project will use multiple libraries and multiple source codes. Our code could be licensed through MIT, usually saw as:</p><p><span>MIT License</span> MIT License</p><p>Copyright ¬© 2020 Capitaltwo</p><p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the ‚ÄúSoftware‚Äù), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p><p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p><p>THE SOFTWARE IS PROVIDED ‚ÄúAS IS‚Äù, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p><p>We should also include license of other library we use. Sample as shown below:</p><p>We will need to put those information in a place easy to see. For page that are hard to see, we could provide a bar and guide user to go to the correct page to see it.</p><h1 id="color-and-style-choosing"><a class="markdownIt-Anchor" href="#color-and-style-choosing"></a> Color and Style choosing</h1><h5 id="host-9"><a class="markdownIt-Anchor" href="#host-9"></a> Host</h5><p>Most part of this section will be hold in other website.</p><p>We need to define one the major color for all page. And up to 5 supplement colors. Also we need to define the color for reference section, links, etc. Some color palette as shown below:</p><h1 id="repo-structure"><a class="markdownIt-Anchor" href="#repo-structure"></a> Repo Structure</h1><p>Here is the structure:</p><p><a href="https://github.com/CapitalTwo/Weekly-update" target="_blank" rel="noopener">Weekly-update</a> ‚Äì Ritika is responsible for this section. It contains the weekly update. We will create a new folder for each week, I will put the recommended work for this week to the week[number] folder and Ritika will convert them into words.</p><p><a href="https://github.com/CapitalTwo/Main-Site" target="_blank" rel="noopener">Main-Site</a> ‚Äì The main site of the website, it is located at <a href="http://capitaltwo.ga" target="_blank" rel="noopener">capitaltwo.ga</a> or <a href="http://www.capitaltwo.ga" target="_blank" rel="noopener">www.capitaltwo.ga</a>. peter is responsible for this part. It contains all tools(in subfolder), function page, homepage.</p><p><a href="https://github.com/CapitalTwo/Website-Content" target="_blank" rel="noopener">Website-Content</a> ‚Äì Ritika is responsible for this section. It is a private repo that contains all files we will publish on the knowledge passage. Recommend structure: (topic is the name of topic)</p><ul><li>Topic<ul><li>stage 1<ul><li><a href="http://topic-stage1.md" target="_blank" rel="noopener">topic-stage1.md</a></li><li>topic-stage1.json</li></ul></li><li>stage 2<ul><li><a href="http://topic-stage2.md" target="_blank" rel="noopener">topic-stage2.md</a></li></ul></li></ul></li></ul><p><a href="https://github.com/CapitalTwo/Knowledge-Passage" target="_blank" rel="noopener">Knowledge-Passage</a> ‚Äì The place to host <a href="http://knowledge.capitaltwo.ga" target="_blank" rel="noopener">knowledge.capitaltwo.ga</a>, our knowledge passages. <strong>Generated automatically, please do NOT modify</strong></p><p><a href="https://github.com/CapitalTwo/Capstone-Wiki" target="_blank" rel="noopener">Capstone-Wiki</a> ‚Äì The place for our wiki page, <a href="http://wiki.capitaltwo.ga" target="_blank" rel="noopener">wiki.capitaltwo.ga</a>,. It contains our development process and weekly update. <strong>Generated automatically, please do NOT modify</strong></p><h1 id="schedule"><a class="markdownIt-Anchor" href="#schedule"></a> Schedule</h1><p>For anonymous reason, name has been removed. This is a flexible schedule that people are only recommended to finish the corresponding stuff before the due date. As soon as each one follow the the due date, entire project could be done</p><div style="overflow-x:auto"><table cellspacing="0" border="0"><colgroup span="2" width="63"></colgroup><colgroup width="203"></colgroup><colgroup width="63"></colgroup><colgroup width="208"></colgroup><colgroup width="104"></colgroup><colgroup width="118"></colgroup><colgroup width="107"></colgroup><tr><td height="18" align="left" valign="bottom"><font color="#000000"><br></font></td><td colspan="2" align="center" valign="bottom"><font color="#000000">Weekly work</font></td><td align="left" valign="bottom"><font color="#000000">Due</font></td><td align="left" valign="bottom"><font color="#000000">Reading</font></td><td align="left" valign="middle"><font color="#000000">Present</font></td><td align="left" valign="middle"><font color="#000000">Meeting</font></td><td align="left" valign="bottom"><font color="#000000">Mine</font></td></tr><tr><td style="border-top:1px solid #000;border-bottom:1px solid #000" rowspan="3" height="111" align="center" valign="middle"><font color="#000000">Week 1</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Person A</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Learn Markdown, 3 passages + 3 Quiz Prep(as in section 2)</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000"><br></font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" align="left" valign="middle"><u><font color="#0563C1"><a href="https://www.markdownguide.org/getting-started/%20https:/www.markdownguide.org/basic-syntax/" target="_blank" rel="noopener">https://www.markdownguide.org/getting-started/ https://www.markdownguide.org/basic-syntax/</a></font></u></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" rowspan="3" align="center" valign="middle"><font color="#000000">Home page</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" rowspan="3" align="center" valign="middle"><font color="#000000">Yes, on Saturday. Discuss color, image, workload, role selection, and intro to markdown</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" rowspan="3" align="center" valign="middle"><font color="#000000">Set up environment, work on ejs step1</font></td></tr><tr><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Person B</font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Words for Home page and other pages(function, tool introduction), select image</font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000"><br></font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Section 10</font></td></tr><tr><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Person C</font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Warm-up for MaterialCss, write homepage</font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Due</font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><u><font color="#0563C1"><a href="https://materializecss.com/getting-started.html" target="_blank" rel="noopener">https://materializecss.com/getting-started.html</a></font></u></td></tr><tr><td style="border-bottom:1px solid #000" rowspan="3" height="213" align="center" valign="middle"><font color="#000000">Week 2</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Person A</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">4 passages + 4 Quiz Prep</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000"><br></font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Sction &amp; 2</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" rowspan="3" align="center" valign="middle"><font color="#000000">Retirement calculation tool + Loan calculation tool HTML</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" rowspan="3" align="center" valign="middle"><font color="#000000">Not Required</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" rowspan="3" align="center" valign="middle"><font color="#000000">work on ejs step2 &amp; encryption part 2</font></td></tr><tr><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Person B</font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Get familar with Cloudflare worker, build first script that will return a sample quiz(Just return JSON, no randomization need) based on format discussed in 3.1.1</font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000"><br></font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><u><font color="#0563C1"><a href="https://developers.cloudflare.com/workers/" target="_blank" rel="noopener">No need to install anthing, online platform is enough https://developers.cloudflare.com/workers/learning</a></font></u></td></tr><tr><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Person C</font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Retirement calculation tool + Loan calculation tool HTML page(No function required)</font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Due</font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Can use https://shaokangjiang.github.io/energy// as reference, source code: https://github.com/ShaokangJiang/energy/blob/master/index.html</font></td></tr><tr><td style="border-bottom:1px solid #000" rowspan="3" height="231" align="center" valign="middle"><font color="#000000">Week 3</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Person A</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">2 passages + 2 Quiz Prep + slide for midterm</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Due</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Sction 1 &amp; 2</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" rowspan="3" align="center" valign="middle"><u><font color="#0563C1"><a href="https://uwprod-my.sharepoint.com/:p:/g/personal/sjiang97_wisc_edu/Efh5LwwiIgREjTkL8oiy_5ABqRhLU5RGUIZSThvxg3ny9w?e=fgAQPb" target="_blank" rel="noopener">https://uwprod-my.sharepoint.com/:p:/g/personal/sjiang97_wisc_edu/Efh5LwwiIgREjTkL8oiy_5ABqRhLU5RGUIZSThvxg3ny9w?e=fgAQPb</a></font></u></td><td style="border-bottom:1px solid #000" rowspan="3" align="center" valign="middle"><font color="#000000">Person AB need to meet to discuss what type of generated quiz should be</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" rowspan="3" align="center" valign="middle"><font color="#000000">encryption 2 &amp; quiz client side 1</font></td></tr><tr><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Person B</font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">slide for midterm + And build function on worker to randomly select quiz questions and provide to user. As discussed in 3.2.1. Basic structure is fine.</font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000"><br></font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Section 3.1.2 &amp; 3.2.1</font></td></tr><tr><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Person C</font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">JS code for Retirement calculation tool + slide for midterm</font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000"><br></font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Can use https://shaokangjiang.github.io/energy// as reference, source code: https://github.com/ShaokangJiang/energy/blob/master/index.html</font></td></tr><tr><td style="border-bottom:1px solid #000" rowspan="3" height="141" align="center" valign="middle"><font color="#000000">Week 4</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Person A</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">3 passages + 3 Quiz Prep</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000"><br></font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Sction 1 &amp; 2</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" rowspan="3" align="center" valign="middle"><font color="#000000">Budgeting tool HTML</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" rowspan="3" align="center" valign="middle"><font color="#000000">Not required</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" rowspan="3" align="center" valign="middle"><font color="#000000">quiz 2</font></td></tr><tr><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Person B</font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Build validation functions to validate quiz correctness for randomly quizzes. And function to generate quizzes</font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000"><br></font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Section 3.2.1</font></td></tr><tr><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Person C</font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">JS code for Loan calculation tool</font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Due</font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000"><br></font></td></tr><tr><td style="border-bottom:1px solid #000" rowspan="3" height="128" align="center" valign="middle"><font color="#000000">Week 5</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Person A</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">4 passages + 4 Quiz Prep</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Due</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Sction 1 &amp; 2</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" rowspan="3" align="center" valign="middle"><font color="#000000">Quiz</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" rowspan="3" align="center" valign="middle"><font color="#000000">Not required</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" rowspan="3" align="center" valign="middle"><font color="#000000">quiz 3 &amp; stock simulation data path &amp; prepare data for stock simulation as discussed in section 4</font></td></tr><tr><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Person B</font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Discuss and build &quot;generated quiz functions&quot; as in 3.1.2, might be a total of 8 functions. Depends on discussion result.</font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Due for previous work</font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Section 3.2.1 &amp; Section 4</font></td></tr><tr><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Person C</font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">JS code for budgeting tool as in 7.1. JS code for Retirement calculation tool</font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000"><br></font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Section 7, 7.1</font></td></tr><tr><td style="border-bottom:1px solid #000" rowspan="3" height="69" align="center" valign="middle"><font color="#000000">Week 6</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Person A</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">4 passages + 4 Quiz Prep</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000"><br></font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Sction 1 &amp; 2</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" rowspan="3" align="center" valign="middle"><font color="#000000">Stock simulation</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" rowspan="3" align="center" valign="middle"><font color="#000000">Not Required, except if stock simulation has a big problem</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" rowspan="3" align="center" valign="middle"><font color="#000000">budget optimization part 1</font></td></tr><tr><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Person B</font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Build validation functions for 8 generated quiz questions.</font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000"><br></font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000"><br></font></td></tr><tr><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Person C</font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Finish previous work</font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000"><br></font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Section 4</font></td></tr><tr><td style="border-bottom:1px solid #000" rowspan="3" height="99" align="center" valign="middle"><font color="#000000">Week 7</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Person A</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">4 passages + 4 Quiz Prep</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000"><br></font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Sction 1 &amp; 2</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" rowspan="3" align="center" valign="middle"><font color="#000000">The entire work</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" rowspan="3" align="center" valign="middle"><font color="#000000">Yes, Discuss final presentation slide</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" rowspan="3" align="center" valign="middle"><font color="#000000">budget optimization part 2 &amp; stock simulation &amp; support multi-language</font></td></tr><tr><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Person B</font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">4 passages + 4 Quiz Prep</font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Due</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Sction 1 &amp; 2</font></td></tr><tr><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Person C</font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Read and represent data in stock simulation + JS functions for calculation in stock simulation part 1</font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Due</font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Section 4</font></td></tr><tr><td style="border-bottom:1px solid #000" rowspan="3" height="127" align="center" valign="middle"><font color="#000000">Week 8</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Person A</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">2 passages + 2 Quiz Prep + Presentation slide + Final essay</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000"><br></font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Sction 1 &amp; 2</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" rowspan="3" align="center" valign="middle"><font color="#000000">Multi language</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" rowspan="3" align="center" valign="middle"><font color="#000000">Yes, Discuss final presentation slide</font></td><td style="border-top:1px solid #000;border-bottom:1px solid #000" rowspan="3" align="center" valign="middle"><font color="#000000">2 passages + 2 Quiz Prep + slide + Final essay</font></td></tr><tr><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Person B</font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">prepare copyright information + Final presentation slide + Final essay</font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000"><br></font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Supplemental info</font></td></tr><tr><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Person C</font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">JS functions for calculation in stock simulation part 2 &amp; Final presentation slide + Final essay</font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000"><br></font></td><td style="border-bottom:1px solid #000" align="left" valign="middle"><font color="#000000">Supplemental info</font></td></tr></table></div><h1 id="pdf-version"><a class="markdownIt-Anchor" href="#pdf-version"></a> PDF version</h1><p>Original file is written in xelatex and compiled as pdf version as shown below:</p><div class="row"><embed src="./1_new.pdf" width="100%" height="550" type="application/pdf"></div>]]></content:encoded>
      
      
      <category domain="https://shaokangjiang.github.io/categories/website/">website</category>
      
      
      <category domain="https://shaokangjiang.github.io/tags/MIP/">MIP</category>
      
      <category domain="https://shaokangjiang.github.io/tags/Expo/">Expo</category>
      
      <category domain="https://shaokangjiang.github.io/tags/Nlp-js/">Nlp.js</category>
      
      <category domain="https://shaokangjiang.github.io/tags/Website/">Website</category>
      
      <category domain="https://shaokangjiang.github.io/tags/JS/">JS</category>
      
      <category domain="https://shaokangjiang.github.io/tags/ejs/">ejs</category>
      
      <category domain="https://shaokangjiang.github.io/tags/HTML/">HTML</category>
      
      
      <comments>https://shaokangjiang.github.io/2020/Capstone-prooject-design-specification-v0-1/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Energy simulation Javafx version</title>
      <link>https://shaokangjiang.github.io/2020/projects/Energy-simulation-JavaFx-ver/</link>
      <guid>https://shaokangjiang.github.io/2020/projects/Energy-simulation-JavaFx-ver/</guid>
      <pubDate>Wed, 17 Jun 2020 12:52:22 GMT</pubDate>
      
      <description>&lt;p&gt;In a system where multiple types of energy source exist, running all components at all available times could be a waste by considering multiple different factors, including the device depreciation, normal energy in maintaining the entire system running. This waste is a significant factor when lower wind for wind producer happen, or lower light for light producer happen, or other stuff.&lt;/p&gt;&lt;p&gt;This is a javafx based energy running simulation simulator with &lt;a href=&quot;https://choco-solver.org/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;choco-solver&lt;/a&gt; to find optimal threshold, which will be used to determine the time to turn on the device and time to turn off. It contains methods to analyze history data to predict a threshold to make the entire system running as efficient as it could. After proper data is provided, system will run based on a threshold setting from user or automatically analyzed based on history data so that no energy will be wasted. This app is done solely by me.&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<p>In a system where multiple types of energy source exist, running all components at all available times could be a waste by considering multiple different factors, including the device depreciation, normal energy in maintaining the entire system running. This waste is a significant factor when lower wind for wind producer happen, or lower light for light producer happen, or other stuff.</p><p>This is a javafx based energy running simulation simulator with <a href="https://choco-solver.org/" target="_blank" rel="noopener">choco-solver</a> to find optimal threshold, which will be used to determine the time to turn on the device and time to turn off. It contains methods to analyze history data to predict a threshold to make the entire system running as efficient as it could. After proper data is provided, system will run based on a threshold setting from user or automatically analyzed based on history data so that no energy will be wasted. This app is done solely by me.</p><a id="more"></a><h2 id="ways-of-analyzing-history-data"><a class="markdownIt-Anchor" href="#ways-of-analyzing-history-data"></a> Ways of analyzing history data</h2><p>If <code>Using the first 30 input data to optimize and get the best possible threshold.</code> is checked, the first 30 data will be used to generate the optimized threshold.</p><p>By comparing methods in passage <a href="https://shaokangjiang.github.io/2020/Optimal-Energy-Production/">Optimal Energy Production</a> designed by me and the usage case, the following one is chosen at last:</p><h3 id="define-variables"><a class="markdownIt-Anchor" href="#define-variables"></a> Define variables</h3><p>J : type of energy, <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>J</mi><mo>‚àà</mo></mrow><annotation encoding="application/x-tex">J\in</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.68333em"></span><span class="strut bottom" style="height:.72243em;vertical-align:-.0391em"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:.09618em">J</span><span class="mrel">‚àà</span></span></span></span> {wind, water, <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>‚ãØ</mo></mrow><annotation encoding="application/x-tex">\cdots</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.31em"></span><span class="strut bottom" style="height:.31em;vertical-align:0"></span><span class="base textstyle uncramped"><span class="minner">‚ãØ</span></span></span></span> }</p><p>N : value index, 1, 2, <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>‚ãØ</mo></mrow><annotation encoding="application/x-tex">\cdots</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.31em"></span><span class="strut bottom" style="height:.31em;vertical-align:0"></span><span class="base textstyle uncramped"><span class="minner">‚ãØ</span></span></span></span>.</p><p>C = <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mrow><mi mathvariant="bold">R</mi></mrow><mi>J</mi></msup></mrow><annotation encoding="application/x-tex">\mathbf{R}^J</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.8413309999999999em"></span><span class="strut bottom" style="height:.8413309999999999em;vertical-align:0"></span><span class="base textstyle uncramped"><span><span class="mord textstyle uncramped"><span class="mord mathbf">R</span></span><span class="vlist"><span style="top:-.363em;margin-right:.05em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:.09618em">J</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span></span></span></span>: the normal energy consumption per unit time for each producer (Need to consider as a combination of multiple equipments, like: if we have two wind machine(user is able to define this in control), each machine will consume 10 W. Then <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>C</mi><mrow><mi>w</mi><mi>i</mi><mi>n</mi><mi>d</mi></mrow></msub></mrow><annotation encoding="application/x-tex">C_{wind}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.68333em"></span><span class="strut bottom" style="height:.83333em;vertical-align:-.15em"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:.07153em">C</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.07153em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:.02691em">w</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit">d</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span></span></span></span>=10*2=20)</p><p>U = <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mi mathvariant="bold">R</mi></mrow></mrow><annotation encoding="application/x-tex">\mathbf{R}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.68611em"></span><span class="strut bottom" style="height:.68611em;vertical-align:0"></span><span class="base textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathbf">R</span></span></span></span></span>: Total user consumption</p><p>W = <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mrow><mi mathvariant="bold">R</mi></mrow><mrow><mi>J</mi><mo separator="true">,</mo><mi>N</mi></mrow></msup></mrow><annotation encoding="application/x-tex">\mathbf{R}^{J,N}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.8413309999999999em"></span><span class="strut bottom" style="height:.8413309999999999em;vertical-align:0"></span><span class="base textstyle uncramped"><span><span class="mord textstyle uncramped"><span class="mord mathbf">R</span></span><span class="vlist"><span style="top:-.363em;margin-right:.05em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit" style="margin-right:.09618em">J</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:.10903em">N</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span></span></span></span>, the expected energy(total in above table) produced in each value index, either pre-calculated or calculate in model.</p><p>S = {0,1}<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mrow></mrow><mrow><mi>J</mi><mo separator="true">,</mo><mi>N</mi></mrow></msup></mrow><annotation encoding="application/x-tex">^{J,N}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.8413309999999999em"></span><span class="strut bottom" style="height:.8413309999999999em;vertical-align:0"></span><span class="base textstyle uncramped"><span class="mord"><span></span><span class="vlist"><span style="top:-.363em;margin-right:.05em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit" style="margin-right:.09618em">J</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:.10903em">N</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span></span></span></span>, to indicate I should turn on wind on this statistic data or not</p><p>B <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>‚àà</mo><mrow><mi mathvariant="bold">R</mi></mrow></mrow><annotation encoding="application/x-tex">\in \mathbf{R}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.68611em"></span><span class="strut bottom" style="height:.72521em;vertical-align:-.0391em"></span><span class="base textstyle uncramped"><span class="mrel">‚àà</span><span class="mord textstyle uncramped"><span class="mord mathbf">R</span></span></span></span></span> : The battery charging limitation.</p><p>D <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>‚àà</mo><msup><mrow><mi mathvariant="bold">R</mi></mrow><mrow><mi>J</mi><mo separator="true">,</mo><mi>N</mi></mrow></msup></mrow><annotation encoding="application/x-tex">\in \mathbf{R}^{J,N}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.8413309999999999em"></span><span class="strut bottom" style="height:.880431em;vertical-align:-.0391em"></span><span class="base textstyle uncramped"><span class="mrel">‚àà</span><span><span class="mord textstyle uncramped"><span class="mord mathbf">R</span></span><span class="vlist"><span style="top:-.363em;margin-right:.05em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit" style="margin-right:.09618em">J</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:.10903em">N</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">‚Äã</span></span>‚Äã</span></span></span></span></span></span>, indicate the day count each value index, either pre-calculated or calculate in model.</p><h3 id="optimization-model"><a class="markdownIt-Anchor" href="#optimization-model"></a> Optimization Model</h3>\begin{equation}\begin{split}&\text{Minimize } & \sum_{i\in N}\sum_{j\in J}D_{ij}S_{ij}\\& \text{Subject to}\ & 0 \le S_{ij} \le 1 \ \forall i\in N j\in J\\& & \sum_{i\in N}\sum_{j\in J}W_{ij}S_{ij}-\sum_{i\in N}\sum_{j\in J}C_{j}S_{ij}-U\ge B\end{split}\end{equation}<p>Use MIP to solve it</p><h3 id="code-to-solve-it"><a class="markdownIt-Anchor" href="#code-to-solve-it"></a> Code to solve it</h3><p>By comparing with multiple different libraries to solve it, <a href="https://choco-solver.org/" target="_blank" rel="noopener">choco-solver</a> is used on java platform at last, which is able to solve problems more than optimization and use machine learning in some cases. It is also able to solve other machine learning problems and provide a good way to customize based on different personal usage cases.</p><p>This code including reading data from stream, which better fits the real situation. Such that streaming data would be easily handled in the real situation. Details core code has multiple methods and it is visible at <a href="https://github.com/ShaokangJiang/energy-javafx/blob/master/application/Solver.java" target="_blank" rel="noopener">the Github repo</a>.</p><h2 id="running"><a class="markdownIt-Anchor" href="#running"></a> Running</h2><p>A easy way is to download the execution file from the publication page at <a href="https://github.com/ShaokangJiang/energy-javafx/releases/tag/0.2" target="_blank" rel="noopener">Release</a>, be caution that this is generated using Java, so only use it for study purpose.</p><h4 id="compile-and-run-from-source"><a class="markdownIt-Anchor" href="#compile-and-run-from-source"></a> Compile and run from source</h4><p>The source code is located at <a href="https://github.com/ShaokangJiang/energy-javafx" target="_blank" rel="noopener">https://github.com/ShaokangJiang/energy-javafx</a>, it is tested to be working with JFoenix, choco-solver, JavaFX8, Java JDK.</p><blockquote><p><strong>NOT RECOMMEND</strong> as too many arguments, dependencies and it is easy to be wrong</p></blockquote><h2 id="data-format"><a class="markdownIt-Anchor" href="#data-format"></a> Data format:</h2><h4 id="simulation-data"><a class="markdownIt-Anchor" href="#simulation-data"></a> Simulation data</h4><p>Header should be the same, <code>User_Usage</code> is not required but recommend. Each field represent the value sensor received.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Time,Wind_Speed,Light_H,Wave_Hight,Wave_Period,Current_Speed,User_Usage</span><br><span class="line">0,5.405,1213.072,3.591,9.104,1.846,501.5935</span><br><span class="line">0.2,8.157,1191.057,3.022,10.431,1.908,497.0755</span><br><span class="line">0.4,6.012,1197.794,1.709,8.784,1.936,503.0145</span><br><span class="line">0.6,6.477,1205.489,2.1,9.857,1.858,499.4511</span><br></pre></td></tr></table></figure><p>Download a sample from <a href="https://github.com/ShaokangJiang/energy/blob/master/sample/simulation%20data.csv" target="_blank" rel="noopener">here</a>.</p><h4 id="optimization-data"><a class="markdownIt-Anchor" href="#optimization-data"></a> Optimization data</h4><p>Header should be the same, <code>idx</code> is not required. Each category has a value component recoding the amount of power produced in unit time. Each count means the possibility of happening. Because we need to use a KWH = b KW * s/3600 to calculate energy produced. The count field has to be integer. We could use the possibility * a factor to make it become integer. And the sum of each count should be the same.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">idx,wind_value,wind_count,light_value,light_count,wave_value,wave_count,current_value,current_count</span><br><span class="line">0,4962654.905,189,100.8496541,45,485.3900022,222,71501.61128,105</span><br><span class="line">1,424133.8855,45,105.8598321,124,328.6975665,43,49752.79798,187</span><br><span class="line">2,3414695.961,18,113.1989172,130,438.1380705,33,35910.75581,12</span><br><span class="line">3,7346795.761,90,116.4237558,11,483.7242291,24,48819.12566,25</span><br><span class="line">4,4033868.032,20,105.5786618,25,226.1068017,14,1611.378029,35</span><br><span class="line">5, , ,106.0583865,19,364.8009734,10,19265.12771,1</span><br></pre></td></tr></table></figure><p>Download a sample from <a href="https://github.com/ShaokangJiang/energy/blob/master/sample/OptimizationData.csv" target="_blank" rel="noopener">here</a>.</p><h2 id="generate-fake-simulation-and-optimization-data"><a class="markdownIt-Anchor" href="#generate-fake-simulation-and-optimization-data"></a> Generate Fake Simulation and optimization data</h2><h4 id="fake-simulation-data"><a class="markdownIt-Anchor" href="#fake-simulation-data"></a> Fake simulation data</h4><p>Use java code below to generate fake simulation data(to be used in run page).</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> Random r = <span class="keyword">new</span> Random();</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">  <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">  FileWriter a = <span class="keyword">new</span> FileWriter(<span class="keyword">new</span> File(<span class="string">"1.csv"</span>));</span><br><span class="line">  a.write(<span class="string">"Wind_Speed,Light_H,Wave_Hight,Wave_Period,Current_Speed\r\n"</span>);</span><br><span class="line">  <span class="keyword">double</span> time = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span>(time&lt;<span class="number">36</span>) &#123;</span><br><span class="line">    a.write(generateNormalVar(<span class="number">8</span>,<span class="number">2</span>)+<span class="string">","</span>+generateNormalVar(<span class="number">1200</span>,<span class="number">50</span>)+</span><br><span class="line">        <span class="string">","</span>+generateNormalVar(<span class="number">2.5</span>,<span class="number">0.25</span>)+<span class="string">","</span>+generateNormalVar(<span class="number">9</span>,<span class="number">0.5</span>)+<span class="string">","</span>+generateNormalVar(<span class="number">2</span>,<span class="number">0.5</span>)+<span class="string">"\r\n"</span>);</span><br><span class="line">    time+=<span class="number">0.2</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  a.flush();</span><br><span class="line">  a.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * N(a,b)</span></span><br><span class="line"><span class="comment"> * center,distribution</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> x</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> y</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">generateNormalVar</span><span class="params">(<span class="keyword">double</span> a, <span class="keyword">double</span> b)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">double</span> x = Math.sqrt(b)*r.nextGaussian()+a;</span><br><span class="line">  r.nextGaussian();</span><br><span class="line">  <span class="keyword">return</span> String.format(<span class="string">"%.3f"</span>, x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="fake-optimization-data"><a class="markdownIt-Anchor" href="#fake-optimization-data"></a> Fake optimization data</h4><ul><li><p>To make the input source be easy to manage, represent and maintain. We could save them in the same file, if no enough data for a cell, leave it empty would be fine and recommended.</p></li><li><p>idx is not required but recommended</p></li><li><p>This generation code might be good enough as this is not the real case</p></li><li><p>header: idx,wind_value,wind_count,light_value,light_count,wave_value,wave_count,current_value,current_count</p></li></ul><p>Use java code below to generate fake optimization data(to be used in start page):</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">  FileWriter a = <span class="keyword">new</span> FileWriter(<span class="keyword">new</span> File(<span class="string">"1.csv"</span>));</span><br><span class="line">a.write(<span class="string">"idx,wind_value,wind_count,light_value,light_count,wave_value,wave_count,current_value,current_count\r\n"</span>);</span><br><span class="line">  <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">int</span> year = <span class="number">365</span>;</span><br><span class="line">  <span class="keyword">int</span> wind_count=year,light_count=year,wave_count=year,current_count=year;</span><br><span class="line">  <span class="keyword">while</span>(wind_count&gt;<span class="number">0</span> || light_count&gt;<span class="number">0</span> || wave_count&gt;<span class="number">0</span> || current_count&gt;<span class="number">0</span> ) &#123;</span><br><span class="line">    <span class="keyword">int</span> wind_count_=generateRandomIntegerIn(wind_count),light_count_=generateRandomIntegerIn(light_count),</span><br><span class="line">        wave_count_=generateRandomIntegerIn(wave_count),current_count_=generateRandomIntegerIn(current_count);</span><br><span class="line">    wind_count -= wind_count_;</span><br><span class="line">    light_count -= light_count_;</span><br><span class="line">    wave_count -= wave_count_;</span><br><span class="line">    current_count -= current_count_;</span><br><span class="line">    <span class="keyword">if</span>(wind_count_==<span class="number">0</span>&amp;&amp;light_count_==<span class="number">0</span>&amp;&amp;wave_count_==<span class="number">0</span>&amp;&amp;current_count_==<span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">    <span class="keyword">double</span> Wind_Speed=generateRandomDoubleIn(<span class="number">4</span>,<span class="number">15</span>),Light_H=generateRandomDoubleIn(<span class="number">1100</span>,<span class="number">1300</span>),</span><br><span class="line">        Wave_Hight=generateRandomDoubleIn(<span class="number">2</span>,<span class="number">3</span>),Wave_Period=generateRandomDoubleIn(<span class="number">7</span>,<span class="number">11</span>),</span><br><span class="line">        Current_Speed=generateRandomDoubleIn(<span class="number">1</span>,<span class="number">3</span>);</span><br><span class="line">    System.out.println(count+<span class="string">""</span>+wind_count+<span class="string">""</span>+light_count+<span class="string">""</span>+wave_count+<span class="string">""</span>+current_count+<span class="string">""</span>);</span><br><span class="line">    a.write(count + <span class="string">","</span>+ (wind_count_ == <span class="number">0</span> ? <span class="string">" "</span> : <span class="number">2866</span>*Wind_Speed*Wind_Speed*Wind_Speed) +<span class="string">","</span>+(wind_count_ == <span class="number">0</span> ? <span class="string">" "</span> : wind_count_) +<span class="string">","</span>+</span><br><span class="line">          (light_count_ == <span class="number">0</span> ? <span class="string">" "</span> : <span class="number">0.09</span>*Light_H) +<span class="string">","</span>+(light_count_ == <span class="number">0</span> ? <span class="string">" "</span> : light_count_) +<span class="string">","</span>+</span><br><span class="line">        (wave_count_ == <span class="number">0</span> ? <span class="string">" "</span> : <span class="number">6.6</span>*Wave_Hight*Wave_Hight*Wave_Period)+<span class="string">","</span>+(wave_count_ == <span class="number">0</span> ? <span class="string">" "</span> : wave_count_)+<span class="string">","</span>+</span><br><span class="line">          (current_count_ == <span class="number">0</span> ? <span class="string">" "</span> : <span class="number">1254</span>*Current_Speed*Current_Speed*Current_Speed )+<span class="string">","</span>+(current_count_ == <span class="number">0</span> ? <span class="string">" "</span> : current_count_)+<span class="string">"\r\n"</span>);</span><br><span class="line">    count++;</span><br><span class="line">  &#125;</span><br><span class="line">  a.flush();</span><br><span class="line">  a.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//0~h</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">generateRandomIntegerIn</span><span class="params">(<span class="keyword">int</span> h)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> ThreadLocalRandom.current().nextInt(<span class="number">0</span>, h + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">generateRandomDoubleIn</span><span class="params">(<span class="keyword">int</span> Min, <span class="keyword">int</span> Max)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> Min + (Math.random() * ((Max - Min) + <span class="number">1</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="usage"><a class="markdownIt-Anchor" href="#usage"></a> Usage</h3><p><span>Each field means the threshold of each component except wave. In the case of wave, the threshold needs to be pre-calculated using </span>$H^2T$. <span>User usage is in kwh per day or unit time, the unit time refers to the refresh frequency, which will be used to calculate energy produced in the frame of time.</span></p><p>The way to calculate energy produced per unit time: a KWH = b KW*s/3600, a is the result, b is the current power, a is the calculated energy. s is the refresh frequency. Refresh frequency in this form is in ms(milliseconds).</p><p>In the manual setting, you are able to choose to provide user usage data in the future, usually this means to have a column of data recording user consumption per unit time, it will be used as a source of consumming power. If that file doesn't have user usage, you could set it at here. In the auto generate mode, you have to provide one to let us find the optimal solution(guess a possible one would be fine).</p><h3 id="calculation-equation"><a class="markdownIt-Anchor" href="#calculation-equation"></a> Calculation Equation</h3><p><b>Wave</b>: $P_{total}=0.6*11*H^2T=6.6H^2T$ <span>H - height of wave T - period</span></p><p><b>Ocean Current</b>: $P=\frac{\rho v^3 S C_p}{2}=\frac{1050 v^3 \pi1.3^2* 0.45}{2}=1254v^3$ <span>P is the energy captured by the unit, œÅ is the fluid density, V is the fluid velocity, and S is the swept area of the impeller</span>$C_p$<span> is the energy utilization coefficient</span></p><p><b>Light</b>: $P=\frac{798*H_A}{365*24}=0.09*H_A, H_A$ <span>Total solar radiation per unit area</span></p><p><b>Wind</b>: $P=\frac{\rho v^3 S C_p}{2}=\frac{1.293 v^3 9852* 0.45}{2}=2866v^3$ <span>P is the energy captured by the unit, œÅ is the fluid density, V is the fluid velocity, and S is the swept area of the impeller</span>$C_p$<span> is the energy utilization coefficient</span></p><h3 id="sample-running"><a class="markdownIt-Anchor" href="#sample-running"></a> Sample running</h3><p>Optimization is done automatically and is not shown in this demo.</p><img src="/2020/projects/Energy-simulation-JavaFx-ver/1.gif">]]></content:encoded>
      
      
      <category domain="https://shaokangjiang.github.io/categories/optimization/">optimization</category>
      
      
      <category domain="https://shaokangjiang.github.io/tags/MIP/">MIP</category>
      
      <category domain="https://shaokangjiang.github.io/tags/JavaFX/">JavaFX</category>
      
      <category domain="https://shaokangjiang.github.io/tags/choco-solver/">choco-solver</category>
      
      <category domain="https://shaokangjiang.github.io/tags/JFoenix/">JFoenix</category>
      
      
      <comments>https://shaokangjiang.github.io/2020/projects/Energy-simulation-JavaFx-ver/#disqus_thread</comments>
      
    </item>
    
  </channel>
</rss>
